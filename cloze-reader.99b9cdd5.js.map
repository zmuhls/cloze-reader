{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAI,WAAW;AAAK,IAAI,WAAW;AAAK,IAAI,kBAAkB;AAAK,IAAI,aAAa;AAAM,IAAI,eAAe;AAAmB,IAAI,cAAc;AAAM,OAAO,MAAM,CAAC,aAAa,GAAG;AAAmB;AAEzM,+KAA+K,GAC/K;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,GACA,IAAI,aAAa;AACjB,IAAI,YAAY,OAAO,MAAM,CAAC,MAAM;AACpC,SAAS,OAAO,UAAU;IACxB,UAAU,IAAI,CAAC,IAAI,EAAE;IACrB,IAAI,CAAC,GAAG,GAAG;QACT,MAAM,OAAO,MAAM,CAAC,OAAO,CAAC,WAAW;QACvC,kBAAkB,EAAE;QACpB,mBAAmB,EAAE;QACrB,QAAQ,SAAU,EAAE;YAClB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,YAAa;QAChD;QACA,SAAS,SAAU,EAAE;YACnB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;QAC9B;IACF;IACA,OAAO,MAAM,CAAC,OAAO,CAAC,WAAW,GAAG;AACtC;AACA,OAAO,MAAM,CAAC,MAAM,GAAG;AACvB,OAAO,MAAM,CAAC,OAAO,GAAG,CAAC;AACzB,IAAI,cAAc,0BAA0B,KAC1C,eAAe,0BAA0B,KACzC,gBAAgB,mCAAmC,KACnD,eAAe,mCAAmC,KAClD,iBAAiB;AACnB,SAAS;IACP,OAAO,YAAa,CAAA,OAAO,aAAa,eAAe,SAAS,QAAQ,CAAC,OAAO,CAAC,YAAY,IAAI,SAAS,QAAQ,GAAG,WAAU;AACjI;AACA,SAAS;IACP,OAAO,YAAa,CAAA,OAAO,aAAa,cAAc,SAAS,IAAI,GAAG,eAAc;AACtF;AAEA,wCAAwC;AACxC,IAAI,YAAY,WAAW,SAAS;AACpC,IAAI,CAAC,aAAa,OAAO,OAAO,MAAM,CAAC,IAAI,KAAK,YAC9C,IAAI;IACF,4CAA4C;IAC5C,YAAY,OAAO,MAAM,CAAC,IAAI,CAAC;AACjC,EAAE,OAAM;AACN,UAAU;AACZ;AAEF,IAAI,WAAW;AACf,IAAI,OAAO;AACX,IAAI,WAAW,cAAc,OAAO,aAAa,eAAe,SAAS,QAAQ,KAAK,YAAY,CAAC;IAAC;IAAa;IAAa;CAAU,CAAC,QAAQ,CAAC,YAAY,QAAQ;AAEtK,wCAAwC;AACxC,IAAI,SAAS,OAAO,MAAM,CAAC,MAAM;AACjC,IAAI,CAAC,UAAU,CAAC,OAAO,eAAe,EAAE;IACtC,wBAAwB;IACxB,IAAI,SAAS,OAAO,YAAY,cAAc,OAAO,WAAW,cAAc,OAAO,SAAS;IAE9F,oDAAoD;IACpD,0DAA0D;IAC1D,IAAI,oBAAoB;IACxB,IAAI;QACD,CAAA,GAAG,IAAG,EAAG;IACZ,EAAE,OAAO,KAAK;QACZ,oBAAoB,IAAI,KAAK,CAAC,QAAQ,CAAC;IACzC;IACA,IAAI;IACJ,IAAI,aACF,KAAK,IAAI,YAAY;SAErB,IAAI;QACF,4FAA4F;QAC5F,IAAI,EACF,UAAU,EACV,UAAU,EACX,GAAG,OAAO,MAAM,CAAC,IAAI,CAAC,uBAAuB,OAAO;QACrD,IAAI,eAAe,QAAQ,eAAe,KAAK,KAAK,WAAW,QAAQ,EAAE;YACvE,WAAW,EAAE,CAAC,WAAW,OAAM;gBAC7B,IAAI;oBACF,MAAM,cAAc;oBACpB,WAAW,WAAW,CAAC;gBACzB,EAAE,OAAM;oBACN,WAAW,WAAW,CAAC;gBACzB;YACF;YAEA,gGAAgG;YAChG,eAAe,IAAM,WAAW,WAAW,CAAC;QAC9C;IACF,EAAE,OAAM;QACN,IAAI,OAAO,cAAc,aACvB,IAAI;YACF,KAAK,IAAI,UAAU,WAAW,QAAQ,WAAY,CAAA,OAAO,MAAM,OAAO,EAAC,IAAK;QAC9E,EAAE,OAAO,KAAK;YACZ,mCAAmC;YACnC,IAAI,IAAI,OAAO,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,oDACvC,QAAQ,KAAK,CAAC,IAAI,OAAO;QAE7B;IAEJ;IAEF,IAAI,IAAI;QACN,aAAa;QACb,GAAG,SAAS,GAAG,eAAgB,MAAM,wBAAwB,GAAzB;YAClC,IAAI,KAAK,eAAe,MAAK,KAAK,KAAK,CAAC,MAAM,IAAI;YAClD,MAAM,cAAc;QACtB;QACA,IAAI,cAAc,WAAW;YAC3B,GAAG,OAAO,GAAG,SAAU,CAAC;gBACtB,IAAI,EAAE,OAAO,EACX,QAAQ,KAAK,CAAC,EAAE,OAAO;YAE3B;YACA,GAAG,OAAO,GAAG;gBACX,QAAQ,IAAI,CAAC;YACf;QACF;IACF;AACF;AACA,eAAe,cAAc,KAAK,eAAe,GAAhB;IAC/B,gBAAgB,CAAC,EAAE,0BAA0B;IAC7C,iBAAiB,CAAC,EAAE,0BAA0B;IAC9C,iBAAiB,EAAE;IACnB,kBAAkB,EAAE;IACpB,iBAAiB;IACjB,IAAI,KAAK,IAAI,KAAK,UAChB;SACK,IAAI,KAAK,IAAI,KAAK,UAAU;QACjC,uCAAuC;QACvC,IAAI,OAAO,aAAa,aACtB;QAEF,IAAI,SAAS,KAAK,MAAM;QAExB,oBAAoB;QACpB,IAAI,UAAU,OAAO,KAAK,CAAC,CAAA;YACzB,OAAO,MAAM,IAAI,KAAK,SAAS,MAAM,IAAI,KAAK,QAAQ,eAAe,OAAO,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,EAAE,MAAM,YAAY;QACvH;QAEA,0EAA0E;QAC1E,2EAA2E;QAC3E,kEAAkE;QAClE,2EAA2E;QAC3E,sCAAsC;QACtC,IAAI,WAAW,kBAAkB,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,OAAO,KAAK,iBAAiB,OAAO,WAAW,eAAe,OAAO,gBAAgB,aACvI,UAAU,CAAC,OAAO,aAAa,CAAC,IAAI,YAAY,mBAAmB;YACjE,YAAY;QACd;QAEF,IAAI,SAAS;YACX,QAAQ,KAAK;YAEb,yEAAyE;YACzE,IAAI,OAAO,WAAW,eAAe,OAAO,gBAAgB,aAC1D,OAAO,aAAa,CAAC,IAAI,YAAY;YAEvC,MAAM,gBAAgB;YACtB;YAEA,8FAA8F;YAC9F,IAAI,kBAAkB,CAAC;YACvB,IAAK,IAAI,IAAI,GAAG,IAAI,eAAe,MAAM,EAAE,IAAK;gBAC9C,IAAI,KAAK,cAAc,CAAC,EAAE,CAAC,EAAE;gBAC7B,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE;oBACxB,UAAU,cAAc,CAAC,EAAE,CAAC,EAAE,EAAE;oBAChC,eAAe,CAAC,GAAG,GAAG;gBACxB;YACF;QACF,OAAO;IACT;IACA,IAAI,KAAK,IAAI,KAAK,SAAS;QACzB,+BAA+B;QAC/B,KAAK,IAAI,kBAAkB,KAAK,WAAW,CAAC,IAAI,CAAE;YAChD,IAAI,QAAQ,eAAe,SAAS,GAAG,eAAe,SAAS,GAAG,eAAe,KAAK;YACtF,QAAQ,KAAK,CAAC,4BAAkB,eAAe,OAAO,GAAG,OAAO,QAAQ,SAAS,eAAe,KAAK,CAAC,IAAI,CAAC;QAC7G;QACA,IAAI,OAAO,aAAa,aAAa;YACnC,gCAAgC;YAChC;YACA,IAAI,UAAU,mBAAmB,KAAK,WAAW,CAAC,IAAI;YACtD,aAAa;YACb,SAAS,IAAI,CAAC,WAAW,CAAC;QAC5B;IACF;AACF;AACA,SAAS;IACP,IAAI,UAAU,SAAS,cAAc,CAAC;IACtC,IAAI,SAAS;QACX,QAAQ,MAAM;QACd,QAAQ,GAAG,CAAC;IACd;AACF;AACA,SAAS,mBAAmB,WAAW;IACrC,IAAI,UAAU,SAAS,aAAa,CAAC;IACrC,QAAQ,EAAE,GAAG;IACb,IAAI,YAAY;IAChB,KAAK,IAAI,cAAc,YAAa;QAClC,IAAI,QAAQ,WAAW,MAAM,CAAC,MAAM,GAAG,WAAW,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG;YAClE,OAAO,GAAG,EAAE;SACT,EAAE,aAAa,QAAQ,UAAU,OAAO,GAAG,EAAE,SAAS,CAAC,EAAE,KAAK,6BAA6B,EAAE,mBAAmB,MAAM,QAAQ,EAAE,2FAA2F,EAAE,MAAM,QAAQ,CAAC;AACrP,EAAE,MAAM,IAAI,EAAE;QACV,GAAG,MAAM,WAAW,KAAK;QACzB,aAAa;AACjB;AACA;AACA,oBAAa,EAAE,WAAW,OAAO,CAAC;;aAErB,EAAE,MAAM;;UAEX,EAAE,WAAW,KAAK,CAAC,GAAG,CAAC,CAAA,OAAQ,uBAAa,OAAO,UAAU,IAAI,CAAC,IAAI;;QAExE,EAAE,WAAW,aAAa,GAAG,CAAC,8CAAuC,EAAE,WAAW,aAAa,CAAC,sCAAsC,CAAC,GAAG,GAAG;;IAEjJ,CAAC;IACH;IACA,aAAa;IACb,QAAQ,SAAS,GAAG;IACpB,OAAO;AACT;AACA,SAAS;IACP,IAAI,OAAO,aAAa,eAAe,YAAY,UACjD,SAAS,MAAM;SACV,IAAI,OAAO,WAAW,eAAe,UAAU,OAAO,OAAO,IAAI,OAAO,OAAO,CAAC,MAAM,EAC3F,OAAO,OAAO,CAAC,MAAM;SAErB,IAAI;QACF,IAAI,EACF,UAAU,EACV,UAAU,EACX,GAAG,OAAO,MAAM,CAAC,IAAI,CAAC,uBAAuB,OAAO;QACrD,IAAI,eAAe,QAAQ,eAAe,KAAK,KAAK,WAAW,QAAQ,EACrE,WAAW,WAAW,CAAC;IAE3B,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;IAChB;AAEJ;AACA,SAAS,WAAW,MAAM,EAAE,EAAE,EAAE,mCAAmC;IACjE,IAAI,UAAU,OAAO,OAAO;IAC5B,IAAI,CAAC,SACH,OAAO,EAAE;IAEX,IAAI,UAAU,EAAE;IAChB,IAAI,GAAG,GAAG;IACV,IAAK,KAAK,QACR,IAAK,KAAK,OAAO,CAAC,EAAE,CAAC,EAAE,CAAE;QACvB,MAAM,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;QACtB,IAAI,QAAQ,MAAM,MAAM,OAAO,CAAC,QAAQ,GAAG,CAAC,IAAI,MAAM,GAAG,EAAE,KAAK,IAC9D,QAAQ,IAAI,CAAC;YAAC;YAAQ;SAAE;IAE5B;IAEF,IAAI,OAAO,MAAM,EACf,UAAU,QAAQ,MAAM,CAAC,WAAW,OAAO,MAAM,EAAE;IAErD,OAAO;AACT;AACA,SAAS,WAAW,IAAI;IACtB,IAAI,OAAO,KAAK,YAAY,CAAC;IAC7B,IAAI,CAAC,MACH;IAEF,IAAI,UAAU,KAAK,SAAS;IAC5B,QAAQ,MAAM,GAAG;QACf,IAAI,KAAK,UAAU,KAAK,MACtB,aAAa;QACb,KAAK,UAAU,CAAC,WAAW,CAAC;IAEhC;IACA,QAAQ,YAAY,CAAC,QACrB,aAAa;IACb,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,MAAM,KAAK,GAAG;IACnC,aAAa;IACb,KAAK,UAAU,CAAC,YAAY,CAAC,SAAS,KAAK,WAAW;AACxD;AACA,IAAI,aAAa;AACjB,SAAS;IACP,IAAI,cAAc,OAAO,aAAa,aACpC;IAEF,aAAa,WAAW;QACtB,IAAI,QAAQ,SAAS,gBAAgB,CAAC;QACtC,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;YACrC,gCAAgC;YAChC,IAAI,KAAK,WAAW,MAAK,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC;YAC/C,IAAI,WAAW;YACf,IAAI,sBAAsB,aAAa,cAAc,IAAI,OAAO,mDAAmD,WAAW,IAAI,CAAC,QAAQ,KAAK,OAAO,CAAC,WAAW,MAAM;YACzK,IAAI,WAAW,gBAAgB,IAAI,CAAC,SAAS,KAAK,OAAO,CAAC,SAAS,MAAM,MAAM,KAAK,CAAC;YACrF,IAAI,CAAC,UACH,WAAW,KAAK,CAAC,EAAE;QAEvB;QACA,aAAa;IACf,GAAG;AACL;AACA,SAAS,YAAY,KAAK;IACxB,IAAI,MAAM,IAAI,KAAK,MAAM;QACvB,IAAI,OAAO,aAAa,aAAa;YACnC,IAAI,SAAS,SAAS,aAAa,CAAC;YACpC,OAAO,GAAG,GAAG,MAAM,GAAG,GAAG,QAAQ,KAAK,GAAG;YACzC,IAAI,MAAM,YAAY,KAAK,YACzB,OAAO,IAAI,GAAG;YAEhB,OAAO,IAAI,QAAQ,CAAC,SAAS;gBAC3B,IAAI;gBACJ,OAAO,MAAM,GAAG,IAAM,QAAQ;gBAC9B,OAAO,OAAO,GAAG;gBAChB,CAAA,iBAAiB,SAAS,IAAI,AAAD,MAAO,QAAQ,mBAAmB,KAAK,KAAK,eAAe,WAAW,CAAC;YACvG;QACF,OAAO,IAAI,OAAO,kBAAkB,YAAY;YAC9C,iBAAiB;YACjB,IAAI,MAAM,YAAY,KAAK,YACzB,OAAO,OAAmB,MAAM,GAAG,GAAG,QAAQ,KAAK,GAAG;iBAEtD,OAAO,IAAI,QAAQ,CAAC,SAAS;gBAC3B,IAAI;oBACF,cAA0B,MAAM,GAAG,GAAG,QAAQ,KAAK,GAAG;oBACtD;gBACF,EAAE,OAAO,KAAK;oBACZ,OAAO;gBACT;YACF;QAEJ;IACF;AACF;AACA,eAAe,gBAAgB,MAAM;IACnC,OAAO,eAAe,GAAG,OAAO,MAAM,CAAC;IACvC,IAAI;IACJ,IAAI;QACF,kEAAkE;QAClE,gEAAgE;QAChE,gEAAgE;QAChE,mDAAmD;QACnD,iDAAiD;QACjD,mDAAmD;QACnD,IAAI,CAAC,mBAAmB;YACtB,IAAI,WAAW,OAAO,GAAG,CAAC,CAAA;gBACxB,IAAI;gBACJ,OAAO,AAAC,CAAA,eAAe,YAAY,MAAK,MAAO,QAAQ,iBAAiB,KAAK,IAAI,KAAK,IAAI,aAAa,KAAK,CAAC,CAAA;oBAC3G,oBAAoB;oBACpB,IAAI,UAAU,OAAO,OAAO,IAAI,OAAO,OAAO,CAAC,WAAW,GAAG,gBAAgB,IAAI,KAAK,OAAO,4BAA4B,eAAe,kBAAkB,0BAA0B;wBAClL,OAAO,OAAO,CAAC,MAAM;wBACrB;oBACF;oBACA,MAAM;gBACR;YACF;YACA,kBAAkB,MAAM,QAAQ,GAAG,CAAC;QACtC;QACA,OAAO,OAAO,CAAC,SAAU,KAAK;YAC5B,SAAS,OAAO,MAAM,CAAC,IAAI,EAAE;QAC/B;IACF,SAAU;QACR,OAAO,OAAO,eAAe;QAC7B,IAAI,iBACF,gBAAgB,OAAO,CAAC,CAAA;YACtB,IAAI,QAAQ;gBACV,IAAI;gBACH,CAAA,kBAAkB,SAAS,IAAI,AAAD,MAAO,QAAQ,oBAAoB,KAAK,KAAK,gBAAgB,WAAW,CAAC;YAC1G;QACF;IAEJ;AACF;AACA,SAAS,SAAS,OAAO,kBAAkB,GAAnB,EAAuB,MAAM,cAAc,GAAf;IAClD,IAAI,UAAU,OAAO,OAAO;IAC5B,IAAI,CAAC,SACH;IAEF,IAAI,MAAM,IAAI,KAAK,OACjB;SACK,IAAI,MAAM,IAAI,KAAK,MAAM;QAC9B,IAAI,OAAO,MAAM,YAAY,CAAC,OAAO,aAAa,CAAC;QACnD,IAAI,MAAM;YACR,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE;gBACrB,iEAAiE;gBACjE,oHAAoH;gBACpH,IAAI,UAAU,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE;gBAClC,IAAK,IAAI,OAAO,QACd,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,EAAE;oBAC5C,IAAI,KAAK,OAAO,CAAC,IAAI;oBACrB,IAAI,UAAU,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE;oBAC7C,IAAI,QAAQ,MAAM,KAAK,GACrB,UAAU,OAAO,MAAM,CAAC,IAAI,EAAE;gBAElC;YAEJ;YACA,IAAI,mBAGF,AAFA,4DAA4D;YAC5D,+CAA+C;YAC9C,CAAA,GAAG,IAAG,EAAG,MAAM,MAAM;YAGxB,aAAa;YACb,IAAI,KAAK,OAAO,eAAe,CAAC,MAAM,EAAE,CAAC;YACzC,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG;gBAAC;gBAAI;aAAK;QAChC;QAEA,8FAA8F;QAC9F,0GAA0G;QAC1G,IAAI,OAAO,MAAM,EACf,SAAS,OAAO,MAAM,EAAE;IAE5B;AACF;AACA,SAAS,UAAU,MAAM,EAAE,EAAE;IAC3B,IAAI,UAAU,OAAO,OAAO;IAC5B,IAAI,CAAC,SACH;IAEF,IAAI,OAAO,CAAC,GAAG,EAAE;QACf,8EAA8E;QAC9E,IAAI,OAAO,OAAO,CAAC,GAAG,CAAC,EAAE;QACzB,IAAI,UAAU,EAAE;QAChB,IAAK,IAAI,OAAO,KAAM;YACpB,IAAI,UAAU,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI;YACtD,IAAI,QAAQ,MAAM,KAAK,GACrB,QAAQ,IAAI,CAAC,IAAI,CAAC,IAAI;QAE1B;QAEA,sGAAsG;QACtG,OAAO,OAAO,CAAC,GAAG;QAClB,OAAO,OAAO,KAAK,CAAC,GAAG;QAEvB,0BAA0B;QAC1B,QAAQ,OAAO,CAAC,CAAA;YACd,UAAU,OAAO,MAAM,CAAC,IAAI,EAAE;QAChC;IACF,OAAO,IAAI,OAAO,MAAM,EACtB,UAAU,OAAO,MAAM,EAAE;AAE7B;AACA,SAAS,eAAe,OAAO,kBAAkB,GAAnB,EAAuB,GAAG,WAAW,GAAZ,EAAgB,aAAa,uCAAuC,GAAxC;IACjF,gBAAgB,CAAC;IACjB,IAAI,kBAAkB,QAAQ,IAAI,eAChC,OAAO;IAGT,uGAAuG;IACvG,IAAI,UAAU,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE;IAC7C,IAAI,WAAW;IACf,MAAO,QAAQ,MAAM,GAAG,EAAG;QACzB,IAAI,IAAI,QAAQ,KAAK;QACrB,IAAI,IAAI,kBAAkB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE;QACtC,IAAI,GACF,+EAA+E;QAC/E,WAAW;aACN,IAAI,MAAM,MAAM;YACrB,yDAAyD;YACzD,IAAI,IAAI,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;YAC3C,IAAI,EAAE,MAAM,KAAK,GAAG;gBAClB,kFAAkF;gBAClF,WAAW;gBACX;YACF;YACA,QAAQ,IAAI,IAAI;QAClB;IACF;IACA,OAAO;AACT;AACA,SAAS,kBAAkB,OAAO,kBAAkB,GAAnB,EAAuB,GAAG,WAAW,GAAZ,EAAgB,aAAa,uCAAuC,GAAxC;IACpF,IAAI,UAAU,OAAO,OAAO;IAC5B,IAAI,CAAC,SACH;IAEF,IAAI,gBAAgB,CAAC,YAAY,CAAC,OAAO,aAAa,CAAC,EAAE;QACvD,2EAA2E;QAC3E,yEAAyE;QACzE,IAAI,CAAC,OAAO,MAAM,EAAE;YAClB,iBAAiB;YACjB,OAAO;QACT;QACA,OAAO,kBAAkB,OAAO,MAAM,EAAE,IAAI;IAC9C;IACA,IAAI,aAAa,CAAC,GAAG,EACnB,OAAO;IAET,aAAa,CAAC,GAAG,GAAG;IACpB,IAAI,SAAS,OAAO,KAAK,CAAC,GAAG;IAC7B,IAAI,CAAC,QACH,OAAO;IAET,gBAAgB,IAAI,CAAC;QAAC;QAAQ;KAAG;IACjC,IAAI,UAAU,OAAO,GAAG,IAAI,OAAO,GAAG,CAAC,gBAAgB,CAAC,MAAM,EAAE;QAC9D,eAAe,IAAI,CAAC;YAAC;YAAQ;SAAG;QAChC,OAAO;IACT;IACA,OAAO;AACT;AACA,SAAS;IACP,0BAA0B;IAC1B,IAAK,IAAI,IAAI,GAAG,IAAI,gBAAgB,MAAM,EAAE,IAAK;QAC/C,IAAI,KAAK,eAAe,CAAC,EAAE,CAAC,EAAE;QAC9B,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE;YACvB,WAAW,eAAe,CAAC,EAAE,CAAC,EAAE,EAAE;YAClC,cAAc,CAAC,GAAG,GAAG;QACvB;IACF;IACA,kBAAkB,EAAE;AACtB;AACA,SAAS,WAAW,OAAO,kBAAkB,GAAnB,EAAuB,GAAG,WAAW,GAAZ;IACjD,IAAI,SAAS,OAAO,KAAK,CAAC,GAAG;IAC7B,OAAO,OAAO,CAAC,GAAG,GAAG,CAAC;IACtB,IAAI,UAAU,OAAO,GAAG,EACtB,OAAO,GAAG,CAAC,IAAI,GAAG,OAAO,OAAO,CAAC,GAAG;IAEtC,IAAI,UAAU,OAAO,GAAG,IAAI,OAAO,GAAG,CAAC,iBAAiB,CAAC,MAAM,EAC7D,OAAO,GAAG,CAAC,iBAAiB,CAAC,OAAO,CAAC,SAAU,EAAE;QAC/C,GAAG,OAAO,OAAO,CAAC,GAAG;IACvB;IAEF,OAAO,OAAO,KAAK,CAAC,GAAG;AACzB;AACA,SAAS,UAAU,OAAO,kBAAkB,GAAnB,EAAuB,GAAG,WAAW,GAAZ;IAChD,sBAAsB;IACtB,OAAO;IAEP,6DAA6D;IAC7D,IAAI,SAAS,OAAO,KAAK,CAAC,GAAG;IAC7B,IAAI,UAAU,OAAO,GAAG,IAAI,OAAO,GAAG,CAAC,gBAAgB,CAAC,MAAM,EAAE;QAC9D,IAAI,qBAAqB,EAAE;QAC3B,OAAO,GAAG,CAAC,gBAAgB,CAAC,OAAO,CAAC,SAAU,EAAE;YAC9C,IAAI,mBAAmB,GAAG;gBACxB,OAAO,WAAW,OAAO,MAAM,CAAC,IAAI,EAAE;YACxC;YACA,IAAI,MAAM,OAAO,CAAC,qBAAqB,iBAAiB,MAAM,EAC5D,mBAAmB,IAAI,IAAI;QAE/B;QACA,IAAI,mBAAmB,MAAM,EAAE;YAC7B,IAAI,UAAU,mBAAmB,KAAK,CAAC,SAAU,CAAC;gBAChD,OAAO,eAAe,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;YAClC;YACA,IAAI,CAAC,SACH,OAAO;YAET;QACF;IACF;AACF;;;A;AC5kBA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAAQ,GAAG,CAAC;AAEZ,yDAAyD;AACzD,MAAM,oBAAoB,OAAO,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC;AAE5D,oCAAoC;AACpC,MAAM,iBAAiB,CAAC,kBAAkB,IAAI;IAC5C,QAAQ,GAAG,CAAC,kCAAkC;QAAE;IAAe;IAE/D,sCAAsC;IACtC,MAAM,WAAW,SAAS,cAAc,CAAC;IACzC,IAAI,UACF,SAAS,SAAS,GAAG,CAArB;;;;;;;;IAQC,CAAA;IAGH,oCAAoC;IACpC,IAAI;QACF,IAAI,OAAO,WAAW,eAAe,OAAQ,OAAe,UAAU,KAAK,YACxE,OAAe,UAAU,CAAC;aAE3B,CAAA,GAAA,qBAAU,AAAV,EAAW;QAEb,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAE/C,oCAAoC;QACpC,IAAI,UACF,SAAS,SAAS,GAAG,CAArB;;;;;;;;;;;;MAYC,CAAA;IAEL;AACF;AAEA,6BAA6B;AAC7B,MAAM,MAAM;IACV,mEAAmE;IACnE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS,CAAC;IAChD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS;IAE/C,0DAA0D;IAC1D,CAAA,GAAA,gBAAS,AAAT,EAAU;QACR,IAAI,qBAAqB,aAAa;YACpC,eAAe;YACf,qCAAqC;YACrC,WAAW;gBACT,eAAe;YACjB,GAAG;QACL;IACF,GAAG;QAAC;QAAmB;KAAY;IAEnC,6BAA6B;IAC7B,CAAA,GAAA,gBAAS,AAAT,EAAU;QACR,MAAM,uBAAuB;YAC3B,uBAAuB;YACvB,QAAQ,GAAG,CAAC,qBAAqB;gBAC/B,QAAQ,CAAA,GAAA,8BAAY,AAAZ,EAAa,KAAK,GAAG,YAAY;gBACzC,UAAU,CAAA,GAAA,4BAAc,AAAd,EAAe,KAAK;gBAC9B,QAAQ,CAAA,GAAA,0BAAY,AAAZ,EAAa,KAAK;gBAC1B,SAAS,CAAA,GAAA,2BAAa,AAAb,EAAc,KAAK;YAC7B;QACH;QAEA,+BAA+B;QAC/B,MAAM,oBAAoB,CAAA,GAAA,8BAAY,AAAZ,EAAa,SAAS,CAAC;QACjD,MAAM,sBAAsB,CAAA,GAAA,4BAAc,AAAd,EAAe,SAAS,CAAC;QACrD,MAAM,oBAAoB,CAAA,GAAA,0BAAY,AAAZ,EAAa,SAAS,CAAC;QACjD,MAAM,qBAAqB,CAAA,GAAA,2BAAa,AAAb,EAAc,SAAS,CAAC;QAEnD,OAAO;YACL;YACA;YACA;YACA;QACF;IACF,GAAG,EAAE;IAEL,MAAM,qBAAqB;QACzB,eAAe;QACf,eAAe;IACjB;IAEA,OACE,CAAA,GAAA,eAAA,AAAA,EAAA,CAAA,GAAA,oBAAA,AAAA,GAAA;QAAA,UACG,eAAe,CAAA,GAAA,eAAA,AAAA,EAAC,CAAA,GAAA,8BAAc,AAAd,GAAc;YAAC,SAAS;QAAkB;IAAI;AAGrE;AAEA,2BAA2B;AAC3B,CAAA,GAAA,cAAM,AAAN,EAAO,CAAA,GAAA,eAAA,AAAA,EAAC,KAAG,CAAA,IAAK,SAAS,cAAc,CAAC,UAAU,SAAS,IAAI;AAE/D,sCAAsC;AACtC,MAAM,0BAA0B,SAAS,cAAc,CAAC;AACxD,IAAI,yBACF,CAAA,GAAA,cAAM,AAAN,EAAO,CAAA,GAAA,eAAA,AAAA,EAAC,CAAA,GAAA,8BAAc,AAAd,GAAc;IAAC,mBAAmB;AAAiB,IAAM;KAEjE,QAAQ,KAAK,CAAC;;;;;AE5HhB;AAAA,yCAAA;AAAA,6CAAA;AAAA,4CAAA;AAAA,+CAAA;AAAA,iDAAA;AAAA,0CAAA;AAAA;AAAA,IAAMA,IAAmB;AAGlB,SAASC,EAAeC,CAAAA;IAE9B,IAAmB,MAAfA,EAAIC,MAAAA,IAAAA,CAA+C,MAA/BH,EAAiBI,IAAAA,CAAKF,IAAgB,OAAOA;IAQrE,IANA,IAAIG,IAAO,GACVC,IAAI,GACJC,IAAM,IACNC,IAAK,IAGCF,IAAIJ,EAAIC,MAAAA,EAAQG,IAAK;QAC3B,OAAQJ,EAAIO,UAAAA,CAAWH;YACtB,KAAK;gBACJE,IAAK;gBACL;YACD,KAAO;gBACNA,IAAK;gBACL;YACD,KAAK;gBACJA,IAAK;gBACL;YACD;gBACC;QAAA;QAGEF,MAAMD,KAAME,CAAAA,KAAOL,EAAIQ,KAAAA,CAAML,GAAMC,EAAAA,GACvCC,KAAOC,GAEPH,IAAOC,IAAI;IACZ;IAEA,OADIA,MAAMD,KAAME,CAAAA,KAAOL,EAAIQ,KAAAA,CAAML,GAAMC,EAAAA,GAChCC;AACR;ACfa,IAAAI,IACZ,qECjBGC,IAAU,GAERC,IAAUC,MAAMD,OAAAA;AAsBtB,SAASE,EAAYC,CAAAA,EAAMC,CAAAA,EAAOC,CAAAA,EAAKC,CAAAA,EAAkBC,CAAAA,EAAUC,CAAAA;IAC7DJ,KAAOA,CAAAA,IAAQ,CAAA,CAAA;IAIpB,IACCK,GACAhB,GAFGiB,IAAkBN;IAItB,IAAI,SAASM,GAEZ,IAAKjB,KADLiB,IAAkB,CAAE,GACVN,EACA,SAALX,IACHgB,IAAML,CAAAA,CAAMX,EAAAA,GAEZiB,CAAAA,CAAgBjB,EAAAA,GAAKW,CAAAA,CAAMX,EAAAA;IAM9B,IAAMkB,IAAQ;QACbR,MAAAA;QACAC,OAAOM;QACPL,KAAAA;QACAI,KAAAA;QACAG,KAAW;QACXC,IAAS;QACTC,KAAQ;QACRC,KAAM;QACNC,KAAY;QACZC,aAAAA,KAAaC;QACbC,KAAAA,EAAapB;QACbqB,KAAAA;QACAC,KAAQ;QACRd,UAAAA;QACAC,QAAAA;IAAAA;IAKD,IAAoB,cAAA,OAATL,KAAwBM,CAAAA,IAAMN,EAAKmB,YAAAA,AAAAA,GAC7C,IAAK7B,KAAKgB,EAAAA,KACyB,MAAvBC,CAAAA,CAAgBjB,EAAAA,IAC1BiB,CAAAA,CAAAA,CAAgBjB,EAAAA,GAAKgB,CAAAA,CAAIhB,EAAAA,AAAAA;IAK5B,OADI8B,CAAAA,GAAAA,eAAAA,AAAAA,EAAQZ,KAAAA,IAAOY,CAAAA,GAAAA,eAAAA,AAAAA,EAAQZ,KAAAA,CAAMA,IAC1BA;AACR;AASA,SAASa,EAAYC,CAAAA;IACpB,IAAMd,IAAQT,EAAYwB,CAAAA,GAAAA,gBAAAA,AAAAA,GAAU;QAAEC,KAAKF;QAAWG,OAAK,EAAA,CAAA/B,KAAAA,CAAAgC,IAAAA,CAAAC,WAAAA;IAAAA;IAG3D,OADAnB,EAAMN,GAAAA,GAAMM,EAAKQ,GAAAA,EACVR;AACR;AAEA,IAAMoB,IAAY,CAAA,GACZC,IAAY;AAUlB,SAASC,EAAQC,CAAAA,EAAMC,CAAAA;IACtB,IAAIZ,CAAAA,GAAAA,eAAAA,AAAAA,EAAQa,IAAAA,EAAM;QACjB,IAAMC,IAASd,CAAAA,GAAAA,eAAAA,AAAAA,EAAQa,IAAAA,CAAKF,GAAMC;QAClC,IAAsB,YAAA,OAAXE,GAAqB,OAAOA;IACxC;IAEA,IAAa,UAATH,KAA2B,UAATA,GAAgB,OAAO;IAC7C,IAAa,YAATA,KAAqC,YAAA,OAAVC,GAAoB;QAClD,IAAI9C,IAAM;QACV,IAAK,IAAIiD,KAAQH,EAAO;YACvB,IAAII,IAAMJ,CAAAA,CAAMG,EAAAA;YAChB,IAAW,QAAPC,KAAuB,OAARA,GAAY;gBAC9B,IAAML,IACM,OAAXI,CAAAA,CAAK,EAAA,GACFA,IACAP,CAAAA,CAAUO,EAAAA,IACVP,CAAAA,CAAAA,CAAUO,EAAAA,GAAQA,EAAKE,OAAAA,CAAQR,GAAW,OAAOS,WAAAA,EAAAA,GAEjDC,IAAS;gBAEG,YAAA,OAARH,KAENL,EAAKS,UAAAA,CAAW,SAChB7C,EAAmBP,IAAAA,CAAK2C,MAEzBQ,CAAAA,IAAS,KAAA,GAEVrD,IAAMA,IAAM6C,IAAO,MAAMK,IAAMG;YAChC;QACD;QACA,OAAOR,IAAO,OAAO7C,IAAM;IAC5B;IAEA,OACU,QAAT8C,KAAAA,CACU,MAAVA,KACiB,cAAA,OAAVA,KACU,YAAA,OAAVA,IAEA,KAAA,CACa,MAAVA,IAAuBD,IAE3BA,IAAO,OAAO9C,EAAe+C,KAAS;AAC9C;AASA,SAASS,EAAUT,CAAAA;IAClB,IACU,QAATA,KACiB,aAAA,OAAVA,KACU,cAAA,OAAVA,GAEP,OACD;IAEA,IAAqB,YAAA,OAAVA,GAAoB;QAE9B,IAAA,KAA0BjB,MAAtBiB,EAAMlB,WAAAA,EAA2B,OAAOkB;QAE5C,IAAInC,EAAQmC,IAAQ;YACnB,IAAK,IAAI1C,IAAI,GAAGA,IAAI0C,EAAM7C,MAAAA,EAAQG,IACjC0C,CAAAA,CAAM1C,EAAAA,GAAKmD,EAAUT,CAAAA,CAAM1C,EAAAA;YAE5B,OAAO0C;QACR;IACD;IAEA,OAAO/C,EAAe,KAAK+C;AAC5B;;;;;ADlLO,+CAAA;AAAA,8CAAA;AAAA,kDAAA;AAAA,mDAAA;AAAA,mDAAA;AAAA,+CAAA;AAAA,uCAAA;AAAA,6CAAA;AAAA,oDAAA;AAAA,6CAAA;AAAA,4CAAA;AAAA,kDAAA;AAAA,IG0BMtC,GChBP0B,GCPFxB,GA2FS8C,GCmFTC,GAWAC,GAEEC,GA0BAC,GC1MAC,GAaFC,GAkJEC,GACAC,GC5KK5D,GReE6D,IAAgC,CAAG,GACnCC,IAAY,EAAA,EACZzD,IACZ,qEGnBYE,IAAUC,MAAMD,OAAAA;AAStB,SAASwD,EAAOC,CAAAA,EAAKrD,CAAAA;IAE3B,IAAK,IAAIX,KAAKW,EAAOqD,CAAAA,CAAIhE,EAAAA,GAAKW,CAAAA,CAAMX,EAAAA;IACpC,OAA6BgE;AAC9B;AAQgB,SAAAC,EAAWC,CAAAA;IACtBA,KAAQA,EAAKC,UAAAA,IAAYD,EAAKC,UAAAA,CAAWC,WAAAA,CAAYF;AAC1D;AEVgB,SAAAG,EAAc3D,CAAAA,EAAMC,CAAAA,EAAO2D,CAAAA;IAC1C,IACC1D,GACAI,GACAhB,GAHGiB,IAAkB,CAAA;IAItB,IAAKjB,KAAKW,EACA,SAALX,IAAYY,IAAMD,CAAAA,CAAMX,EAAAA,GACd,SAALA,IAAYgB,IAAML,CAAAA,CAAMX,EAAAA,GAC5BiB,CAAAA,CAAgBjB,EAAAA,GAAKW,CAAAA,CAAMX,EAAAA;IAUjC,IAPIqC,UAAUxC,MAAAA,GAAS,KACtBoB,CAAAA,EAAgBqD,QAAAA,GACfjC,UAAUxC,MAAAA,GAAS,IAAIO,EAAMgC,IAAAA,CAAKC,WAAW,KAAKiC,CAAAA,GAKjC,cAAA,OAAR5D,KLjBQ,QKiBcA,EAAKmB,YAAAA,EACrC,IAAK7B,KAAKU,EAAKmB,YAAAA,CLjBQJ,QKkBlBR,CAAAA,CAAgBjB,EAAAA,IACnBiB,CAAAA,CAAAA,CAAgBjB,EAAAA,GAAKU,EAAKmB,YAAAA,CAAa7B,EAAAA,AAAAA;IAK1C,OAAOS,EAAYC,GAAMO,GAAiBL,GAAKI,GLzB5B;AK0BpB;AAcgB,SAAAP,EAAYC,CAAAA,EAAMC,CAAAA,EAAOC,CAAAA,EAAKI,CAAAA,EAAKuD,CAAAA;IAIlD,IAAMrD,IAAQ;QACbR,MAAAA;QACAC,OAAAA;QACAC,KAAAA;QACAI,KAAAA;QACAG,KLjDkB;QKkDlBC,ILlDkB;QKmDlBC,KAAQ;QACRC,KLpDkB;QKqDlBC,KLrDkB;QKsDlBC,aAAAA,KLrDuBC;QKsDvBC,KLvDkB,QKuDP6C,IAAAA,EAAqBjE,IAAUiE;QAC1C5C,KAAAA;QACAC,KAAQ;IAAA;IAMT,OL/DmB,QK6Df2C,KL7De,QK6DKzC,EAAQZ,KAAAA,IAAeY,EAAQZ,KAAAA,CAAMA,IAEtDA;AACR;AAAA,SAEgBsD;IACf,OAAO;QAAEC,SLnEU;IAAA;AKoEpB;AAEgB,SAAAxC,EAAStB,CAAAA;IACxB,OAAOA,EAAM2D,QACd;AAAA;AC3EO,SAASI,EAAc/D,CAAAA,EAAOgE,CAAAA;IACpCC,IAAAA,CAAKjE,KAAAA,GAAQA,GACbiE,IAAAA,CAAKD,OAAAA,GAAUA;AAChB;AAAA,SA0EgBE,EAAc3D,CAAAA,EAAO4D,CAAAA;IACpC,IN3EmB,QM2EfA,GAEH,OAAO5D,EAAKE,EAAAA,GACTyD,EAAc3D,EAAKE,EAAAA,EAAUF,EAAKS,GAAAA,GAAU,KN9E7B;IMmFnB,IADA,IAAIoD,GACGD,IAAa5D,EAAKC,GAAAA,CAAWtB,MAAAA,EAAQiF,IAG3C,INtFkB,QMoFlBC,CAAAA,IAAU7D,EAAKC,GAAAA,CAAW2D,EAAAA,AAAAA,KNpFR,QMsFKC,EAAOzD,GAAAA,EAI7B,OAAOyD,EAAOzD,GAAAA;IAShB,OAA4B,cAAA,OAAdJ,EAAMR,IAAAA,GAAqBmE,EAAc3D,KNnGpC;AMoGpB;AA2CA,SAAS8D,EAAwB9D,CAAAA;IAAjC,IAGWlB,GACJiF;IAHN,INhJmB,QMgJd/D,CAAAA,IAAQA,EAAKE,EAAAA,AAAAA,KNhJC,QMgJoBF,EAAKK,GAAAA,EAAqB;QAEhE,IADAL,EAAKI,GAAAA,GAAQJ,EAAKK,GAAAA,CAAY2D,IAAAA,GNjJZ,MMkJTlF,IAAI,GAAGA,IAAIkB,EAAKC,GAAAA,CAAWtB,MAAAA,EAAQG,IAE3C,INpJiB,QMmJbiF,CAAAA,IAAQ/D,EAAKC,GAAAA,CAAWnB,EAAAA,AAAAA,KNnJX,QMoJIiF,EAAK3D,GAAAA,EAAe;YACxCJ,EAAKI,GAAAA,GAAQJ,EAAKK,GAAAA,CAAY2D,IAAAA,GAAOD,EAAK3D,GAAAA;YAC1C;QACD;QAGD,OAAO0D,EAAwB9D;IAChC;AACD;AA4BgB,SAAAiE,EAAcC,CAAAA;IAAAA,CAAAA,CAE1BA,EAACC,GAAAA,IACDD,CAAAA,EAACC,GAAAA,GAAAA,CAAU,CAAA,KACZhC,EAAciC,IAAAA,CAAKF,MAAAA,CAClBG,EAAOC,GAAAA,MACTlC,KAAgBxB,EAAQ2D,iBAAAA,AAAAA,KAAAA,AAAAA,CAAAA,AAExBnC,CAAAA,IAAexB,EAAQ2D,iBAAAA,AAAAA,KACNlC,CAAAA,EAAOgC;AAE1B;AASA,SAASA;IAMR,IALA,IAAIH,GAnGoBM,GAOjBC,GANHC,GACHC,GACAC,GACAC,GAgGAC,IAAI,GAIE3C,EAAcxD,MAAAA,EAOhBwD,EAAcxD,MAAAA,GAASmG,KAC1B3C,EAAc4C,IAAAA,CAAKzC,IAGpB4B,IAAI/B,EAAc6C,KAAAA,IAClBF,IAAI3C,EAAcxD,MAAAA,EAEduF,EAACC,GAAAA,IA/GCM,CAAAA,IAAAA,KAAAA,GALNE,IAAAA,AADGD,CAAAA,IAAAA,AADoBF,CAAAA,IAuHNN,CAAAA,EAtHM1D,GAAAA,AAAAA,EACNJ,GAAAA,EACjBwE,IAAc,EAAA,EACdC,IAAW,EAAA,EAERL,EAASS,GAAAA,IAAAA,CAAAA,AACNR,CAAAA,IAAW5B,EAAO,CAAA,GAAI6B,EAAAA,EACpBlE,GAAAA,GAAakE,EAAQlE,GAAAA,GAAa,GACtCI,EAAQZ,KAAAA,IAAOY,EAAQZ,KAAAA,CAAMyE,IAEjCS,EACCV,EAASS,GAAAA,EACTR,GACAC,GACAF,EAASW,GAAAA,EACTX,EAASS,GAAAA,CAAYG,YAAAA,ENzII,KM0IzBV,EAAQhE,GAAAA,GAAyB;QAACiE;KAAAA,GN3HjB,MM4HjBC,GN5HiB,QM6HjBD,IAAiBhB,EAAce,KAAYC,GAAAA,CAAAA,CN5IlB,CAAA,KM6ItBD,EAAQhE,GAAAA,AAAAA,GACXmE,IAGDJ,EAAQjE,GAAAA,GAAakE,EAAQlE,GAAAA,EAC7BiE,EAAQvE,EAAAA,CAAAD,GAAAA,CAAmBwE,EAAQhE,GAAAA,CAAAA,GAAWgE,GAC9CY,EAAWT,GAAaH,GAAUI,IAE9BJ,EAAQrE,GAAAA,IAASuE,KACpBb,EAAwBW,EAAAA,CAAAA;IA6F1BJ,EAAOC,GAAAA,GAAkB;AAC1B;AAAA,SG3MgBgB,EACfC,CAAAA,EACAC,CAAAA,EACAC,CAAAA,EACAC,CAAAA,EACAC,CAAAA,EACAC,CAAAA,EACAC,CAAAA,EACAjB,CAAAA,EACAD,CAAAA,EACAmB,CAAAA,EACAjB,CAAAA;IAAAA,IAEI/F,GAEH4F,GAEAqB,GAEAC,GAEAC,GAiCIvE,GA5BDwE,IAAeR,KAAkBA,EAAczF,GAAAA,IAAe2C,GAE9DuD,IAAoBX,EAAa7G,MAAAA;IAUrC,IARAgG,IAASyB,EACRX,GACAD,GACAU,GACAvB,GACAwB,IAGIrH,IAAI,GAAGA,IAAIqH,GAAmBrH,IThEhB,QSiElBiH,CAAAA,IAAaN,EAAcxF,GAAAA,CAAWnB,EAAAA,AAAAA,KAMrC4F,CAAAA,IAAAA,MADGqB,EAAUtF,GAAAA,GACFkC,IAEAuD,CAAAA,CAAYH,EAAUtF,GAAAA,CAAAA,IAAYkC,GAI9CoD,EAAUtF,GAAAA,GAAU3B,GAGhB4C,IAASwD,EACZK,GACAQ,GACArB,GACAiB,GACAC,GACAC,GACAjB,GACAD,GACAmB,GACAjB,IAIDmB,IAASD,EAAU3F,GAAAA,EACf2F,EAAWjG,GAAAA,IAAO4E,EAAS5E,GAAAA,IAAOiG,EAAWjG,GAAAA,IAC5C4E,CAAAA,EAAS5E,GAAAA,IACZuG,EAAS3B,EAAS5E,GAAAA,ETjGF,MSiGaiG,IAE9BlB,EAAST,IAAAA,CACR2B,EAAWjG,GAAAA,EACXiG,EAAU1F,GAAAA,IAAe2F,GACzBD,EAAAA,GTtGgB,QS0GdE,KT1Gc,QS0GWD,KAC5BC,CAAAA,IAAgBD,CAAAA,GTtHS,IS0HzBD,EAAUrF,GAAAA,IACVgE,EAAQzE,GAAAA,KAAe8F,EAAU9F,GAAAA,GAEjC0E,IAAS2B,EAAOP,GAAYpB,GAAQY,KACA,cAAA,OAAnBQ,EAAWvG,IAAAA,IAAAA,KTlHNe,MSkH4BmB,IAClDiD,IAASjD,IACCsE,KACVrB,CAAAA,IAASqB,EAAOO,WAAAA,AAAAA,GAIjBR,EAAUrF,GAAAA,IAAAA,EAAW;IAKtB,OAFA+E,EAAcrF,GAAAA,GAAQ6F,GAEftB;AACR;AAOA,SAASyB,EACRX,CAAAA,EACAD,CAAAA,EACAU,CAAAA,EACAvB,CAAAA,EACAwB,CAAAA;IALD,IAQKrH,GAEAiH,GAEArB,GA8DG8B,GAOAC,GAnEHC,IAAoBR,EAAYvH,MAAAA,EACnCgI,IAAuBD,GAEpBE,IAAO;IAGX,IADAnB,EAAcxF,GAAAA,GAAa,IAAIX,MAAM6G,IAChCrH,IAAI,GAAGA,IAAIqH,GAAmBrH,IT3JhB,QS8JlBiH,CAAAA,IAAaP,CAAAA,CAAa1G,EAAAA,AAAAA,KAIJ,aAAA,OAAdiH,KACc,cAAA,OAAdA,IA8CFS,CAAAA,IAAc1H,IAAI8H,GAAAA,AA/BvBb,CAAAA,IAAaN,EAAcxF,GAAAA,CAAWnB,EAAAA,GANjB,YAAA,OAAdiH,KACc,YAAA,OAAdA,KAEc,YAAA,OAAdA,KACPA,EAAWzF,WAAAA,IAAeuG,SAEiBtH,ETlL1B,MSoLhBwG,GTpLgB,MAAA,MAAA,QSyLP1G,EAAQ0G,KACyBxG,EAC1CwB,GACA;QAAEqC,UAAU2C;IAAAA,GT5LI,MAAA,MAAA,QACKxF,QSgMZwF,EAAWzF,WAAAA,IAA4ByF,EAAU5F,GAAAA,GAAU,IAK1BZ,EAC1CwG,EAAWvG,IAAAA,EACXuG,EAAWtG,KAAAA,EACXsG,EAAWrG,GAAAA,EACXqG,EAAWjG,GAAAA,GAAMiG,EAAWjG,GAAAA,GT1MZ,MS2MhBiG,EAAUvF,GAAAA,IAGgCuF,CAAAA,EAIlC7F,EAAAA,GAAWuF,GACrBM,EAAU5F,GAAAA,GAAUsF,EAActF,GAAAA,GAAU,GAY5CuE,IT/NkB,MAAA,MSwNZ+B,CAAAA,IAAiBV,EAAUtF,GAAAA,GAAUqG,EAC1Cf,GACAG,GACAM,GACAG,EAAAA,KAMAA,CAAAA,KAAAA,AADAjC,CAAAA,IAAWwB,CAAAA,CAAYO,EAAAA,AAAAA,KAGtB/B,CAAAA,EAAQhE,GAAAA,IT7OW,CAAA,CAAA,GASH,QS2OCgE,KT3OD,QS2OqBA,EAAQlE,GAAAA,GAAAA,CAAAA,MAG1CiG,KAeCN,CAAAA,IAAoBO,IACvBE,MACUT,IAAoBO,KAC9BE,GAAAA,GAK4B,cAAA,OAAnBb,EAAWvG,IAAAA,IACrBuG,CAAAA,EAAUrF,GAAAA,ITjRc,CAAA,CAAA,ISmRf+F,KAAiBD,KAiBvBC,CAAAA,KAAiBD,IAAc,IAClCI,MACUH,KAAiBD,IAAc,IACzCI,MAEIH,CAAAA,IAAgBD,IACnBI,MAEAA,KAMDb,EAAUrF,GAAAA,ITlTc,CAAA,CAAA,CAAA,ISgLzB+E,EAAcxF,GAAAA,CAAWnB,EAAAA,GTrKR;ISgTnB,IAAI6H,GACH,IAAK7H,IAAI,GAAGA,IAAI4H,GAAmB5H,ITjTjB,QSkTjB4F,CAAAA,IAAWwB,CAAAA,CAAYpH,EAAAA,AAAAA,KACgC,KT5TnC,CAAA,IS4TK4F,EAAQhE,GAAAA,AAAAA,KAC5BgE,CAAAA,EAAQtE,GAAAA,IAASuE,KACpBA,CAAAA,IAAShB,EAAce,EAAAA,GAGxBqC,EAAQrC,GAAUA,EAAAA;IAKrB,OAAOC;AACR;AAQA,SAAS2B,EAAOU,CAAAA,EAAarC,CAAAA,EAAQY,CAAAA;IAArC,IAIMnC,GACKtE;IAFV,IAA+B,cAAA,OAApBkI,EAAYxH,IAAAA,EAAoB;QAE1C,IADI4D,IAAW4D,EAAW/G,GAAAA,EACjBnB,IAAI,GAAGsE,KAAYtE,IAAIsE,EAASzE,MAAAA,EAAQG,IAC5CsE,CAAAA,CAAStE,EAAAA,IAKZsE,CAAAA,CAAAA,CAAStE,EAAAA,CAAEoB,EAAAA,GAAW8G,GACtBrC,IAAS2B,EAAOlD,CAAAA,CAAStE,EAAAA,EAAI6F,GAAQY,EAAAA;QAIvC,OAAOZ;IACR;IAAWqC,EAAW5G,GAAAA,IAASuE,KAC1BA,CAAAA,KAAUqC,EAAYxH,IAAAA,IAAAA,CAAS+F,EAAU0B,QAAAA,CAAStC,MACrDA,CAAAA,IAAShB,EAAcqD,EAAAA,GAExBzB,EAAU2B,YAAAA,CAAaF,EAAW5G,GAAAA,EAAOuE,KT3VvB,OS4VlBA,IAASqC,EAAW5G,GAAAA,AAAAA;IAGrB,GACCuE,IAASA,KAAUA,EAAO4B,WAAAA;WThWR,QSiWV5B,KAAqC,KAAnBA,EAAOwC,QAAAA,EAElC;IAAA,OAAOxC;AACR;AAAA,SAQgByC,EAAahE,CAAAA,EAAUrE,CAAAA;IAUtC,OATAA,IAAMA,KAAO,EAAA,ET7WM,QS8WfqE,KAAuC,aAAA,OAAZA,KACpB/D,CAAAA,EAAQ+D,KAClBA,EAASiE,IAAAA,CAAK,SAAAtD,CAAAA;QACbqD,EAAarD,GAAOhF;IACrB,KAEAA,EAAIqF,IAAAA,CAAKhB,EAAAA,GAEHrE;AACR;AASA,SAAS+H,EACRf,CAAAA,EACAG,CAAAA,EACAM,CAAAA,EACAG,CAAAA;IAJD,IAmCMW,GACAC,GA9BC7H,IAAMqG,EAAWrG,GAAAA,EACjBF,IAAOuG,EAAWvG,IAAAA,EACpBkF,IAAWwB,CAAAA,CAAYM,EAAAA;IAkB3B,IT1ZmB,SS2ZjB9B,KAAuC,QAAlBqB,EAAWrG,GAAAA,IAChCgF,KACAhF,KAAOgF,EAAShF,GAAAA,IAChBF,KAAQkF,EAASlF,IAAAA,IACc,KTxaX,CAAA,ISwanBkF,EAAQhE,GAAAA,AAAAA,GAEV,OAAO8F;IAAAA,IAVPG,ITvZkB,CAAA,QSwZjBjC,KAAmD,KTja/B,CAAA,ISiaCA,EAAQhE,GAAAA,AAAAA,IAA0B,IAAI,CAAA,GAa5D,IAFI4G,IAAId,IAAc,GAClBe,IAAIf,IAAc,GACfc,KAAK,KAAKC,IAAIrB,EAAYvH,MAAAA,EAAQ;QACxC,IAAI2I,KAAK,GAAG;YAEX,IAAA,AADA5C,CAAAA,IAAWwB,CAAAA,CAAYoB,EAAAA,AAAAA,KAGS,KTnbb,CAAA,ISmbjB5C,EAAQhE,GAAAA,AAAAA,KACThB,KAAOgF,EAAShF,GAAAA,IAChBF,KAAQkF,EAASlF,IAAAA,EAEjB,OAAO8H;YAERA;QACD;QAEA,IAAIC,IAAIrB,EAAYvH,MAAAA,EAAQ;YAE3B,IAAA,AADA+F,CAAAA,IAAWwB,CAAAA,CAAYqB,EAAAA,AAAAA,KAGS,KThcb,CAAA,ISgcjB7C,EAAQhE,GAAAA,AAAAA,KACThB,KAAOgF,EAAShF,GAAAA,IAChBF,KAAQkF,EAASlF,IAAAA,EAEjB,OAAO+H;YAERA;QACD;IACD;IAGD,OAAA;AACD;AFhdA,SAASC,EAASC,CAAAA,EAAO/H,CAAAA,EAAK8B,CAAAA;IACf,OAAV9B,CAAAA,CAAI,EAAA,GACP+H,EAAMC,WAAAA,CAAYhI,GPWA,QOXK8B,IAAgB,KAAKA,KAE5CiG,CAAAA,CAAM/H,EAAAA,GPSY,QOVR8B,IACG,KACa,YAAA,OAATA,KAAqBrC,EAAmBP,IAAAA,CAAKc,KACjD8B,IAEAA,IAAQ;AAEvB;AAyBgB,SAAAkG,EAAYC,CAAAA,EAAKpG,CAAAA,EAAMC,CAAAA,EAAOoG,CAAAA,EAAUhC,CAAAA;IACvD,IAAIiC;IAEJC,GAAG,IAAY,WAARvG;QACN,IAAoB,YAAA,OAATC,GACVmG,EAAIF,KAAAA,CAAMM,OAAAA,GAAUvG;aACd;YAKN,IAJuB,YAAA,OAAZoG,KACVD,CAAAA,EAAIF,KAAAA,CAAMM,OAAAA,GAAUH,IAAW,EAAA,GAG5BA,GACH,IAAKrG,KAAQqG,EACNpG,KAASD,KAAQC,KACtBgG,EAASG,EAAIF,KAAAA,EAAOlG,GAAM;YAK7B,IAAIC,GACH,IAAKD,KAAQC,EACPoG,KAAYpG,CAAAA,CAAMD,EAAAA,IAASqG,CAAAA,CAASrG,EAAAA,IACxCiG,EAASG,EAAIF,KAAAA,EAAOlG,GAAMC,CAAAA,CAAMD,EAAAA;QAIpC;WAGI,IAAe,OAAXA,CAAAA,CAAK,EAAA,IAAwB,OAAXA,CAAAA,CAAK,EAAA,EAC/BsG,IAAatG,KAASA,CAAAA,IAAOA,EAAKM,OAAAA,CAAQU,GAAe,KAAA,GAQxDhB,IAJAA,EAAKO,WAAAA,MAAiB6F,KACd,gBAARpG,KACQ,eAARA,IAEOA,EAAKO,WAAAA,GAAc5C,KAAAA,CAAM,KACrBqC,EAAKrC,KAAAA,CAAM,IAElByI,EAAG7C,CAAAA,IAAa6C,CAAAA,EAAG7C,CAAAA,GAAc,CAAA,CAAA,GACtC6C,EAAG7C,CAAAA,CAAYvD,IAAOsG,EAAAA,GAAcrG,GAEhCA,IACEoG,IAQJpG,EAAMwG,CAAAA,GAAYJ,EAASI,CAAAA,GAP3BxG,CAAAA,EAAMwG,CAAAA,GAAYxF,GAClBmF,EAAIM,gBAAAA,CACH1G,GACAsG,IAAanF,IAAoBD,GACjCoF,EAAAA,IAMFF,EAAIO,mBAAAA,CACH3G,GACAsG,IAAanF,IAAoBD,GACjCoF;SAGI;QACN,IPzF2B,gCOyFvBjC,GAIHrE,IAAOA,EAAKM,OAAAA,CAAQ,eAAe,KAAKA,OAAAA,CAAQ,UAAU;aACpD,IACE,WAARN,KACQ,YAARA,KACQ,UAARA,KACQ,UAARA,KACQ,UAARA,KAGQ,cAARA,KACQ,cAARA,KACQ,aAARA,KACQ,aAARA,KACQ,UAARA,KACQ,aAARA,KACAA,KAAQoG,GAER,IAAA;YACCA,CAAAA,CAAIpG,EAAAA,GP3GY,QO2GJC,IAAgB,KAAKA;YAEjC,MAAMsG;QAAAA,EACL,OAAOK,GAAAA,CAAAA;QAUU,cAAA,OAAT3G,KPxHO,CAAA,QO0HPA,KAAAA,CAA4B,MAAVA,KAA8B,OAAXD,CAAAA,CAAK,EAAA,GAGpDoG,EAAIS,eAAAA,CAAgB7G,KAFpBoG,EAAIU,YAAAA,CAAa9G,GAAc,aAARA,KAA8B,KAATC,IAAgB,KAAKA,EAAAA;IAInE;AACD;AAOA,SAAS8G,EAAiBT,CAAAA;IAMzB,OAAA,SAAiBM,CAAAA;QAChB,IAAIzE,IAAAA,CAAIoB,CAAAA,EAAa;YACpB,IAAMyD,IAAe7E,IAAAA,CAAIoB,CAAAA,CAAYqD,EAAE3I,IAAAA,GAAOqI,EAAAA;YAC9C,IPhJiB,QOgJbM,EAAEK,CAAAA,EACLL,EAAEK,CAAAA,GAAchG;iBAKV,IAAI2F,EAAEK,CAAAA,GAAcD,EAAaP,CAAAA,EACvC;YAED,OAAOO,EAAa3H,EAAQ6H,KAAAA,GAAQ7H,EAAQ6H,KAAAA,CAAMN,KAAKA;QACxD;IACD;AACD;AAAA,SG5HgBjD,EACfK,CAAAA,EACAd,CAAAA,EACAC,CAAAA,EACAiB,CAAAA,EACAC,CAAAA,EACAC,CAAAA,EACAjB,CAAAA,EACAD,CAAAA,EACAmB,CAAAA,EACAjB,CAAAA;IAAAA,IAGI6D,GAkBExE,GAAGyE,GAAOC,GAAUC,GAAUC,GAAUC,GACxCC,GACEC,GAMFC,GACAC,GAyGOrK,GA4BPsK,GACHC,GASSvK,GA6BN0G,GAgDO1G,GAtPZwK,IAAU7E,EAASjF,IAAAA;IAIpB,IVjDwBe,QUiDpBkE,EAASnE,WAAAA,EAA0B,OVlDpB;IAbU,MUkEzBoE,EAAQhE,GAAAA,IACXoF,CAAAA,IAAAA,CAAAA,CVrE0B,CAAA,KUqETpB,EAAQhE,GAAAA,AAAAA,GAEzBmF,IAAoB;QADpBlB,IAASF,EAAQrE,GAAAA,GAAQsE,EAAQtE,GAAAA;KAAAA,AAAAA,GAAAA,AAI7BsI,CAAAA,IAAM9H,EAAOT,GAAAA,AAAAA,KAASuI,EAAIjE;IAE/B8E,GAAO,IAAsB,cAAA,OAAXD,GACjB,IAAA;QAkEC,IAhEIN,IAAWvE,EAAShF,KAAAA,EAClBwJ,IACL,eAAeK,KAAWA,EAAQE,SAAAA,CAAUC,MAAAA,EAKzCP,IAAAA,AADJR,CAAAA,IAAMY,EAAQI,WAAAA,AAAAA,KACQ/D,CAAAA,CAAc+C,EAAGrI,GAAAA,CAAAA,EACnC8I,IAAmBT,IACpBQ,IACCA,EAASzJ,KAAAA,CAAM+B,KAAAA,GACfkH,EAAGxI,EAAAA,GACJyF,GAGCjB,EAAQrE,GAAAA,GAEX0I,IAAAA,AADA7E,CAAAA,IAAIO,EAAQpE,GAAAA,GAAcqE,EAAQrE,GAAAA,AAAAA,EACNH,EAAAA,GAAwBgE,EAACyF,GAAAA,GAGjDV,CAAAA,IAEHxE,EAAQpE,GAAAA,GAAc6D,IAAI,IAAIoF,EAAQN,GAAUG,KAGhD1E,CAAAA,EAAQpE,GAAAA,GAAc6D,IAAI,IAAIV,EAC7BwF,GACAG,IAEDjF,EAAE5D,WAAAA,GAAcgJ,GAChBpF,EAAEuF,MAAAA,GAASG,CAAAA,GAERV,KAAUA,EAASW,GAAAA,CAAI3F,IAE3BA,EAAEzE,KAAAA,GAAQuJ,GACL9E,EAAE4F,KAAAA,IAAO5F,CAAAA,EAAE4F,KAAAA,GAAQ,CAAA,CAAA,GACxB5F,EAAET,OAAAA,GAAU0F,GACZjF,EAACiB,GAAAA,GAAkBQ,GACnBgD,IAAQzE,EAACC,GAAAA,GAAAA,CAAU,GACnBD,EAAC6F,GAAAA,GAAoB,EAAA,EACrB7F,EAAC8F,GAAAA,GAAmB,EAAA,AAAA,GAIjBf,KV5Ga,QU4GO/E,EAAC+F,GAAAA,IACxB/F,CAAAA,EAAC+F,GAAAA,GAAc/F,EAAE4F,KAAAA,AAAAA,GAGdb,KVhHa,QUgHOK,EAAQY,wBAAAA,IAC3BhG,CAAAA,EAAC+F,GAAAA,IAAe/F,EAAE4F,KAAAA,IACrB5F,CAAAA,EAAC+F,GAAAA,GAAcpH,EAAO,CAAA,GAAIqB,EAAC+F,GAAAA,CAAAA,GAG5BpH,EACCqB,EAAC+F,GAAAA,EACDX,EAAQY,wBAAAA,CAAyBlB,GAAU9E,EAAC+F,GAAAA,EAAAA,GAI9CrB,IAAW1E,EAAEzE,KAAAA,EACboJ,IAAW3E,EAAE4F,KAAAA,EACb5F,EAAC1D,GAAAA,GAAUiE,GAGPkE,GAEFM,KVlIe,QUmIfK,EAAQY,wBAAAA,IVnIO,QUoIfhG,EAAEiG,kBAAAA,IAEFjG,EAAEiG,kBAAAA,IAGClB,KVzIY,QUyIQ/E,EAAEkG,iBAAAA,IACzBlG,EAAC6F,GAAAA,CAAkB3F,IAAAA,CAAKF,EAAEkG,iBAAAA;aAErB;YAUN,IARCnB,KV9Ie,QU+IfK,EAAQY,wBAAAA,IACRlB,MAAaJ,KVhJE,QUiJf1E,EAAEmG,yBAAAA,IAEFnG,EAAEmG,yBAAAA,CAA0BrB,GAAUG,IAAAA,CAIpCjF,EAAC9D,GAAAA,IVvJY,QUwJd8D,EAAEoG,qBAAAA,IAAAA,CAKI,MAJNpG,EAAEoG,qBAAAA,CACDtB,GACA9E,EAAC+F,GAAAA,EACDd,MAEF1E,EAAQjE,GAAAA,IAAckE,EAAQlE,GAAAA,EAC7B;gBAkBD,IAhBIiE,EAAQjE,GAAAA,IAAckE,EAAQlE,GAAAA,IAKjC0D,CAAAA,EAAEzE,KAAAA,GAAQuJ,GACV9E,EAAE4F,KAAAA,GAAQ5F,EAAC+F,GAAAA,EACX/F,EAACC,GAAAA,GAAAA,CAAU,CAAA,GAGZM,EAAQrE,GAAAA,GAAQsE,EAAQtE,GAAAA,EACxBqE,EAAQxE,GAAAA,GAAayE,EAAQzE,GAAAA,EAC7BwE,EAAQxE,GAAAA,CAAWoH,IAAAA,CAAK,SAAArH,CAAAA;oBACnBA,KAAOA,CAAAA,EAAKE,EAAAA,GAAWuE,CAAAA;gBAC5B,IAES3F,IAAI,GAAGA,IAAIoF,EAAC8F,GAAAA,CAAiBrL,MAAAA,EAAQG,IAC7CoF,EAAC6F,GAAAA,CAAkB3F,IAAAA,CAAKF,EAAC8F,GAAAA,CAAiBlL,EAAAA;gBAE3CoF,EAAC8F,GAAAA,GAAmB,EAAA,EAEhB9F,EAAC6F,GAAAA,CAAkBpL,MAAAA,IACtBiG,EAAYR,IAAAA,CAAKF;gBAGlB,MAAMqF;YACP;YV3LgB,QU6LZrF,EAAEqG,mBAAAA,IACLrG,EAAEqG,mBAAAA,CAAoBvB,GAAU9E,EAAC+F,GAAAA,EAAad,IAG3CF,KVjMY,QUiMQ/E,EAAEsG,kBAAAA,IACzBtG,EAAC6F,GAAAA,CAAkB3F,IAAAA,CAAK;gBACvBF,EAAEsG,kBAAAA,CAAmB5B,GAAUC,GAAUC;YAC1C;QAEF;QASA,IAPA5E,EAAET,OAAAA,GAAU0F,GACZjF,EAAEzE,KAAAA,GAAQuJ,GACV9E,EAACe,GAAAA,GAAcM,GACfrB,EAAC9D,GAAAA,GAAAA,CAAU,GAEPgJ,IAAaxI,EAAO0D,GAAAA,EACvB+E,IAAQ,GACLJ,GAAkB;YAQrB,IAPA/E,EAAE4F,KAAAA,GAAQ5F,EAAC+F,GAAAA,EACX/F,EAACC,GAAAA,GAAAA,CAAU,GAEPiF,KAAYA,EAAW3E,IAE3BiE,IAAMxE,EAAEuF,MAAAA,CAAOvF,EAAEzE,KAAAA,EAAOyE,EAAE4F,KAAAA,EAAO5F,EAAET,OAAAA,GAE1B3E,IAAI,GAAGA,IAAIoF,EAAC8F,GAAAA,CAAiBrL,MAAAA,EAAQG,IAC7CoF,EAAC6F,GAAAA,CAAkB3F,IAAAA,CAAKF,EAAC8F,GAAAA,CAAiBlL,EAAAA;YAE3CoF,EAAC8F,GAAAA,GAAmB,EACrB;QAAA,OACC,GACC9F,EAACC,GAAAA,GAAAA,CAAU,GACPiF,KAAYA,EAAW3E,IAE3BiE,IAAMxE,EAAEuF,MAAAA,CAAOvF,EAAEzE,KAAAA,EAAOyE,EAAE4F,KAAAA,EAAO5F,EAAET,OAAAA,GAGnCS,EAAE4F,KAAAA,GAAQ5F,EAAC+F,GAAAA;eACH/F,EAACC,GAAAA,IAAAA,EAAakF,IAAQ,IAIhCnF;QAAAA,EAAE4F,KAAAA,GAAQ5F,EAAC+F,GAAAA,EVxOM,QU0Ob/F,EAAEuG,eAAAA,IACL9E,CAAAA,IAAgB9C,EAAOA,EAAO,CAAE,GAAE8C,IAAgBzB,EAAEuG,eAAAA,GAAAA,GAGjDxB,KAAAA,CAAqBN,KV9OR,QU8OiBzE,EAAEwG,uBAAAA,IACnC5B,CAAAA,IAAW5E,EAAEwG,uBAAAA,CAAwB9B,GAAUC,EAAAA,GAK5CrD,IAAekD,GVpPF,QUmPhBA,KAAeA,EAAIlJ,IAAAA,KAASuB,KVnPZ,QUmPwB2H,EAAIhJ,GAAAA,IAI5C8F,CAAAA,IAAemF,EAAUjC,EAAIjJ,KAAAA,CAAM2D,QAAAA,CAAAA,GAGpCuB,IAASW,EACRC,GACAlG,EAAQmG,KAAgBA,IAAe;YAACA;SAAAA,EACxCf,GACAC,GACAiB,GACAC,GACAC,GACAjB,GACAD,GACAmB,GACAjB,IAGDX,EAAEF,IAAAA,GAAOS,EAAQrE,GAAAA,EAGjBqE,EAAQ/D,GAAAA,IAAAA,MAEJwD,EAAC6F,GAAAA,CAAkBpL,MAAAA,IACtBiG,EAAYR,IAAAA,CAAKF,IAGd6E,KACH7E,CAAAA,EAACyF,GAAAA,GAAiBzF,EAAChE,EAAAA,GVlRH,IAAA;IU6SlB,EAzBE,OAAOiI,GAAAA;QAGR,IAFA1D,EAAQjE,GAAAA,GVrRS,MUuRbsF,KVvRa,QUuRED;YAClB,IAAIsC,EAAEyC,IAAAA,EAAM;gBAKX,IAJAnG,EAAQ/D,GAAAA,IAAWoF,IAChB+E,MVvSsB,KU0SlBlG,KAA6B,KAAnBA,EAAOwC,QAAAA,IAAiBxC,EAAO4B,WAAAA,EAC/C5B,IAASA,EAAO4B,WAAAA;gBAGjBV,CAAAA,CAAkBA,EAAkBiF,OAAAA,CAAQnG,GAAAA,GVjS7B,MUkSfF,EAAQrE,GAAAA,GAAQuE;YACjB,OACC,IAAS7F,IAAI+G,EAAkBlH,MAAAA,EAAQG,KACtCiE,EAAW8C,CAAAA,CAAkB/G,EAAAA;eAI/B2F,EAAQrE,GAAAA,GAAQsE,EAAQtE,GAAAA,EACxBqE,EAAQxE,GAAAA,GAAayE,EAAQzE,GAAAA;QAE9BW,EAAOR,GAAAA,CAAa+H,GAAG1D,GAAUC;IAClC;SV7SkB,QU+SlBmB,KACApB,EAAQjE,GAAAA,IAAckE,EAAQlE,GAAAA,GAE9BiE,CAAAA,EAAQxE,GAAAA,GAAayE,EAAQzE,GAAAA,EAC7BwE,EAAQrE,GAAAA,GAAQsE,EAAQtE,GAAAA,AAAAA,IAExBuE,IAASF,EAAQrE,GAAAA,GAAQ2K,EACxBrG,EAAQtE,GAAAA,EACRqE,GACAC,GACAiB,GACAC,GACAC,GACAjB,GACAkB,GACAjB;IAMF,OAAA,AAFK6D,CAAAA,IAAM9H,EAAQoK,MAAAA,AAAAA,KAAStC,EAAIjE,IV/UH,MUiVtBA,EAAQ/D,GAAAA,GAAAA,KAA2BH,IAAYoE;AACvD;AAAA,SAOgBU,EAAWT,CAAAA,EAAaqG,CAAAA,EAAMpG,CAAAA;IAC7C,IAAK,IAAI/F,IAAI,GAAGA,IAAI+F,EAASlG,MAAAA,EAAQG,IACpCuH,EAASxB,CAAAA,CAAS/F,EAAAA,EAAI+F,CAAAA,CAAAA,EAAW/F,EAAAA,EAAI+F,CAAAA,CAAAA,EAAW/F,EAAAA;IAG7C8B,EAAOP,GAAAA,IAAUO,EAAOP,GAAAA,CAAS4K,GAAMrG,IAE3CA,EAAYyC,IAAAA,CAAK,SAAAnD,CAAAA;QAChB,IAAA;YAECU,IAAcV,EAAC6F,GAAAA,EACf7F,EAAC6F,GAAAA,GAAoB,EAAA,EACrBnF,EAAYyC,IAAAA,CAAK,SAAA6D,CAAAA;gBAEhBA,EAAGhK,IAAAA,CAAKgD;YACT;QAGD,EAFE,OAAOiE,GAAAA;YACRvH,EAAOR,GAAAA,CAAa+H,GAAGjE,EAAC1D,GAAAA;QACzB;IACD;AACD;AAEA,SAASmK,EAAU3H,CAAAA;IAClB,OACgB,YAAA,OAARA,KVpWW,QUqWlBA,KACCA,EAAI7C,GAAAA,IAAW6C,EAAI7C,GAAAA,GAAU,IAEvB6C,IAGJ3D,EAAQ2D,KACJA,EAAKmI,GAAAA,CAAIR,KAGV9H,EAAO,CAAE,GAAEG;AACnB;AAiBA,SAAS+H,EACRpD,CAAAA,EACAlD,CAAAA,EACAC,CAAAA,EACAiB,CAAAA,EACAC,CAAAA,EACAC,CAAAA,EACAjB,CAAAA,EACAkB,CAAAA,EACAjB,CAAAA;IATD,IAeK/F,GAEAsM,GAEAC,GAEAC,GACA9J,GACA+J,GACAC,GAbA5C,IAAWlE,EAASjF,KAAAA,EACpBuJ,IAAWvE,EAAShF,KAAAA,EACpB0H,IAAkC1C,EAASjF,IAAAA;IAkB/C,IAJgB,SAAZ2H,IAAmBvB,IVhaK,+BUiaP,UAAZuB,IAAoBvB,IV/ZA,uCUganBA,KAAWA,CAAAA,IVjaS,8BAAA,GAGX,QUgafC,GACH;QAAA,IAAK/G,IAAI,GAAGA,IAAI+G,EAAkBlH,MAAAA,EAAQG,IAMzC,IAAA,AALA0C,CAAAA,IAAQqE,CAAAA,CAAkB/G,EAAAA,AAAAA,KAOzB,kBAAkB0C,KAAAA,CAAAA,CAAW2F,KAC5BA,CAAAA,IAAW3F,EAAMiK,SAAAA,IAAatE,IAA6B,KAAlB3F,EAAM2F,QAAAA,AAAAA,GAC/C;YACDQ,IAAMnG,GACNqE,CAAAA,CAAkB/G,EAAAA,GV7aF;YU8ahB;QACD;IAAA;IAIF,IVnbmB,QUmbf6I,GAAa;QAChB,IVpbkB,QUobdR,GACH,OAAOuE,SAASC,cAAAA,CAAe3C;QAGhCrB,IAAM+D,SAASE,eAAAA,CACdhG,GACAuB,GACA6B,EAAS6C,EAAAA,IAAM7C,IAKZlD,KACClF,CAAAA,EAAOkL,GAAAA,IACVlL,EAAOkL,GAAAA,CAAoBrH,GAAUoB,IACtCC,IAAAA,CAAc,CAAA,GAGfD,IVtckB;IUucnB;IAEA,IVzcmB,QUycfsB,GAECyB,MAAaI,KAAclD,KAAe6B,EAAIoE,IAAAA,IAAQ/C,KACzDrB,CAAAA,EAAIoE,IAAAA,GAAO/C,CAAAA;SAEN;QASN,IAPAnD,IAAoBA,KAAqB3G,EAAMgC,IAAAA,CAAKyG,EAAIqE,UAAAA,GAExDpD,IAAWlE,EAASjF,KAAAA,IAASkD,GAAAA,CAKxBmD,KVvda,QUudED,GAEnB,IADA+C,IAAW,CAAA,GACN9J,IAAI,GAAGA,IAAI6I,EAAIsE,UAAAA,CAAWtN,MAAAA,EAAQG,IAEtC8J,CAAAA,CAAAA,AADApH,CAAAA,IAAQmG,EAAIsE,UAAAA,CAAWnN,EAAAA,AAAAA,EACRyC,IAAAA,CAAAA,GAAQC,EAAMA,KAAAA;QAI/B,IAAK1C,KAAK8J,EAET,IADApH,IAAQoH,CAAAA,CAAS9J,EAAAA,EACR,cAALA;aACOA,IAAK,6BAALA,GACVuM,IAAU7J;aACJ,IAAA,CAAM1C,CAAAA,KAAKkK,CAAAA,GAAW;YAC5B,IACO,WAALlK,KAAgB,kBAAkBkK,KAC7B,aAALlK,KAAkB,oBAAoBkK,GAEvC;YAEDtB,EAAYC,GAAK7I,GV3eD,MU2eU0C,GAAOoE;QAClC;QAKD,IAAK9G,KAAKkK,EACTxH,IAAQwH,CAAAA,CAASlK,EAAAA,EACR,cAALA,IACHwM,IAAc9J,IACC,6BAAL1C,IACVsM,IAAU5J,IACK,WAAL1C,IACVyM,IAAa/J,IACE,aAAL1C,IACV0M,IAAUhK,IAERsE,KAA+B,cAAA,OAATtE,KACxBoH,CAAAA,CAAS9J,EAAAA,KAAO0C,KAEhBkG,EAAYC,GAAK7I,GAAG0C,GAAOoH,CAAAA,CAAS9J,EAAAA,EAAI8G;QAK1C,IAAIwF,GAGDtF,KACCuF,KACAD,CAAAA,EAAOc,MAAAA,IAAWb,EAAOa,MAAAA,IAAWd,EAAOc,MAAAA,IAAWvE,EAAIwE,SAAAA,AAAAA,KAE5DxE,CAAAA,EAAIwE,SAAAA,GAAYf,EAAOc,MAAAA,AAAAA,GAGxBzH,EAAQxE,GAAAA,GAAa,EAAA;aAsBrB,IApBIoL,KAAS1D,CAAAA,EAAIwE,SAAAA,GAAY,EAAA,GAE7B7G,EAEkB,cAAjBb,EAASjF,IAAAA,GAAqBmI,EAAIyE,OAAAA,GAAUzE,GAC5CtI,EAAQiM,KAAeA,IAAc;YAACA;SAAAA,EACtC7G,GACAC,GACAiB,GACY,mBAAZwB,IV5hB2B,iCU4hBqBvB,GAChDC,GACAjB,GACAiB,IACGA,CAAAA,CAAkB,EAAA,GAClBnB,EAAQzE,GAAAA,IAAc0D,EAAce,GAAU,IACjDoB,GACAjB,IVhiBgB,QUoiBbgB,GACH,IAAK/G,IAAI+G,EAAkBlH,MAAAA,EAAQG,KAClCiE,EAAW8C,CAAAA,CAAkB/G,EAAAA;QAM3BgH,KACJhH,CAAAA,IAAI,SACY,cAAZqI,KV9iBa,QU8iBaoE,IAC7B5D,EAAIS,eAAAA,CAAgB,WV9iBC7H,QUgjBrBgL,KAKCA,CAAAA,MAAe5D,CAAAA,CAAI7I,EAAAA,IACN,cAAZqI,KAAAA,CAA2BoE,KAIf,YAAZpE,KAAwBoE,KAAc3C,CAAAA,CAAS9J,EAAAA,AAAAA,KAEjD4I,EAAYC,GAAK7I,GAAGyM,GAAY3C,CAAAA,CAAS9J,EAAAA,EAAI8G,IAG9C9G,IAAI,WV/jBkByB,QUgkBlBiL,KAAwBA,KAAW7D,CAAAA,CAAI7I,EAAAA,IAC1C4I,EAAYC,GAAK7I,GAAG0M,GAAS5C,CAAAA,CAAS9J,EAAAA,EAAI8G,EAAAA;IAG7C;IAEA,OAAO+B;AACR;AAQgB,SAAAtB,EAASvG,CAAAA,EAAK0B,CAAAA,EAAOxB,CAAAA;IACpC,IAAA;QACC,IAAkB,cAAA,OAAPF,GAAmB;YAC7B,IAAIuM,IAAuC,cAAA,OAAhBvM,EAAGY,GAAAA;YAC1B2L,KAEHvM,EAAGY,GAAAA,IAGC2L,KVzlBY,QUylBK7K,KAIrB1B,CAAAA,EAAGY,GAAAA,GAAYZ,EAAI0B,EAAAA;QAErB,OAAO1B,EAAIyD,OAAAA,GAAU/B;IAGtB,EAFE,OAAO2G,GAAAA;QACRvH,EAAOR,GAAAA,CAAa+H,GAAGnI;IACxB;AACD;AASgB,SAAA+G,EAAQ/G,CAAAA,EAAOgH,CAAAA,EAAasF,CAAAA;IAA5B,IACXC,GAsBMzN;IAbV,IARI8B,EAAQmG,OAAAA,IAASnG,EAAQmG,OAAAA,CAAQ/G,IAAAA,AAEhCuM,CAAAA,IAAIvM,EAAMF,GAAAA,AAAAA,KACTyM,CAAAA,EAAEhJ,OAAAA,IAAWgJ,EAAEhJ,OAAAA,IAAWvD,EAAKI,GAAAA,IACnCiG,EAASkG,GVlnBQ,MUknBCvF,EAAAA,GVlnBD,QUsnBduF,CAAAA,IAAIvM,EAAKK,GAAAA,AAAAA,GAAsB;QACnC,IAAIkM,EAAEC,oBAAAA,EACL,IAAA;YACCD,EAAEC,oBAAAA;QAGH,EAFE,OAAOrE,GAAAA;YACRvH,EAAOR,GAAAA,CAAa+H,GAAGnB;QACxB;QAGDuF,EAAEvI,IAAAA,GAAOuI,EAACtH,GAAAA,GV/nBQ;IUgoBnB;IAEA,IAAKsH,IAAIvM,EAAKC,GAAAA,EACb,IAASnB,IAAI,GAAGA,IAAIyN,EAAE5N,MAAAA,EAAQG,IACzByN,CAAAA,CAAEzN,EAAAA,IACLiI,EACCwF,CAAAA,CAAEzN,EAAAA,EACFkI,GACAsF,KAAmC,cAAA,OAAdtM,EAAMR,IAAAA;IAM1B8M,KACJvJ,EAAW/C,EAAKI,GAAAA,GAGjBJ,EAAKK,GAAAA,GAAcL,EAAKE,EAAAA,GAAWF,EAAKI,GAAAA,GAAAA,KVjpBhBG;AUkpBzB;AAGA,SAASqJ,EAASnK,CAAAA,EAAOqK,CAAAA,EAAOrG,CAAAA;IAC/B,OAAA,IAAA,CAAYnD,WAAAA,CAAYb,GAAOgE;AAChC;AC3pBO,SAASgG,EAAOzJ,CAAAA,EAAOuF,CAAAA,EAAWkH,CAAAA;IAAlC,IAWF3G,GAOApB,GAQAE,GACHC;IAzBGU,KAAamG,YAChBnG,CAAAA,IAAYmG,SAASgB,eAAAA,AAAAA,GAGlB9L,EAAOV,EAAAA,IAAQU,EAAOV,EAAAA,CAAOF,GAAOuF,IAYpCb,IAAAA,AAPAoB,CAAAA,IAAoC,cAAA,OAAf2G,CAAAA,IXRN,OWiBfA,KAAeA,EAAWxM,GAAAA,IAAesF,EAAStF,GAAAA,EAMlD2E,IAAc,EAAA,EACjBC,IAAW,EAAA,EACZK,EACCK,GAPDvF,IAAAA,AAAAA,CAAAA,CAAW8F,KAAe2G,KAAgBlH,CAAAA,EAAStF,GAAAA,GAClDkD,EAAcpC,GXpBI,MWoBY;QAACf;KAAAA,GAU/B0E,KAAY/B,GACZA,GACA4C,EAAUH,YAAAA,EAAAA,CACTU,KAAe2G,IACb;QAACA;KAAAA,GACD/H,IXnCe,OWqCda,EAAUoH,UAAAA,GACTzN,EAAMgC,IAAAA,CAAKqE,EAAUyG,UAAAA,IXtCR,MWwClBpH,GAAAA,CACCkB,KAAe2G,IACbA,IACA/H,IACCA,EAAQtE,GAAAA,GACRmF,EAAUoH,UAAAA,EACd7G,GACAjB,IAIDQ,EAAWT,GAAa5E,GAAO6E;AAChC;AAOO,SAAS+H,EAAQ5M,CAAAA,EAAOuF,CAAAA;IAC9BkE,EAAOzJ,GAAOuF,GAAWqH;AAC1B;AAAA,SChEgBC,EAAa7M,CAAAA,EAAOP,CAAAA,EAAO2D,CAAAA;IAAAA,IAEzC1D,GACAI,GACAhB,GAEG6B,GALAZ,IAAkB8C,EAAO,CAAE,GAAE7C,EAAMP,KAAAA;IAWvC,IAAKX,KAJDkB,EAAMR,IAAAA,IAAQQ,EAAMR,IAAAA,CAAKmB,YAAAA,IAC5BA,CAAAA,IAAeX,EAAMR,IAAAA,CAAKmB,YAAAA,AAAAA,GAGjBlB,EACA,SAALX,IAAYY,IAAMD,CAAAA,CAAMX,EAAAA,GACd,SAALA,IAAYgB,IAAML,CAAAA,CAAMX,EAAAA,GAEhCiB,CAAAA,CAAgBjB,EAAAA,GZZMyB,QYWdd,CAAAA,CAAMX,EAAAA,IZXQyB,QYWWI,IACZA,CAAAA,CAAa7B,EAAAA,GAEbW,CAAAA,CAAMX,EAAAA;IAS7B,OALIqC,UAAUxC,MAAAA,GAAS,KACtBoB,CAAAA,EAAgBqD,QAAAA,GACfjC,UAAUxC,MAAAA,GAAS,IAAIO,EAAMgC,IAAAA,CAAKC,WAAW,KAAKiC,CAAAA,GAG7C7D,EACNS,EAAMR,IAAAA,EACNO,GACAL,KAAOM,EAAMN,GAAAA,EACbI,KAAOE,EAAMF,GAAAA,EZ5BK;AY+BpB;AJ1CgB,SAAAgN,EAAcC,CAAAA;IAC7B,SAASC,EAAQvN,CAAAA;QAAjB,IAGMwN,GACAC;QA+BL,OAlCKxJ,IAAAA,CAAK+G,eAAAA,IAELwC,CAAAA,IAAO,IAAIE,KAAAA,AACXD,CAAAA,IAAM,CAAE,CAAA,CAAA,CACRF,EAAO3M,GAAAA,CAAAA,GAAQqD,IAAAA,EAEnBA,IAAAA,CAAK+G,eAAAA,GAAkB;YAAM,OAAAyC;QAAG,GAEhCxJ,IAAAA,CAAK8I,oBAAAA,GAAuB;YAC3BS,IRAgB;QQCjB,GAEAvJ,IAAAA,CAAK4G,qBAAAA,GAAwB,SAAU8C,CAAAA;YAElC1J,IAAAA,CAAKjE,KAAAA,CAAM+B,KAAAA,IAAS4L,EAAO5L,KAAAA,IAC9ByL,EAAKI,OAAAA,CAAQ,SAAAnJ,CAAAA;gBACZA,EAAC9D,GAAAA,GAAAA,CAAU,GACX6D,EAAcC;YACf;QAEF,GAEAR,IAAAA,CAAKmG,GAAAA,GAAM,SAAA3F,CAAAA;YACV+I,EAAKK,GAAAA,CAAIpJ;YACT,IAAIqJ,IAAMrJ,EAAEsI,oBAAAA;YACZtI,EAAEsI,oBAAAA,GAAuB;gBACpBS,KACHA,EAAKO,MAAAA,CAAOtJ,IAETqJ,KAAKA,EAAIrM,IAAAA,CAAKgD;YACnB;QACD,CAAA,GAGMzE,EAAM2D,QACd;IAAA;IAgBA,OAdA4J,EAAO3M,GAAAA,GAAO,SAASvB,KACvBkO,EAAO9M,EAAAA,GAAiB6M,GAQxBC,EAAQS,QAAAA,GACPT,EAAOU,GAAAA,GAAAA,AANRV,CAAAA,EAAQW,QAAAA,GAAW,SAAClO,CAAAA,EAAOmO,CAAAA;QAC1B,OAAOnO,EAAM2D,QAAAA,CAASwK;IACvB,CAAA,EAKkBlE,WAAAA,GAChBsD,GAEKA;AACR;ALhCa9N,IAAQ0D,EAAU1D,KAAAA,EChBzB0B,IAAU;IACfR,KSDM,SAAqByN,CAAAA,EAAO7N,CAAAA,EAAO0E,CAAAA,EAAUoJ,CAAAA;QAQnD,IANA,IAAItJ,GAEHuJ,GAEAC,GAEOhO,IAAQA,EAAKE,EAAAA,EACpB,IAAA,AAAKsE,CAAAA,IAAYxE,EAAKK,GAAAA,AAAAA,KAAAA,CAAiBmE,EAAStE,EAAAA,EAC/C,IAAA;YAcC,IAAA,AAbA6N,CAAAA,IAAOvJ,EAAUlE,WAAAA,AAAAA,KbND,QaQJyN,EAAKE,wBAAAA,IAChBzJ,CAAAA,EAAU0J,QAAAA,CAASH,EAAKE,wBAAAA,CAAyBJ,KACjDG,IAAUxJ,EAASL,GAAAA,AAAAA,GbVJ,QaaZK,EAAU2J,iBAAAA,IACb3J,CAAAA,EAAU2J,iBAAAA,CAAkBN,GAAOC,KAAa,CAAE,IAClDE,IAAUxJ,EAASL,GAAAA,AAAAA,GAIhB6J,GACH,OAAQxJ,EAASmF,GAAAA,GAAiBnF;QAIpC,EAFE,OAAO2D,GAAAA;YACR0F,IAAQ1F;QACT;QAIF,MAAM0F;IACP;AAAA,GRzCIzO,IAAU,GA2FD8C,IAAiB,SAAAlC,CAAAA;IAAK,OL/Ef,QKgFnBA,KL/EwBO,QK+EPP,EAAMM,WAAwB;AAAA,GCrEhDkD,EAAcgG,SAAAA,CAAU0E,QAAAA,GAAW,SAAUE,CAAAA,EAAQC,CAAAA;IAEpD,IAAIC;IAEHA,INfkB,QMcf5K,IAAAA,CAAIuG,GAAAA,IAAuBvG,IAAAA,CAAIuG,GAAAA,IAAevG,IAAAA,CAAKoG,KAAAA,GAClDpG,IAAAA,CAAIuG,GAAAA,GAEJvG,IAAAA,CAAIuG,GAAAA,GAAcpH,EAAO,CAAE,GAAEa,IAAAA,CAAKoG,KAAAA,GAGlB,cAAA,OAAVsE,KAGVA,CAAAA,IAASA,EAAOvL,EAAO,CAAA,GAAIyL,IAAI5K,IAAAA,CAAKjE,KAAAA,CAAAA,GAGjC2O,KACHvL,EAAOyL,GAAGF,IN3BQ,QM+BfA,KAEA1K,IAAAA,CAAIlD,GAAAA,IACH6N,CAAAA,KACH3K,IAAAA,CAAIsG,GAAAA,CAAiB5F,IAAAA,CAAKiK,IAE3BpK,EAAcP,IAAAA,CAAAA;AAEhB,GAQAF,EAAcgG,SAAAA,CAAU+E,WAAAA,GAAc,SAAUF,CAAAA;IAC3C3K,IAAAA,CAAIlD,GAAAA,IAIPkD,CAAAA,IAAAA,CAAItD,GAAAA,GAAAA,CAAU,GACViO,KAAU3K,IAAAA,CAAIqG,GAAAA,CAAkB3F,IAAAA,CAAKiK,IACzCpK,EAAcP,IAAAA,CAAAA;AAEhB,GAYAF,EAAcgG,SAAAA,CAAUC,MAAAA,GAAS1I,GA8F7BoB,IAAgB,EAAA,EAadE,IACa,cAAA,OAAXmM,UACJA,QAAQhF,SAAAA,CAAUoB,IAAAA,CAAK6D,IAAAA,CAAKD,QAAQE,OAAAA,MACpCC,YAuBErM,IAAY,SAACsM,CAAAA,EAAGC,CAAAA;IAAAA,OAAMD,EAACpO,GAAAA,CAAAL,GAAAA,GAAiB0O,EAACrO,GAAAA,CAAAL,GAAc;AAAA,GA8B7DkE,EAAOC,GAAAA,GAAkB,GCxOnB/B,IAAgB,+BAalBC,IAAa,GAkJXC,IAAa6F,EAAAA,CAAiB,IAC9B5F,IAAoB4F,EAAAA,CAAiB,IC5KhCxJ,IAAI;;;;;AOAf,iDAAA;AAAA,gDAAA;AAAA,mDAAA;AAAA,+CAAA;AAAA,sDAAA;AAAA,2CAAA;AAAA,yDAAA;AAAA,qDAAA;AAAA,6CAAA;AAAA,gDAAA;AAAA,4CAAA;AAAA,8CAAA;AAAA;AAAA,IAAIgQ,GAGAC,GAGAC,GAmBAC,GAhBAC,IAAc,GAGdC,IAAoB,EAAA,EAGlBvO,IAAuDwO,CAAAA,GAAAA,eAAAA,AAAAA,GAEzDC,IAAgBzO,EAAOT,GAAAA,EACvBmP,IAAkB1O,EAAO0D,GAAAA,EACzBiL,IAAe3O,EAAQoK,MAAAA,EACvBwE,IAAY5O,EAAOP,GAAAA,EACnBoP,IAAmB7O,EAAQmG,OAAAA,EAC3B2I,IAAU9O,EAAOV,EAAAA;AA8GrB,SAASyP,EAAaC,CAAAA,EAAOpQ,CAAAA;IACxBoB,EAAOmJ,GAAAA,IACVnJ,EAAOmJ,GAAAA,CAAOgF,GAAkBa,GAAOV,KAAe1P,IAEvD0P,IAAc;IAOd,IAAMW,IACLd,EAAgBe,GAAAA,IACff,CAAAA,EAAgBe,GAAAA,GAAW;QAC3B5P,IAAO,EAAA;QACP6J,KAAiB,EAAA;IAAA,CAAA;IAOnB,OAJI6F,KAASC,EAAK3P,EAAAA,CAAOvB,MAAAA,IACxBkR,EAAK3P,EAAAA,CAAOkE,IAAAA,CAAK,CAAE,IAGbyL,EAAK3P,EAAAA,CAAO0P,EACpB;AAAA;AAOO,SAASG,EAASC,CAAAA;IAExB,OADAd,IAAc,GACPe,EAAWC,GAAgBF;AACnC;AAUgB,SAAAC,EAAWE,CAAAA,EAASH,CAAAA,EAAcI,CAAAA;IAEjD,IAAMC,IAAYV,EAAab,KAAgB;IAE/C,IADAuB,EAAUC,CAAAA,GAAWH,GAAAA,CAChBE,EAAShQ,GAAAA,IACbgQ,CAAAA,EAASnQ,EAAAA,GAAU;QACjBkQ,IAAiDA,EAAKJ,KAA/CE,EAAAA,KAAe3P,GAAWyP;QAElC,SAAAO,CAAAA;YACC,IAAMC,IAAeH,EAASI,GAAAA,GAC3BJ,EAASI,GAAAA,CAAY,EAAA,GACrBJ,EAASnQ,EAAAA,CAAQ,EAAA,EACdwQ,IAAYL,EAAUC,CAAAA,CAASE,GAAcD;YAE/CC,MAAiBE,KACpBL,CAAAA,EAASI,GAAAA,GAAc;gBAACC;gBAAWL,EAASnQ,EAAAA,CAAQ,EAAA;aAAA,EACpDmQ,EAAShQ,GAAAA,CAAY6N,QAAAA,CAAS,CAAE,EAAA;QAElC;KAAA,EAGDmC,EAAShQ,GAAAA,GAAc0O,GAAAA,CAElBA,EAAgB4B,GAAAA,AAAAA,GAAmB;QAAA,IAgC9BC,IAAT,SAAyBC,CAAAA,EAAGvC,CAAAA,EAAGpK,CAAAA;YAC9B,IAAA,CAAKmM,EAAShQ,GAAAA,CAAAyP,GAAAA,EAAqB,OAAA,CAAW;YAG9C,IACMgB,IACLT,EAAShQ,GAAAA,CAAAyP,GAAAA,CAAA5P,EAAAA,CAA0B6Q,MAAAA,CAFhB,SAAAzJ,CAAAA;gBAAC,OAAA,CAAA,CAAMA,EAACjH,GAAW;YAAA;YAOvC,IAHsByQ,EAAWE,KAAAA,CAAM,SAAA1J,CAAAA;gBAAC,OAAA,CAAKA,EAACmJ,GAAW;YAAA,IAIxD,OAAA,CAAOQ,KAAUA,EAAQ/P,IAAAA,CAAKwC,IAAAA,EAAMmN,GAAGvC,GAAGpK;YAM3C,IAAIgN,IAAeb,EAAShQ,GAAAA,CAAYZ,KAAAA,KAAUoR;YAUlD,OATAC,EAAWzD,OAAAA,CAAQ,SAAA8D,CAAAA;gBAClB,IAAIA,EAAQV,GAAAA,EAAa;oBACxB,IAAMD,IAAeW,EAAQjR,EAAAA,CAAQ,EAAA;oBACrCiR,EAAQjR,EAAAA,GAAUiR,EAAQV,GAAAA,EAC1BU,EAAQV,GAAAA,GAAAA,KAAclQ,GAClBiQ,MAAiBW,EAAQjR,EAAAA,CAAQ,EAAA,IAAIgR,CAAAA,IAAAA,CAAe,CAAA;gBACzD;YACD,IAEOD,KACJA,EAAQ/P,IAAAA,CAAKwC,IAAAA,EAAMmN,GAAGvC,GAAGpK,MACzBgN;QACJ;QA9DAnC,EAAgB4B,GAAAA,GAAAA,CAAoB;QACpC,IAAIM,IAAUlC,EAAiBzE,qBAAAA,EACzB8G,IAAUrC,EAAiBxE,mBAAAA;QAKjCwE,EAAiBxE,mBAAAA,GAAsB,SAAUsG,CAAAA,EAAGvC,CAAAA,EAAGpK,CAAAA;YACtD,IAAIR,IAAAA,CAAItD,GAAAA,EAAS;gBAChB,IAAIsI,IAAMuI;gBAEVA,IAAAA,KAAU1Q,GACVqQ,EAAgBC,GAAGvC,GAAGpK,IACtB+M,IAAUvI;YACX;YAEI0I,KAASA,EAAQlQ,IAAAA,CAAKwC,IAAAA,EAAMmN,GAAGvC,GAAGpK;QACvC,GA+CA6K,EAAiBzE,qBAAAA,GAAwBsG;IAC1C;IAGD,OAAOP,EAASI,GAAAA,IAAeJ,EAASnQ,EACzC;AAAA;AAOO,SAASmR,EAAUhD,CAAAA,EAAUiD,CAAAA;IAEnC,IAAMxH,IAAQ6F,EAAab,KAAgB;IAAA,CACtClO,EAAOqJ,GAAAA,IAAiBsH,EAAYzH,EAAKgG,GAAAA,EAAQwB,MACrDxH,CAAAA,EAAK5J,EAAAA,GAAUmO,GACfvE,EAAM0H,CAAAA,GAAeF,GAErBvC,EAAgBe,GAAAA,CAAA/F,GAAAA,CAAyB3F,IAAAA,CAAK0F,EAAAA;AAEhD;AAOgB,SAAA2H,EAAgBpD,CAAAA,EAAUiD,CAAAA;IAEzC,IAAMxH,IAAQ6F,EAAab,KAAgB;IAAA,CACtClO,EAAOqJ,GAAAA,IAAiBsH,EAAYzH,EAAKgG,GAAAA,EAAQwB,MACrDxH,CAAAA,EAAK5J,EAAAA,GAAUmO,GACfvE,EAAM0H,CAAAA,GAAeF,GAErBvC,EAAgBhF,GAAAA,CAAkB3F,IAAAA,CAAK0F,EAAAA;AAEzC;AAGO,SAAS4H,EAAOC,CAAAA;IAEtB,OADAzC,IAAc,GACP0C,EAAQ;QAAO,OAAA;YAAErO,SAASoO;QAAAA;IAAc,GAAG,EAAA;AACnD;AAQgB,SAAAE,EAAoB/R,CAAAA,EAAKgS,CAAAA,EAAcR,CAAAA;IACtDpC,IAAc,GACduC,EACC;QACC,IAAkB,cAAA,OAAP3R,GAAmB;YAC7B,IAAM4B,IAAS5B,EAAIgS;YACnB,OAAa;gBACZhS,EAAI,OACA4B,KAA2B,cAAA,OAAVA,KAAsBA;YAC5C;QACD;QAAW5B,IAAAA,GAEV,OADAA,EAAIyD,OAAAA,GAAUuO,KACP;YAAA,OAAOhS,EAAIyD,OAAAA,GAAU;QAAI;IAElC,GACQ,QAAR+N,IAAeA,IAAOA,EAAKS,MAAAA,CAAOjS;AAEpC;AAQgB,SAAA8R,EAAQI,CAAAA,EAASV,CAAAA;IAEhC,IAAMxH,IAAQ6F,EAAab,KAAgB;IAO3C,OANIyC,EAAYzH,EAAKgG,GAAAA,EAAQwB,MAC5BxH,CAAAA,EAAK5J,EAAAA,GAAU8R,KACflI,EAAKgG,GAAAA,GAASwB,GACdxH,EAAKC,GAAAA,GAAYiI,CAAAA,GAGXlI,EAAK5J,EACb;AAAA;AAOO,SAAS+R,EAAY5D,CAAAA,EAAUiD,CAAAA;IAErC,OADApC,IAAc,GACP0C,EAAQ;QAAA,OAAMvD;IAAQ,GAAEiD;AAChC;AAKO,SAASY,EAAWzO,CAAAA;IAC1B,IAAMyF,IAAW6F,EAAiBtL,OAAAA,CAAQA,EAAOpD,GAAAA,CAAAA,EAK3CyJ,IAAQ6F,EAAab,KAAgB;IAK3C,OADAhF,EAAK5F,CAAAA,GAAYT,GACZyF,IAEe,CAAA,QAAhBY,EAAK5J,EAAAA,IACR4J,CAAAA,EAAK5J,EAAAA,GAAAA,CAAU,GACfgJ,EAASW,GAAAA,CAAIkF,EAAAA,GAEP7F,EAASzJ,KAAAA,CAAM+B,KAAAA,AAAAA,IANAiC,EAAOvD,EAO9B;AAAA;AAMgB,SAAAiS,EAAc3Q,CAAAA,EAAO4Q,CAAAA;IAChCxR,EAAQuR,aAAAA,IACXvR,EAAQuR,aAAAA,CACPC,IAAYA,EAAU5Q,KAAM;AAG/B;AAMO,SAAS6Q,EAAiBnH,CAAAA;IAEhC,IAAMpB,IAAQ6F,EAAab,KAAgB,KACrCwD,IAAWvC;IAQjB,OAPAjG,EAAK5J,EAAAA,GAAUgL,GACV6D,EAAiBZ,iBAAAA,IACrBY,CAAAA,EAAiBZ,iBAAAA,GAAoB,SAACoE,CAAAA,EAAKzE,CAAAA;QACtChE,EAAK5J,EAAAA,IAAS4J,EAAK5J,EAAAA,CAAQqS,GAAKzE,IACpCwE,CAAAA,CAAS,EAAA,CAAGC;IACb,CAAA,GAEM;QACND,CAAAA,CAAS,EAAA;QACT;YACCA,CAAAA,CAAS,EAAA,CAAA,KAAG/R;QACb;KAEF;AAAA;AAGO,SAASiS;IAEf,IAAM1I,IAAQ6F,EAAab,KAAgB;IAC3C,IAAA,CAAKhF,EAAK5J,EAAAA,EAAS;QAIlB,IADA,IAAI+K,IAAO8D,EAAgBvO,GAAAA,EACX,SAATyK,KAAAA,CAAkBA,EAAIa,GAAAA,IAA2B,SAAjBb,EAAI/K,EAAAA,EAC1C+K,IAAOA,EAAI/K,EAAAA;QAGZ,IAAIuS,IAAOxH,EAAIa,GAAAA,IAAWb,CAAAA,EAAIa,GAAAA,GAAS;YAAC;YAAG;SAAA,AAAA;QAC3ChC,EAAK5J,EAAAA,GAAU,MAAMuS,CAAAA,CAAK,EAAA,GAAK,MAAMA,CAAAA,CAAK,EAAA;IAC3C;IAEA,OAAO3I,EAAK5J,EACb;AAAA;AAKA,SAASwS;IAER,IADA,IAAIlO,GACIA,IAAY2K,EAAkBnK,KAAAA,IACrC,IAAKR,EAASS,GAAAA,IAAgBT,EAASsL,GAAAA,EACvC,IAAA;QACCtL,EAASsL,GAAAA,CAAA/F,GAAAA,CAAyBsD,OAAAA,CAAQsF,IAC1CnO,EAASsL,GAAAA,CAAA/F,GAAAA,CAAyBsD,OAAAA,CAAQuF,IAC1CpO,EAASsL,GAAAA,CAAA/F,GAAAA,GAA2B,EAIrC;IAAA,EAHE,OAAO5B,GAAAA;QACR3D,EAASsL,GAAAA,CAAA/F,GAAAA,GAA2B,EAAA,EACpCnJ,EAAOR,GAAAA,CAAa+H,GAAG3D,EAAShE,GAAAA;IACjC;AAEF;AA1aAI,EAAOT,GAAAA,GAAS,SAAAH,CAAAA;IACf+O,IAAmB,MACfM,KAAeA,EAAcrP;AAClC,GAEAY,EAAOV,EAAAA,GAAS,SAACF,CAAAA,EAAOuF,CAAAA;IACnBvF,KAASuF,EAAStF,GAAAA,IAAcsF,EAAStF,GAAAA,CAAA6L,GAAAA,IAC5C9L,CAAAA,EAAK8L,GAAAA,GAASvG,EAAStF,GAAAA,CAAA6L,GAAAA,AAAAA,GAGpB4D,KAASA,EAAQ1P,GAAOuF;AAC7B,GAGA3E,EAAO0D,GAAAA,GAAW,SAAAtE,CAAAA;IACbsP,KAAiBA,EAAgBtP,IAGrC8O,IAAe;IAEf,IAAMe,IAAAA,AAHNd,CAAAA,IAAmB/O,EAAKK,GAAAA,AAAAA,EAGMyP,GAAAA;IAC1BD,KACCb,CAAAA,MAAsBD,IACzBc,CAAAA,EAAK9F,GAAAA,GAAmB,EAAA,EACxBgF,EAAgBhF,GAAAA,GAAoB,EAAA,EACpC8F,EAAK3P,EAAAA,CAAOmN,OAAAA,CAAQ,SAAA8D,CAAAA;QACfA,EAAQV,GAAAA,IACXU,CAAAA,EAAQjR,EAAAA,GAAUiR,EAAQV,GAAAA,AAAAA,GAE3BU,EAASK,CAAAA,GAAeL,EAAQV,GAAAA,GAAAA,KAAclQ;IAC/C,EAAA,IAEAsP,CAAAA,EAAK9F,GAAAA,CAAiBsD,OAAAA,CAAQsF,IAC9B9C,EAAK9F,GAAAA,CAAiBsD,OAAAA,CAAQuF,IAC9B/C,EAAK9F,GAAAA,GAAmB,EAAA,EACxB+E,IAAe,CAAA,CAAA,GAGjBE,IAAoBD;AACrB,GAGAnO,EAAQoK,MAAAA,GAAS,SAAAhL,CAAAA;IACZuP,KAAcA,EAAavP;IAE/B,IAAMkE,IAAIlE,EAAKK,GAAAA;IACX6D,KAAKA,EAAC4L,GAAAA,IACL5L,CAAAA,EAAC4L,GAAAA,CAAA/F,GAAAA,CAAyBpL,MAAAA,IAgaR,CAAA,MAha2BwQ,EAAkB/K,IAAAA,CAAKF,MAga7C+K,MAAYrO,EAAQiS,qBAAAA,IAAAA,AAAAA,CAAAA,AAC/C5D,CAAAA,IAAUrO,EAAQiS,qBAAAA,AAAAA,KACNC,CAAAA,EAAgBJ,EAAAA,GAja5BxO,EAAC4L,GAAAA,CAAA5P,EAAAA,CAAemN,OAAAA,CAAQ,SAAA8D,CAAAA;QACnBA,EAASK,CAAAA,IACZL,CAAAA,EAAQrB,GAAAA,GAASqB,EAASK,CAAAA,AAAAA,GAE3BL,EAASK,CAAAA,GAAAA,KAAejR;IACzB,EAAA,GAEDyO,IAAoBD,IAAmB;AACxC,GAIAnO,EAAOP,GAAAA,GAAW,SAACL,CAAAA,EAAO4E,CAAAA;IACzBA,EAAYyC,IAAAA,CAAK,SAAA7C,CAAAA;QAChB,IAAA;YACCA,EAASuF,GAAAA,CAAkBsD,OAAAA,CAAQsF,IACnCnO,EAASuF,GAAAA,GAAoBvF,EAASuF,GAAAA,CAAkBgH,MAAAA,CAAO,SAAA7F,CAAAA;gBAAE,OAAA,CAChEA,EAAEhL,EAAAA,IAAU0S,EAAa1H;YAAU;QAQrC,EANE,OAAO/C,GAAAA;YACRvD,EAAYyC,IAAAA,CAAK,SAAAnD,CAAAA;gBACZA,EAAC6F,GAAAA,IAAmB7F,CAAAA,EAAC6F,GAAAA,GAAoB,EAAA,AAAA;YAC9C,IACAnF,IAAc,EAAA,EACdhE,EAAOR,GAAAA,CAAa+H,GAAG3D,EAAShE,GAAAA;QACjC;IACD,IAEIgP,KAAWA,EAAUxP,GAAO4E;AACjC,GAGAhE,EAAQmG,OAAAA,GAAU,SAAA/G,CAAAA;IACbyP,KAAkBA,EAAiBzP;IAEvC,IAEK+S,GAFC7O,IAAIlE,EAAKK,GAAAA;IACX6D,KAAKA,EAAC4L,GAAAA,IAET5L,CAAAA,EAAC4L,GAAAA,CAAA5P,EAAAA,CAAemN,OAAAA,CAAQ,SAAAiB,CAAAA;QACvB,IAAA;YACCqE,EAAcrE;QAGf,EAFE,OAAOnG,GAAAA;YACR4K,IAAa5K;QACd;IACD,IACAjE,EAAC4L,GAAAA,GAAAA,KAAWvP,GACRwS,KAAYnS,EAAOR,GAAAA,CAAa2S,GAAY7O,EAAC1D,GAAAA,CAAAA;AAEnD;AA4UA,IAAIwS,IAA0C,cAAA,OAAzBH;AAYrB,SAASC,EAAezE,CAAAA;IACvB,IAOI4E,GAPEC,IAAO;QACZC,aAAaC,IACTJ,KAASK,qBAAqBJ,IAClCtE,WAAWN;IACZ,GACM+E,IAAUzE,WAAWuE,GAlcR;IAqcfF,KACHC,CAAAA,IAAMJ,sBAAsBK,EAAAA;AAE9B;AAqBA,SAASP,EAAcW,CAAAA;IAGtB,IAAMC,IAAOxE,GACTyE,IAAUF,EAAIjT,GAAAA;IACI,cAAA,OAAXmT,KACVF,CAAAA,EAAIjT,GAAAA,GAAAA,KAAYE,GAChBiT,GAAAA,GAGDzE,IAAmBwE;AACpB;AAOA,SAASX,EAAaU,CAAAA;IAGrB,IAAMC,IAAOxE;IACbuE,EAAIjT,GAAAA,GAAYiT,EAAIpT,EAAAA,IACpB6O,IAAmBwE;AACpB;AAOA,SAAShC,EAAYkC,CAAAA,EAASC,CAAAA;IAC7B,OAAA,CACED,KACDA,EAAQ9U,MAAAA,KAAW+U,EAAQ/U,MAAAA,IAC3B+U,EAAQrM,IAAAA,CAAK,SAACsM,CAAAA,EAAK/D,CAAAA;QAAU,OAAA+D,MAAQF,CAAAA,CAAQ7D,EAAM;IAAA;AAErD;AAQA,SAASM,EAAeyD,CAAAA,EAAKC,CAAAA;IAC5B,OAAmB,cAAA,OAALA,IAAkBA,EAAED,KAAOC;AAC1C;;;;;oDC/hBa;A;AAPb;AACA;AAMO,MAAM,iBAAyD,CAAC,EACrE,oBAAoB,OAAO,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,YAAY,EACnE;IACC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS;IAE7C,iDAAiD;IACjD,CAAA,GAAA,gBAAS,AAAT,EAAU;QACR,cAAc;IAChB,GAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,cAAc,CAAC;IACjB;IAEA,OACE,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;QAAK,WAAW,CAAA,gBAAA,EAAmB,aAAa,aAAa,IAAI;QAAE,MAAK;QAAQ,cAAY;QAAe,UAAA;YACzG,CAAA,GAAA,eAAA,AAAA,EAAA,OAAA;gBACE,WAAU;gBACV,SAAS;gBACT,WAAW,CAAC;oBACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;wBACtC,EAAE,cAAc;wBAChB;oBACF;gBACF;gBACA,UAAU;gBACV,MAAK;gBAAQ,iBACE;gBAAU,iBACX;gBAAkB,UAEhC,CAAA,GAAA,gBAAA,AAAA,EAAA,QAAA;oBAAM,WAAU;oBAAe,UAAA;wBAC5B,aAAa,WAAM;wBACpB,CAAA,GAAA,eAAA,AAAA,EAAA,QAAA;4BAAM,WAAU;4BAAM,UAAA;wBAAA;qBAAyB;gBAAA;YAC1C;YAGT,CAAA,GAAA,eAAA,AAAA,EAAA,OAAA;gBACE,IAAG;gBACH,WAAU;gBACV,OAAO;oBACL,WAAW,aAAa,UAAU;oBAClC,SAAS,aAAa,MAAM;oBAC5B,YAAY,aAAa,YAAY;gBACtC;gBAAA,UAED,CAAA,GAAA,eAAA,AAAA,EAAA,OAAA;oBAAK,WAAU;oBAA2C,UACxD,CAAA,GAAA,eAAA,AAAA,EAAC,CAAA,GAAA,0BAAY,AAAZ,GAAY;wBAAC,mBAAmB;oBAAiB;gBAAI;YAClD;SACF;IAAA;AAGZ;;;;;oDCvDa;kDACA;mDACA;kDAMA;A;AAZb;AACA;AAGO,MAAM,iBAAiB,CAAA,GAAA,eAAM,AAAN,EAAO,aAAa,OAAO,CAAC,oBAAoB;AACvE,MAAM,eAAe,CAAA,GAAA,eAAM,AAAN,EAAO,aAAa,OAAO,CAAC,kBAAkB;AACnE,MAAM,gBAAgB,CAAA,GAAA,eAAM,AAAN,EAAO,aAAa,OAAO,CAAC,mBAAmB;AAMrE,MAAM,eAAqD,CAAC,EAAE,oBAAoB,KAAK,EAAE;IAC9F,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS,eAAe,KAAK;IAC7E,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS,aAAa,KAAK;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS,cAAc,KAAK;IAE1D,mCAAmC;IACnC,CAAA,GAAA,gBAAS,AAAT,EAAU;QACR,oBAAoB,eAAe,KAAK;IAC1C,GAAG;QAAC,eAAe,KAAK;KAAC;IAEzB,CAAA,GAAA,gBAAS,AAAT,EAAU;QACR,UAAU,aAAa,KAAK;IAC9B,GAAG;QAAC,aAAa,KAAK;KAAC;IAEvB,CAAA,GAAA,gBAAS,AAAT,EAAU;QACR,WAAW,cAAc,KAAK;IAChC,GAAG;QAAC,cAAc,KAAK;KAAC;IAExB,MAAM,uBAAuB,CAAC;QAC5B,MAAM,cAAe,EAAE,MAA4B,CAAC,KAAK;QACzD,oBAAoB;QACpB,aAAa,OAAO,CAAC,iBAAiB;QACtC,eAAe,KAAK,GAAG;IACzB;IAEA,MAAM,oBAAoB,CAAC;QACzB,MAAM,YAAa,EAAE,MAA2B,CAAC,KAAK;QACtD,UAAU;QACV,aAAa,OAAO,CAAC,eAAe;QACpC,aAAa,KAAK,GAAG;IACvB;IAEA,MAAM,sBAAsB,CAAC;QAC3B,MAAM,aAAc,EAAE,MAA4B,CAAC,KAAK;QACxD,WAAW;QACX,aAAa,OAAO,CAAC,gBAAgB;QACrC,cAAc,KAAK,GAAG;IACxB;IAEA,yBAAyB;IACzB,MAAM,kBAAkB;QACtB;YAAE,OAAO;YAAI,MAAM;QAAc;QACjC,4BAA4B;QAC5B;YAAE,OAAO;YAAiB,MAAM;QAAqB;QACrD;YAAE,OAAO;YAAiB,MAAM;QAAmB;QACnD;YAAE,OAAO;YAAiB,MAAM;QAAU;QAC1C;YAAE,OAAO;YAAiB,MAAM;QAAmB;QACnD;YAAE,OAAO;YAAiB,MAAM;QAAY;QAC5C;YAAE,OAAO;YAAiB,MAAM;QAAO;QACvC;YAAE,OAAO;YAAiB,MAAM;QAAsB;QACtD;YAAE,OAAO;YAAiB,MAAM;QAAa;QAC7C;YAAE,OAAO;YAAiB,MAAM;QAAa;QAC7C,kCAAkC;QAClC;YAAE,OAAO;YAAiB,MAAM;QAAmB;QACnD;YAAE,OAAO;YAAiB,MAAM;QAA2B;QAC3D;YAAE,OAAO;YAAiB,MAAM;QAAe;QAC/C;YAAE,OAAO;YAAiB,MAAM;QAAQ;QACxC;YAAE,OAAO;YAAiB,MAAM;QAAQ;QACxC;YAAE,OAAO;YAAiB,MAAM;QAAoB;KACrD;IAED,kBAAkB;IAClB,MAAM,iBAAiB;QACrB;YAAE,OAAO;YAAI,MAAM;QAAa;QAChC;YAAE,OAAO;YAAM,MAAM;QAAsB;QAC3C;YAAE,OAAO;YAAM,MAAM;QAAsB;QAC3C;YAAE,OAAO;YAAM,MAAM;QAAsB;QAC3C;YAAE,OAAO;YAAM,MAAM;QAAsB;QAC3C;YAAE,OAAO;YAAM,MAAM;QAAsB;KAC5C;IAED,8CAA8C;IAC9C,MAAM,gBAAgB;IAEtB,6CAA6C;IAC7C,MAAM,eAAe;IAErB,OACE,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;QAAK,WAAU;QAAM,UAAA;YACnB,CAAA,GAAA,eAAA,AAAA,EAAA,MAAA;gBAAI,WAAU;gBAAgD,UAAA;YAAA;YAE9D,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;gBAAK,WAAU;gBAAuC,UAAA;oBAEpD,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;wBAAA,UAAA;4BACE,CAAA,GAAA,eAAA,AAAA,EAAA,SAAA;gCAAO,SAAQ;gCAAkB,WAAU;gCAAgC,UAAA;4BAAA;4BAC3E,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;gCAAK,WAAU;gCAAU,UAAA;oCACvB,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;wCACE,IAAG;wCACH,WAAW;wCACX,OAAO;wCACP,SAAS;wCAAoB,cAClB;wCAAiB,UAE3B,gBAAgB,GAAG,CAAC,CAAA,SACnB,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;gDAA2B,OAAO,OAAO,KAAK;gDAAA,UAAG,OAAO,IAAI;4CAAA,GAA/C,OAAO,KAAK;oCACzB;oCAEJ,CAAA,GAAA,eAAA,AAAA,EAAA,OAAA;wCAAK,WAAU;wCAA2F,UACxG,CAAA,GAAA,eAAA,AAAA,EAAA,OAAA;4CAAK,WAAU;4CAAuB,OAAM;4CAA6B,SAAQ;4CAAW,UAC1F,CAAA,GAAA,eAAA,AAAA,EAAA,QAAA;gDAAM,GAAE;4CAA4E;wCAAG;oCACnF;iCACF;4BAAA;yBACF;oBAAA;oBAIR,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;wBAAA,UAAA;4BACE,CAAA,GAAA,eAAA,AAAA,EAAA,SAAA;gCAAO,SAAQ;gCAAe,WAAU;gCAAgC,UAAA;4BAAA;4BACxE,CAAA,GAAA,eAAA,AAAA,EAAA,SAAA;gCACE,IAAG;gCACH,MAAK;gCACL,WAAW;gCACX,aAAY;gCACZ,OAAO;gCACP,SAAS;gCAAiB,cACf;4BAAa;yBACxB;oBAAA;oBAIJ,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;wBAAA,UAAA;4BACE,CAAA,GAAA,eAAA,AAAA,EAAA,SAAA;gCAAO,SAAQ;gCAAiB,WAAU;gCAAgC,UAAA;4BAAA;4BAC1E,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;gCAAK,WAAU;gCAAU,UAAA;oCACvB,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;wCACE,IAAG;wCACH,WAAW;wCACX,OAAO;wCACP,SAAS;wCAAmB,cACjB;wCAAgB,UAE1B,eAAe,GAAG,CAAC,CAAA,SAClB,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;gDAA2B,OAAO,OAAO,KAAK;gDAAA,UAAG,OAAO,IAAI;4CAAA,GAA/C,OAAO,KAAK;oCACzB;oCAEJ,CAAA,GAAA,eAAA,AAAA,EAAA,OAAA;wCAAK,WAAU;wCAA2F,UACxG,CAAA,GAAA,eAAA,AAAA,EAAA,OAAA;4CAAK,WAAU;4CAAuB,OAAM;4CAA6B,SAAQ;4CAAW,UAC1F,CAAA,GAAA,eAAA,AAAA,EAAA,QAAA;gDAAM,GAAE;4CAA4E;wCAAG;oCACnF;iCACF;4BAAA;yBACF;oBAAA;iBACF;YAAA;SACF;IAAA;AAGZ;;;;;AE9HA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsaA,iDAAAyD;AAAA,+CAAAzC;AAAA,qDAAAoD;AAtaA;AAAA;AAAA;AAAA,IAIInE,GAiBA9E,GACA+E,GAjBHC,IAA8B,EAAA,EAC9BC,IAA0B,EAAA;AAK3BC,CAAAA,GAAAA,mBAAAA,AAAAA,EAAO;IACNJ,IAAYnQ,IAAAA,CAAKwQ,CAClB;AAAA;AAGA,SAASZ,EAA6Ba,CAAAA,EAAaC,CAAAA;IAElDxT,CAAAA,GAAAA,eAAAA,AAAAA,CAAAA,CAAQuT,EAAAA,GAAYC,EAAO3F,IAAAA,CAAK,MAAM7N,CAAAA,GAAAA,eAAAA,AAAAA,CAAAA,CAAQuT,EAAAA,IAAc,YAAO;AACpE;AAKA,SAASE,EAAkBC,CAAAA;IAE1B,IAAIR,GAAcA;IAElBA,IAAeQ,KAAWA,EAAQC,CAAAA;AACnC;AAwBA,SAASC,EAAWC,CAAAA;IAAqDC,IAAAA,IAAxBhR,IAAAA,EAAAqI,IAAI0I,EAAJ1I,IAAAA,EAK1C4I,IAAgBC,UAAU7I;IAChC4I,EAAcnT,KAAAA,GAAQuK;IAEtB,IAAA8I,IAAoBjD,CAAAA,GAAAA,cAAAA,AAAAA,EAAQ;QAC3B,IAAIkD,IAAOJ,GAEPK,IAAIL,EAAKlU,GAAAA;QACb,MAAQuU,IAAIA,EAAE7U,EAAAA,CACb,IAAI6U,EAAE1U,GAAAA,EAAK;YACV0U,EAAE1U,GAAAA,CAAI2U,IAAAA,IAjEY;YAkElB;QACA;QAGF,IAAMC,IAAgBC,CAAAA,GAAAA,qBAAAA,AAAAA,EAAS;YAC9B,IAAI5G,IAAIqG,EAAcnT,KAAAA,CAAMA,KAAAA;YAC5B,OAAa,MAAN8M,IAAU,IAAA,CAAU,MAANA,IAAa,KAAKA,KAAK;QAC7C,IAEM6G,IAASD,CAAAA,GAAAA,qBAAAA,AAAAA,EACd;YAAA,OAAA,CACE5V,MAAMD,OAAAA,CAAQ4V,EAAczT,KAAAA,KAAAA,CAC5BU,CAAAA,GAAAA,sBAAAA,AAAAA,EAAe+S,EAAczT,KAAAA;QAAM,IAIhC4T,IAAUnB,CAAAA,GAAAA,mBAAAA,AAAAA,EAAO;YACtBvQ,IAAAA,CAAKwQ,CAAAA,GAAUmB;YAGf,IAAIF,EAAO3T,KAAAA,EAAO;gBAIjB,IAAMA,IAAQyT,EAAczT,KAAAA;gBAC5B,IAAIsT,EAAKtU,GAAAA,IAAOsU,EAAKtU,GAAAA,CAAIJ,GAAAA,IAAiC,MAA1B0U,EAAKtU,GAAAA,CAAIJ,GAAAA,CAAI+G,QAAAA,EAC3C2N,EAAKtU,GAAAA,CAAIJ,GAAAA,CAAa2L,IAAAA,GAAOvK;YAE/B;QACF,IAIM8T,IAAaZ,EAAKa,IAAAA,CAAUC,CAAAA;QAClCd,EAAKa,IAAAA,CAAUC,CAAAA,GAAW;YACzBJ;YACAE,EAAWpU,IAAAA,CAAKwC,IAAAA;QACjB;QAEA,OAAO;YAACyR;YAAQF;SACjB;IAAA,GAAG,EAAA,GA/CIE,IAAMN,CAAAA,CAAA,EAAA,EAAEvG,IAACuG,CAAAA,CA0DhB,EAAA;IAAA,OAAOM,EAAO3T,KAAAA,GAAQ8M,EAAEmH,IAAAA,KAASnH,EAAE9M,KACpC;AAAA;AACAgT,EAAYkB,WAAAA,GAAc;AAE1BC,OAAOC,gBAAAA,CAAiBC,CAAAA,GAAAA,mBAAAA,AAAAA,EAAOrM,SAAAA,EAAW;IACzClJ,aAAa;QAAEwV,cAAAA,CAAc;QAAMtU,OAAAA,KAAOjB;IAAAA;IAC1Cf,MAAM;QAAEsW,cAAAA,CAAc;QAAMtU,OAAOgT;IAAAA;IACnC/U,OAAO;QACNqW,cAAAA,CAAc;QACdC,KAAGA;YACF,OAAO;gBAAEhK,MAAMrI,IAAAA;YAAAA;QAChB;IAAA;IAKDvD,KAAK;QAAE2V,cAAAA,CAAc;QAAMtU,OAAO;IAAA;AAAA;AAInC8R,EAAAA,OAAwB,SAAC/F,CAAAA,EAAKvN,CAAAA;IAC7B,IAA0B,YAAA,OAAfA,EAAMR,IAAAA,EAAmB;QACnC,IAAIwW,GAEAvW,IAAQO,EAAMP,KAAAA;QAClB,IAAK,IAAIX,KAAKW,EACb,IAAU,eAANX,GAAJ;YAEA,IAAI0C,IAAQ/B,CAAAA,CAAMX,EAAAA;YAClB,IAAI0C,aAAiBqU,CAAAA,GAAAA,mBAAAA,AAAAA,GAAQ;gBAC5B,IAAA,CAAKG,GAAahW,EAAMiW,IAAAA,GAAOD,IAAc,CAAE;gBAC/CA,CAAAA,CAAYlX,EAAAA,GAAK0C;gBACjB/B,CAAAA,CAAMX,EAAAA,GAAK0C,EAAMiU,IAAAA;YACjB;QALD;IAOD;IAEDlI,EAAIvN;AACL;AAGAsT,EAAAA,OAA0B,SAAC/F,CAAAA,EAAKvN,CAAAA;IAC/BqU;IAEA,IAAIC,GAEA9P,IAAYxE,EAAMK,GAAAA;IACtB,IAAImE,GAAW;QACdA,EAAUwQ,IAAAA,IAAAA;QAGV,IAAA,KAAgBzU,MADhB+T,CAAAA,IAAU9P,EAAU+Q,IAAAA,AAAAA,GAEnB/Q,EAAU+Q,IAAAA,GAAWjB,IA5IxB,SAAuBlG,CAAAA;YACtB,IAAIkG;YACJL,CAAAA,GAAAA,mBAAAA,AAAAA,EAAO;gBACNK,IAAU5Q,IACX;YAAA;YACA4Q,EAAQ4B,CAAAA,GAuIuC;gBAC5C1R,EAAUwQ,IAAAA,IA5Ka;gBA6KvBxQ,EAAU0J,QAAAA,CAAS,CAAA;YACpB;YAzIF,OAAOoG;QACR;IA0IE;IAEDvF,IAAmBvK;IACnB6P,EAAkBC;IAClB/G,EAAIvN;AACL;AAGAsT,EAAI,OAA2B,SAAC/F,CAAAA,EAAKM,CAAAA,EAAO7N,CAAAA,EAAO0E,CAAAA;IAClD2P;IACAtF,IAAAA,KAAmBxO;IACnBgN,EAAIM,GAAO7N,GAAO0E;AACnB;AAGA4O,EAAAA,UAA0B,SAAC/F,CAAAA,EAAKvN,CAAAA;IAC/BqU;IACAtF,IAAAA,KAAmBxO;IAEnB,IAAIoH;IAIJ,IAA0B,YAAA,OAAf3H,EAAMR,IAAAA,IAAsBmI,CAAAA,IAAM3H,EAAMI,GAAAA,AAAAA,GAAiB;QACnE,IAAIX,IAAQO,EAAMiW,IAAAA,EACdG,IAAgBpW,EAAMP,KAAAA;QAC1B,IAAIA,GAAO;YACV,IAAI4W,IAAW1O,EAAI2O,CAAAA;YACnB,IAAID,GACH,IAAK,IAAI1U,KAAQ0U,EAAU;gBAC1B,IAAI/B,IAAU+B,CAAAA,CAAS1U,EAAAA;gBACvB,IAAA,KAAgBpB,MAAZ+T,KAAAA,CAA2B3S,CAAAA,KAAQlC,CAAAA,GAAQ;oBAC9C6U,EAAQkB,CAAAA;oBAERa,CAAAA,CAAS1U,EAAAA,GAAAA,KAAQpB;gBACjB;YACD;iBACK;gBACN8V,IAAW,CAAE;gBACb1O,EAAI2O,CAAAA,GAAYD;YAChB;YACD,IAAK,IAAI1U,KAAQlC,EAAO;gBACvB,IAAI6U,IAAU+B,CAAAA,CAAS1U,EAAAA,EACnB4U,IAAS9W,CAAAA,CAAMkC,EAAAA;gBACnB,IAAA,KAAgBpB,MAAZ+T,GAAuB;oBAC1BA,IAAUkC,EAAkB7O,GAAKhG,GAAM4U,GAAQH;oBAC/CC,CAAAA,CAAS1U,EAAAA,GAAQ2S;gBACjB,OACAA,EAAQmC,CAAAA,CAAQF,GAAQH;YAEzB;QACD;IACD;IACD7I,EAAIvN;AACL;AAEA,SAASwW,EACR7O,CAAAA,EACAhG,CAAAA,EACA+U,CAAAA,EACAjX,CAAAA;IAEA,IAAMkX,IACLhV,KAAQgG,KAAAA,KAIgBpH,MAAxBoH,EAAIiP,eAAAA,EAECC,IAAeN,CAAAA,GAAAA,mBAAAA,AAAAA,EAAOG;IAC5B,OAAO;QACND,GAAS,SAACK,CAAAA,EAAmB9N,CAAAA;YAC5B6N,EAAarV,KAAAA,GAAQsV;YACrBrX,IAAQuJ;QACT;QACAwM,GAAUvB,CAAAA,GAAAA,mBAAAA,AAAAA,EAAO;YAChBvQ,IAAAA,CAAKwQ,CAAAA,GAAUmB;YACf,IAAM7T,IAAQqV,EAAarV,KAAAA,CAAMA,KAAAA;YAEjC,IAAI/B,CAAAA,CAAMkC,EAAAA,KAAUH,GAApB;gBACA/B,CAAAA,CAAMkC,EAAAA,GAAQH;gBACd,IAAImV,GAEHhP,CAAAA,CAAIhG,EAAAA,GAAQH;qBAAAA,IACFA,GACVmG,EAAIU,YAAAA,CAAa1G,GAAMH;qBAEvBmG,EAAIS,eAAAA,CAAgBzG;YAPrBlC;QASD;IAAA;AAEF;AAGA6T,EAAAA,WAA2B,SAAC/F,CAAAA,EAAKvN,CAAAA;IAChC,IAA0B,YAAA,OAAfA,EAAMR,IAAAA,EAAmB;QACnC,IAAImI,IAAM3H,EAAMI,GAAAA;QAEhB,IAAIuH,GAAK;YACR,IAAM0O,IAAW1O,EAAI2O,CAAAA;YACrB,IAAID,GAAU;gBACb1O,EAAI2O,CAAAA,GAAAA,KAAY/V;gBAChB,IAAK,IAAIoB,KAAQ0U,EAAU;oBAC1B,IAAI/B,IAAU+B,CAAAA,CAAS1U,EAAAA;oBACvB,IAAI2S,GAASA,EAAQkB,CAAAA;gBACrB;YACD;QACD;IACD,OAAM;QACN,IAAIhR,IAAYxE,EAAMK,GAAAA;QACtB,IAAImE,GAAW;YACd,IAAM8P,IAAU9P,EAAU+Q,IAAAA;YAC1B,IAAIjB,GAAS;gBACZ9P,EAAU+Q,IAAAA,GAAAA,KAAWhV;gBACrB+T,EAAQkB,CAAAA;YACR;QACD;IACD;IACDjI,EAAIvN;AACL;AAGAsT,EAAI,OAAoB,SAAC/F,CAAAA,EAAK/I,CAAAA,EAAWoL,CAAAA,EAAOpQ,CAAAA;IAC/C,IAAIA,IAAO,KAAc,MAATA,GACdgF,EAAiCwQ,IAAAA,IA3Sb;IA4StBzH,EAAI/I,GAAWoL,GAAOpQ;AACvB;AAMAuX,CAAAA,GAAAA,iBAAAA,AAAAA,EAAUvN,SAAAA,CAAUc,qBAAAA,GAAwB,SAE3C7K,CAAAA,EACAqK,CAAAA;IAGA,IAAMwK,IAAU5Q,IAAAA,CAAK6R,IAAAA,EACfyB,IAAa1C,KAAAA,KAAgC/T,MAArB+T,EAAQ2C,CAAAA;IAItC,IAAK,IAAInY,KAAKgL,EAAO,OAAA,CAAW;IAEhC,IAAIpG,IAAAA,CAAKiN,GAAAA,IAAyB,aAAA,OAAVjN,IAAAA,CAAKwT,CAAAA,IAAAA,CAA6B,MAAXxT,IAAAA,CAAKwT,CAAAA,EAAa;QAChE,IAAMC,IAjUe,IAiUCzT,IAAAA,CAAKsR,IAAAA;QAE3B,IAAA,CAAKgC,CAAAA,KAAeG,KAlUA,IAkUmBzT,IAAAA,CAAKsR,IAAAA,AAAAA,GAC3C,OAAA,CAAO;QAIR,IAzUyB,IAyUrBtR,IAAAA,CAAKsR,IAAAA,EAAmC,OAAA,CAC5C;IAAA,OAAM;QAEN,IAAA,CAAKgC,CAAAA,KA1Ue,IA0UCtT,IAAAA,CAAKsR,IAAAA,AAAAA,GAA+B,OAAA,CAAW;QAIpE,IAAyBoC,IAArB1T,IAAAA,CAAKsR,IAAAA,EAAsD,OAAA,CAAA;IAC/D;IAGD,IAAK,IAAIlW,KAAKW,EACb,IAAU,eAANX,KAAoBW,CAAAA,CAAMX,EAAAA,KAAO4E,IAAAA,CAAKjE,KAAAA,CAAMX,EAAAA,EAAI,OAAA,CACpD;IACD,IAAK,IAAIA,KAAS4E,IAAAA,CAACjE,KAAAA,CAAO,IAAA,CAAMX,CAAAA,KAAKW,CAAAA,GAAQ,OAAA,CAAA;IAG7C,OAAA,CACD;AAAA;AAAA,SAIgBmV,UAAapT,CAAAA;IAC5B,OAAOoQ,CAAAA,GAAAA,cAAAA,AAAAA,EAAQ;QAAA,OAAM2E,CAAAA,GAAAA,mBAAAA,AAAAA,EAAsB/U;IAAM,GAAE,EAAA;AACpD;AAEgB,SAAA6V,YAAeC,CAAAA;IAC9B,IAAMC,IAAW7F,CAAAA,GAAAA,aAAAA,AAAAA,EAAO4F;IACxBC,EAAShU,OAAAA,GAAU+T;IAClBvI,EAAwCiG,IAAAA,IApWpB;IAqWrB,OAAOpD,CAAAA,GAAAA,cAAAA,AAAAA,EAAQ;QAAM,OAAAsD,CAAAA,GAAAA,qBAAAA,AAAAA,EAAY;YAAA,OAAMqC,EAAShU,OAAAA;QAAS;IAAC,GAAE,EAAA;AAC7D;AAaA,IAAMiU,IAC4B,eAAA,OAA1B3E,wBAAwClE,aAZhD,SAAiBN,CAAAA;IAChB,IAAM6E,IAAO;QACZC,aAAaC;QACbC,qBAAqBJ;QACrB5E;IACD,GAEM+E,IAAUzE,WAAWuE,GAAM,MAC3BD,IAAMJ,sBAAsBK;AACnC,GAKMuE,IAAkB,SAACvM,CAAAA;IACxBwM,eAAe;QACdA,eAAexM;IAChB;AACD;AAEA,SAASyM;IACRC,CAAAA,GAAAA,kBAAAA,AAAAA,EAAM;QACL,IAAIC;QACJ,MAAQA,IAAO9D,EAAa/O,KAAAA,GAC3B6O,EAAU3S,IAAAA,CAAK2W;IAEjB;AACD;AAEA,SAASC;IACR,IAAgC,MAA5B/D,EAAa3P,IAAAA,CAAKV,IAAAA,GAAAA,AACpB9C,CAAAA,CAAAA,GAAAA,eAAAA,AAAAA,EAAQiS,qBAAAA,IAAyB2E,CAAAA,EAAcG;AAElD;AAEA,SAASI;IACRH,CAAAA,GAAAA,kBAAAA,AAAAA,EAAM;QACL,IAAIC;QACJ,MAAQA,IAAO7D,EAAShP,KAAAA,GACvB6O,EAAU3S,IAAAA,CAAK2W;IAEjB;AACD;AAEA,SAASxC;IACR,IAA4B,MAAxBrB,EAAS5P,IAAAA,CAAKV,IAAAA,GAAAA,AAChB9C,CAAAA,CAAAA,GAAAA,eAAAA,AAAAA,EAAQiS,qBAAAA,IAAyB4E,CAAAA,EAAiBM;AAErD;AAEM,SAAUC,gBAAgB9M,CAAAA;IAC/B,IAAMmD,IAAWqD,CAAAA,GAAAA,aAAAA,AAAAA,EAAOxG;IACxBmD,EAAS9K,OAAAA,GAAU2H;IAEnBmG,CAAAA,GAAAA,gBAAAA,AAAAA,EAAU;QACT,OAAO4C,CAAAA,GAAAA,mBAAAA,AAAAA,EAAO;YACbvQ,IAAAA,CAAKwQ,CAAAA,GAAU4D;YACf,OAAOzJ,EAAS9K,OAAAA;QACjB;IACD,GAAG,EAAA;AACJ;;;;;AEyXA,4CAAAsS;AAAA,2CAAA+B;AAAA,8CAAA1C;AAAA,4CAAAjB;AAAA,4CAAAsC;AAAA,+CAAAuC;AA5zBA,IAAMb,IAAeC,OAAAA,GAAAA,CAAW;AAsChC,SAASC;IACR,IAAA,CAAIC,CAAAA,IAAa,CAAA,GAAjB;QAKA,IAAIvK,GACAwK,IAAAA,CAAW;QAEf,MAAA,KAAyB9X,MAAlB+X,EAA6B;YACnC,IAAIrE,IAA6BqE;YACjCA,IAAAA,KAAgB/X;YAEhBgY;YAEA,MAAA,KAAkBhY,MAAX0T,EAAsB;gBAC5B,IAAMuE,IAA2BvE,EAAOwE,CAAAA;gBACxCxE,EAAOwE,CAAAA,GAAAA,KAAqBlY;gBAC5B0T,EAAOyE,CAAAA,IAAAA;gBAEP,IAAA,CApDc,CAAA,IAoDRzE,EAAOyE,CAAAA,AAAAA,KAAsBC,EAAiB1E,IACnD,IAAA;oBACCA,EAAOiC,CAAAA;gBAMP,EALC,OAAO3D,GAAAA;oBACR,IAAA,CAAK8F,GAAU;wBACdxK,IAAQ0E;wBACR8F,IAAAA,CAAW;oBACX;gBACD;gBAEFpE,IAASuE;YACT;QACD;QACDD,IAAiB;QACjBH;QAEA,IAAIC,GACH,MAAMxK;IAjCN,OAFAuK;AAqCF;AAcA,SAASR,EAASgB,CAAAA;IACjB,IAAIR,IAAa,GAChB,OAAOQ;IA1DRR;IA6DA,IAAA;QACC,OAAOQ;IAGP,SAFA;QACAT;IACA;AACF;AAGA,IAAIU,IAAAA,KAA6CtY;AASjD,SAASuY,EAAaF,CAAAA;IACrB,IAAMG,IAAcF;IACpBA,IAAAA,KAActY;IACd,IAAA;QACC,OAAOqY;IAGP,SAFA;QACAC,IAAcE;IACd;AACF;AAGA,IAAIT,IAAAA,KAAoC/X,GACpC6X,IAAa,GACbG,IAAiB,GAIjBS,IAAgB;AAEpB,SAASC,EAAc1C,CAAAA;IACtB,IAAA,KAAoBhW,MAAhBsY,GAAJ;QAIA,IAAI7V,IAAOuT,EAAO2C,CAAAA;QAClB,IAAA,KAAa3Y,MAATyC,KAAsBA,EAAKmW,CAAAA,KAAYN,GAAa;YAavD7V,IAAO;gBACNoW,GAAU;gBACVC,GAAS9C;gBACT+C,GAAaT,EAAY5B,CAAAA;gBACzBsC,GAAAA,KAAahZ;gBACb4Y,GAASN;gBACTW,GAAAA,KAAajZ;gBACbkZ,GAAAA,KAAalZ;gBACbmZ,GAAe1W;YAAAA;YAGhB,IAAA,KAA6BzC,MAAzBsY,EAAY5B,CAAAA,EACf4B,EAAY5B,CAAAA,CAASsC,CAAAA,GAAcvW;YAEpC6V,EAAY5B,CAAAA,GAAWjU;YACvBuT,EAAO2C,CAAAA,GAAQlW;YAIf,IAlKe,KAkKX6V,EAAYH,CAAAA,EACfnC,EAAOoD,CAAAA,CAAW3W;YAEnB,OAAOA;QACP,OAAUA,IAAAA,OAAAA,EAAKoW,CAAAA,EAAiB;YAEhCpW,EAAKoW,CAAAA,GAAW;YAehB,IAAA,KAAyB7Y,MAArByC,EAAKuW,CAAAA,EAA2B;gBACnCvW,EAAKuW,CAAAA,CAAYD,CAAAA,GAActW,EAAKsW,CAAAA;gBAEpC,IAAA,KAAyB/Y,MAArByC,EAAKsW,CAAAA,EACRtW,EAAKsW,CAAAA,CAAYC,CAAAA,GAAcvW,EAAKuW,CAAAA;gBAGrCvW,EAAKsW,CAAAA,GAAcT,EAAY5B,CAAAA;gBAC/BjU,EAAKuW,CAAAA,GAAAA,KAAchZ;gBAEnBsY,EAAY5B,CAAAA,CAAUsC,CAAAA,GAAcvW;gBACpC6V,EAAY5B,CAAAA,GAAWjU;YACvB;YAID,OAAOA;QACP;IAzEA;AA2EF;AAgEA,SAAS6S,EAAqBrU,CAAAA;IAC7BkC,IAAAA,CAAKkW,CAAAA,GAASpY;IACdkC,IAAAA,CAAK0V,CAAAA,GAAW;IAChB1V,IAAAA,CAAKwV,CAAAA,GAAAA,KAAQ3Y;IACbmD,IAAAA,CAAKmW,CAAAA,GAAAA,KAAWtZ;AACjB;AAEAsV,EAAOrM,SAAAA,CAAUsQ,KAAAA,GAAQ7B;AAEzBpC,EAAOrM,SAAAA,CAAUuQ,CAAAA,GAAW;IAC3B,OAAA,CACD;AAAA;AAEAlE,EAAOrM,SAAAA,CAAUmQ,CAAAA,GAAa,SAAU3W,CAAAA;IACvC,IAAIU,IAAAA,CAAKmW,CAAAA,KAAa7W,KAAAA,KAA6BzC,MAArByC,EAAKwW,CAAAA,EAA2B;QAC7DxW,EAAKyW,CAAAA,GAAc/V,IAAAA,CAAKmW,CAAAA;QACxB,IAAA,KAAsBtZ,MAAlBmD,IAAAA,CAAKmW,CAAAA,EACRnW,IAAAA,CAAKmW,CAAAA,CAASL,CAAAA,GAAcxW;QAE7BU,IAAAA,CAAKmW,CAAAA,GAAW7W;IAChB;AACF;AAEA6S,EAAOrM,SAAAA,CAAUwQ,CAAAA,GAAe,SAAUhX,CAAAA;IAEzC,IAAA,KAAsBzC,MAAlBmD,IAAAA,CAAKmW,CAAAA,EAAwB;QAChC,IAAMI,IAAOjX,EAAKwW,CAAAA,EACZhB,IAAOxV,EAAKyW,CAAAA;QAClB,IAAA,KAAalZ,MAAT0Z,GAAoB;YACvBA,EAAKR,CAAAA,GAAcjB;YACnBxV,EAAKwW,CAAAA,GAAAA,KAAcjZ;QACnB;QACD,IAAA,KAAaA,MAATiY,GAAoB;YACvBA,EAAKgB,CAAAA,GAAcS;YACnBjX,EAAKyW,CAAAA,GAAAA,KAAclZ;QACnB;QACD,IAAIyC,MAASU,IAAAA,CAAKmW,CAAAA,EACjBnW,IAAAA,CAAKmW,CAAAA,GAAWrB;IAEjB;AACF;AAEA3C,EAAOrM,SAAAA,CAAU0Q,SAAAA,GAAY,SAAUtB,CAAAA;IAAElE,IAAAA,IACxChR,IAAAA;IAAA,OAAOuQ,EAAO;QACb,IAAMzS,IAAQkT,EAAKlT,KAAAA,EAEbuX,IAAcF;QACpBA,IAAAA,KAActY;QACd,IAAA;YACCqY,EAAGpX;QAGH,SAFA;YACAqX,IAAcE;QACd;IACF;AACD;AAEAlD,EAAOrM,SAAAA,CAAU2Q,OAAAA,GAAU;IAC1B,OAAOzW,IAAAA,CAAKlC,KACb;AAAA;AAEAqU,EAAOrM,SAAAA,CAAU4Q,QAAAA,GAAW;IAC3B,OAAA,IAAA,CAAY5Y,KAAAA,GAAQ;AACrB;AAEAqU,EAAOrM,SAAAA,CAAU6Q,MAAAA,GAAS;IACzB,OAAW3W,IAAAA,CAAClC,KACb;AAAA;AAEAqU,EAAOrM,SAAAA,CAAUiM,IAAAA,GAAO;IACvB,IAAMsD,IAAcF;IACpBA,IAAAA,KAActY;IACd,IAAA;QACC,OAAOmD,IAAAA,CAAKlC,KAGZ;IAAA,SAFA;QACAqX,IAAcE;IACd;AACF;AAEApD,OAAO2E,cAAAA,CAAezE,EAAOrM,SAAAA,EAAW,SAAS;IAChDuM,KAAGA;QACF,IAAM/S,IAAOiW,EAAcvV,IAAAA;QAC3B,IAAA,KAAanD,MAATyC,GACHA,EAAKoW,CAAAA,GAAW1V,IAAAA,CAAK0V,CAAAA;QAEtB,OAAW1V,IAAAA,CAACkW,CACb;IAAA;IACAW,KAAAA,SAAkB/Y,CAAAA;QACjB,IAAIA,MAAUkC,IAAAA,CAAKkW,CAAAA,EAAQ;YAC1B,IAAIrB,IAAiB,KACpB,MAAM,IAAIiC,MAAM;YAGjB9W,IAAAA,CAAKkW,CAAAA,GAASpY;YACdkC,IAAAA,CAAK0V,CAAAA;YACLJ;YA7UFZ;YAgVE,IAAA;gBACC,IACC,IAAIpV,IAAOU,IAAAA,CAAKmW,CAAAA,EAAAA,KACPtZ,MAATyC,GACAA,IAAOA,EAAKyW,CAAAA,CAEZzW,EAAKmW,CAAAA,CAAQjF,CAAAA;YAId,SAFA;gBACAiE;YACA;QACD;IACF;AAAA;AAWK,SAAU5B,EAAU/U,CAAAA;IACzB,OAAW,IAAAqU,EAAOrU;AACnB;AAEA,SAASmX,EAAiB8B,CAAAA;IAIzB,IACC,IAAIzX,IAAOyX,EAAOxD,CAAAA,EAAAA,KACT1W,MAATyC,GACAA,IAAOA,EAAKuW,CAAAA,CAKZ,IACCvW,EAAKqW,CAAAA,CAAQD,CAAAA,KAAapW,EAAKoW,CAAAA,IAAAA,CAC9BpW,EAAKqW,CAAAA,CAAQU,CAAAA,MACd/W,EAAKqW,CAAAA,CAAQD,CAAAA,KAAapW,EAAKoW,CAAAA,EAE/B,OAAA,CAAA;IAKF,OAAA,CAAO;AACR;AAEA,SAASsB,EAAeD,CAAAA;IAavB,IACC,IAAIzX,IAAOyX,EAAOxD,CAAAA,EAAAA,KACT1W,MAATyC,GACAA,IAAOA,EAAKuW,CAAAA,CACX;QACD,IAAMoB,IAAe3X,EAAKqW,CAAAA,CAAQH,CAAAA;QAClC,IAAA,KAAqB3Y,MAAjBoa,GACH3X,EAAK0W,CAAAA,GAAgBiB;QAEtB3X,EAAKqW,CAAAA,CAAQH,CAAAA,GAAQlW;QACrBA,EAAKoW,CAAAA,GAAAA;QAEL,IAAA,KAAyB7Y,MAArByC,EAAKuW,CAAAA,EAA2B;YACnCkB,EAAOxD,CAAAA,GAAWjU;YAClB;QACA;IACD;AACF;AAEA,SAAS4X,EAAeH,CAAAA;IACvB,IAAIzX,IAAOyX,EAAOxD,CAAAA,EACd4D,IAAAA,KAAOta;IAOX,MAAA,KAAgBA,MAATyC,EAAoB;QAC1B,IAAMiX,IAAOjX,EAAKsW,CAAAA;QAUlB,IAAA,OAAItW,EAAKoW,CAAAA,EAAiB;YACzBpW,EAAKqW,CAAAA,CAAQW,CAAAA,CAAahX;YAE1B,IAAA,KAAazC,MAAT0Z,GACHA,EAAKV,CAAAA,GAAcvW,EAAKuW,CAAAA;YAEzB,IAAA,KAAyBhZ,MAArByC,EAAKuW,CAAAA,EACRvW,EAAKuW,CAAAA,CAAYD,CAAAA,GAAcW;QAEhC,OAWAY,IAAO7X;QAGRA,EAAKqW,CAAAA,CAAQH,CAAAA,GAAQlW,EAAK0W,CAAAA;QAC1B,IAAA,KAA2BnZ,MAAvByC,EAAK0W,CAAAA,EACR1W,EAAK0W,CAAAA,GAAAA,KAAgBnZ;QAGtByC,IAAOiX;IACP;IAEDQ,EAAOxD,CAAAA,GAAW4D;AACnB;AAcA,SAASC,EAAyBlC,CAAAA;IACjC/C,EAAO3U,IAAAA,CAAKwC,IAAAA,EAAAA,KAAMnD;IAElBmD,IAAAA,CAAKqX,CAAAA,GAAMnC;IACXlV,IAAAA,CAAKuT,CAAAA,GAAAA,KAAW1W;IAChBmD,IAAAA,CAAKsX,CAAAA,GAAiBhC,IAAgB;IACtCtV,IAAAA,CAAKgV,CAAAA,GA1gBW;AA2gBjB;AAEAoC,CAAAA,EAAStR,SAAAA,GAAY,IAAIqM,CAAAA,EAENkE,CAAAA,GAAW;IAC7BrW,IAAAA,CAAKgV,CAAAA,IAAAA;IAEL,IAphBe,IAohBXhV,IAAAA,CAAKgV,CAAAA,EACR,OAAA,CACA;IAKD,IAthBgB,MAshBIuC,CAAAA,KAAfvX,IAAAA,CAAKgV,CAAAA,AAAAA,GACT,OAAA,CAAO;IAERhV,IAAAA,CAAKgV,CAAAA,IAAAA;IAEL,IAAIhV,IAAAA,CAAKsX,CAAAA,KAAmBhC,GAC3B,OAAA,CAAO;IAERtV,IAAAA,CAAKsX,CAAAA,GAAiBhC;IAItBtV,IAAAA,CAAKgV,CAAAA,IAviBU;IAwiBf,IAAIhV,IAAAA,CAAK0V,CAAAA,GAAW,KAAA,CAAMT,EAAiBjV,IAAAA,GAAO;QACjDA,IAAAA,CAAKgV,CAAAA,IAAAA;QACL,OAAA,CAAO;IACP;IAED,IAAMK,IAAcF;IACpB,IAAA;QACC6B,EAAehX,IAAAA;QACfmV,IAAcnV,IAAAA;QACd,IAAMlC,IAAQkC,IAAAA,CAAKqX,CAAAA;QACnB,IA9iBgB,KA+iBfrX,IAAAA,CAAKgV,CAAAA,IACLhV,IAAAA,CAAKkW,CAAAA,KAAWpY,KACE,MAAlBkC,IAAAA,CAAK0V,CAAAA,EACJ;YACD1V,IAAAA,CAAKkW,CAAAA,GAASpY;YACdkC,IAAAA,CAAKgV,CAAAA,IAAAA;YACLhV,IAAAA,CAAK0V,CAAAA;QACL;IAKD,EAJC,OAAO7G,GAAAA;QACR7O,IAAAA,CAAKkW,CAAAA,GAASrH;QACd7O,IAAAA,CAAKgV,CAAAA,IAzjBW;QA0jBhBhV,IAAAA,CAAK0V,CAAAA;IACL;IACDP,IAAcE;IACd6B,EAAelX,IAAAA;IACfA,IAAAA,CAAKgV,CAAAA,IAAAA;IACL,OAAA,CACD;AAAA;AAEAoC,EAAStR,SAAAA,CAAUmQ,CAAAA,GAAa,SAAU3W,CAAAA;IACzC,IAAA,KAAsBzC,MAAlBmD,IAAAA,CAAKmW,CAAAA,EAAwB;QAChCnW,IAAAA,CAAKgV,CAAAA,IAAUuC;QAIf,IACC,IAAIjY,IAAOU,IAAAA,CAAKuT,CAAAA,EAAAA,KACP1W,MAATyC,GACAA,IAAOA,EAAKuW,CAAAA,CAEZvW,EAAKqW,CAAAA,CAAQM,CAAAA,CAAW3W;IAEzB;IACD6S,EAAOrM,SAAAA,CAAUmQ,CAAAA,CAAWzY,IAAAA,CAAKwC,IAAAA,EAAMV;AACxC;AAEA8X,EAAStR,SAAAA,CAAUwQ,CAAAA,GAAe,SAAUhX,CAAAA;IAE3C,IAAA,KAAsBzC,MAAlBmD,IAAAA,CAAKmW,CAAAA,EAAwB;QAChChE,EAAOrM,SAAAA,CAAUwQ,CAAAA,CAAa9Y,IAAAA,CAAKwC,IAAAA,EAAMV;QAIzC,IAAA,KAAsBzC,MAAlBmD,IAAAA,CAAKmW,CAAAA,EAAwB;YAChCnW,IAAAA,CAAKgV,CAAAA,IAAAA;YAEL,IACC,IAAI1V,IAAOU,IAAAA,CAAKuT,CAAAA,EAAAA,KACP1W,MAATyC,GACAA,IAAOA,EAAKuW,CAAAA,CAEZvW,EAAKqW,CAAAA,CAAQW,CAAAA,CAAahX;QAE3B;IACD;AACF;AAEA8X,EAAStR,SAAAA,CAAU0K,CAAAA,GAAU;IAC5B,IAAA,CA5mBgB,CAAA,IA4mBVxQ,IAAAA,CAAKgV,CAAAA,AAAAA,GAAoB;QAC9BhV,IAAAA,CAAKgV,CAAAA,IAAUuC;QAEf,IACC,IAAIjY,IAAOU,IAAAA,CAAKmW,CAAAA,EAAAA,KACPtZ,MAATyC,GACAA,IAAOA,EAAKyW,CAAAA,CAEZzW,EAAKmW,CAAAA,CAAQjF,CAAAA;IAEd;AACF;AAEAyB,OAAO2E,cAAAA,CAAeQ,EAAStR,SAAAA,EAAW,SAAS;IAClDuM,KAAAA;QACC,IA5nBc,IA4nBVrS,IAAAA,CAAKgV,CAAAA,EACR,MAAM,IAAI8B,MAAM;QAEjB,IAAMxX,IAAOiW,EAAcvV,IAAAA;QAC3BA,IAAAA,CAAKqW,CAAAA;QACL,IAAA,KAAaxZ,MAATyC,GACHA,EAAKoW,CAAAA,GAAW1V,IAAAA,CAAK0V,CAAAA;QAEtB,IAhoBgB,KAgoBZ1V,IAAAA,CAAKgV,CAAAA,EACR,MAAMhV,IAAAA,CAAKkW,CAAAA;QAEZ,OAAOlW,IAAAA,CAAKkW,CACb;IAAA;AAAA;AA0BD,SAAS1E,EAAY0D,CAAAA;IACpB,OAAW,IAAAkC,EAASlC;AACrB;AAEA,SAASsC,EAAcjH,CAAAA;IACtB,IAAMT,IAAUS,EAAOkH,CAAAA;IACvBlH,EAAOkH,CAAAA,GAAAA,KAAW5a;IAElB,IAAuB,cAAA,OAAZiT,GAAwB;QA1oBnC4E;QA8oBC,IAAMW,IAAcF;QACpBA,IAAAA,KAActY;QACd,IAAA;YACCiT;QASA,EARC,OAAOjB,GAAAA;YACR0B,EAAOyE,CAAAA,IAAAA;YACPzE,EAAOyE,CAAAA,IAjrBO;YAkrBd0C,EAAcnH;YACd,MAAM1B;QACN,SAAA;YACAsG,IAAcE;YACdZ;QACA;IACD;AACF;AAEA,SAASiD,EAAcnH,CAAAA;IACtB,IACC,IAAIjR,IAAOiR,EAAOgD,CAAAA,EAAAA,KACT1W,MAATyC,GACAA,IAAOA,EAAKuW,CAAAA,CAEZvW,EAAKqW,CAAAA,CAAQW,CAAAA,CAAahX;IAE3BiR,EAAO8G,CAAAA,GAAAA,KAAMxa;IACb0T,EAAOgD,CAAAA,GAAAA,KAAW1W;IAElB2a,EAAcjH;AACf;AAEA,SAASoH,EAAwBtC,CAAAA;IAChC,IAAIF,MAAgBnV,IAAAA,EACnB,MAAA,IAAU8W,MAAM;IAEjBI,EAAelX,IAAAA;IACfmV,IAAcE;IAEdrV,IAAAA,CAAKgV,CAAAA,IAAAA;IACL,IAjtBgB,IAitBZhV,IAAAA,CAAKgV,CAAAA,EACR0C,EAAc1X,IAAAA;IAEfyU;AACD;AAmBA,SAASmD,EAAqB1C,CAAAA;IAC7BlV,IAAAA,CAAKqX,CAAAA,GAAMnC;IACXlV,IAAAA,CAAKyX,CAAAA,GAAAA,KAAW5a;IAChBmD,IAAAA,CAAKuT,CAAAA,GAAAA,KAAW1W;IAChBmD,IAAAA,CAAK+U,CAAAA,GAAAA,KAAqBlY;IAC1BmD,IAAAA,CAAKgV,CAAAA,GA3uBW;AA4uBjB;AAEA4C,EAAO9R,SAAAA,CAAU0M,CAAAA,GAAY;IAC5B,IAAMqF,IAAS7X,IAAAA,CAAK6Q,CAAAA;IACpB,IAAA;QACC,IAnvBe,IAmvBX7Q,IAAAA,CAAKgV,CAAAA,EAAmB;QAC5B,IAAA,KAAiBnY,MAAbmD,IAAAA,CAAKqX,CAAAA,EAAmB;QAE5B,IAAMvH,IAAU9P,IAAAA,CAAKqX,CAAAA;QACrB,IAAuB,cAAA,OAAZvH,GACV9P,IAAAA,CAAKyX,CAAAA,GAAW3H;IAIjB,SAFA;QACA+H;IACA;AACF;AAEAD,EAAO9R,SAAAA,CAAU+K,CAAAA,GAAS;IACzB,IAnwBe,IAmwBX7Q,IAAAA,CAAKgV,CAAAA,EACR,MAAA,IAAU8B,MAAM;IAEjB9W,IAAAA,CAAKgV,CAAAA,IAtwBU;IAuwBfhV,IAAAA,CAAKgV,CAAAA,IAAAA;IACLwC,EAAcxX,IAAAA;IACdgX,EAAehX,IAAAA;IAzuBf0U;IA4uBA,IAAMW,IAAcF;IACpBA,IAAcnV,IAAAA;IACd,OAAO2X,EAAU5M,IAAAA,CAAK/K,IAAAA,EAAMqV;AAC7B;AAEAuC,EAAO9R,SAAAA,CAAU0K,CAAAA,GAAU;IAC1B,IAAA,CAjxBgB,CAAA,IAixBVxQ,IAAAA,CAAKgV,CAAAA,AAAAA,GAAoB;QAC9BhV,IAAAA,CAAKgV,CAAAA,IAlxBU;QAmxBfhV,IAAAA,CAAK+U,CAAAA,GAAqBH;QAC1BA,IAAgB5U,IAChB;IAAA;AACF;AAEA4X,EAAO9R,SAAAA,CAAUgM,CAAAA,GAAW;IAC3B9R,IAAAA,CAAKgV,CAAAA,IAvxBW;IAyxBhB,IAAA,CA5xBe,CAAA,IA4xBThV,IAAAA,CAAKgV,CAAAA,AAAAA,GACV0C,EAAc1X,IAAAA;AAEhB;AAeA,SAASuQ,EAAO2E,CAAAA;IACf,IAAM3E,IAAS,IAAIqH,EAAO1C;IAC1B,IAAA;QACC3E,EAAOiC,CAAAA;IAIP,EAHC,OAAO3D,GAAAA;QACR0B,EAAOuB,CAAAA;QACP,MAAMjD;IACN;IAGD,OAAO0B,EAAOuB,CAAAA,CAAS/G,IAAAA,CAAKwF;AAC7B;;;;;kDCrzBa;sDAuBA;AA0Gb,0DAA0D;AAC1D,mDAAS;A;AA1IT;AACA;AACA;AAMO,MAAM,eAAe,CAAA,GAAA,eAAM,AAAN,EAAO,CAAA,GAAA,uCAAoB,AAApB,IAAuB,kBAAkB;AAE5E;;;;CAIG,GACH,SAAS,cAAc,GAAW;IAChC,OAAO,QAAQ,QAAQ,IAAI,UAAU,CAAC,aAAa,IAAI,MAAM,GAAG;AAClE;AAcO,MAAM,mBAA6D,CAAC,EACzE,oBAAoB,OAAO,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,YAAY,EACnE;IACC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS,aAAa,KAAK;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,eAAQ,AAAR,EAA4C;IAClF,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAyC;IAE3E,4FAA4F;IAC5F,kEAAkE;IAClE,CAAA,GAAA,gBAAS,AAAT,EAAU;QACR,MAAM,mBAAmB,CAAA,GAAA,uCAAoB,AAApB,IAAuB,kBAAkB;QAClE,YAAY;QAEZ,oFAAoF;QACpF,IAAI,aAAa,KAAK,KAAK,kBACzB,aAAa,KAAK,GAAG;QAGvB,4DAA4D;QAC5D,IAAI,qBAAqB,CAAA,GAAA,4CAAyB,AAAzB,KAA6B;YACpD,QAAQ,GAAG,CAAC;YACZ,aAAa,UAAU,CAAC;YACxB,aAAa,KAAK,GAAG,CAAA,GAAA,uCAAoB,AAApB,IAAuB,kBAAkB;QAChE;IACF,GAAG,EAAE,GAAG,qDAAqD;IAE7D,oGAAoG;IACpG,CAAA,GAAA,gBAAS,AAAT,EAAU;QACR,YAAY,aAAa,KAAK;IAChC,GAAG;QAAC,aAAa,KAAK;KAAC;IAEvB;;;KAGG,GACH,MAAM,aAAa;QACjB,MAAM,UAAU,CAAA,GAAA,gCAAa,AAAb,EAAc;QAE9B,IAAI,SAAS;YACX,0DAA0D;YAC1D,aAAa,KAAK,GAAG,CAAA,GAAA,uCAAoB,AAApB,IAAuB,kBAAkB;YAC9D,eAAe;YACf,WAAW;QACb,OAAO;YACL,eAAe;YACf,WAAW;QACb;QAEA,oCAAoC;QACpC,WAAW,IAAM,WAAW,KAAK;IACnC;IAEA,MAAM,eACJ,gBAAgB,YAAY,mBAC5B,gBAAgB,UAAU,iBAC1B,gBAAgB,SAAS,kBAAkB;IAE7C,sEAAsE;IACtE,IAAI,mBACF,OAAO;IAGT,OACE,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;QAAK,WAAU;QAAiE,UAAA;YAC9E,CAAA,GAAA,eAAA,AAAA,EAAA,MAAA;gBAAI,WAAU;gBAAgD,UAAA;YAAA;YAC9D,CAAA,GAAA,eAAA,AAAA,EAAA,SAAA;gBAAO,SAAQ;gBAAgB,WAAU;gBAAgC,UAAA;YAAA;YACzE,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;gBAAK,WAAU;gBAAiC,UAAA;oBAC9C,CAAA,GAAA,eAAA,AAAA,EAAA,SAAA;wBACE,IAAG;wBACH,MAAK;wBACL,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,SAAS,CAAC,IAAM,YAAa,EAAE,MAA2B,CAAC,KAAK;wBAAC,cACtD;oBAA0B;oBAEvC,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;wBACE,SAAS;wBACT,WAAU;wBAAiN,cAChN;wBAAc,UAAA;oBAAA;iBAGlB;YAAA;YAEX,CAAA,GAAA,gBAAA,AAAA,EAAA,KAAA;gBAAG,WAAU;gBAA6C,UAAA;oBACvD,CAAA,GAAA,4CAAyB,AAAzB,MACG,iCACA;oBACH,CAAC,CAAA,GAAA,4CAAyB,AAAzB,OACA,CAAA,GAAA,eAAA,AAAA,EAAA,KAAA;wBACE,MAAK;wBACL,QAAO;wBACP,KAAI;wBACJ,WAAU;wBAA6G,cAC5G;wBAA0B,UAAA;oBAAA;iBAGnC;YAAA;YAGP,WAAW,CAAA,GAAA,eAAA,AAAA,EAAA,KAAA;gBAAG,WAAW,CAAA,aAAA,EAAgB,cAAc;gBAAE,MAAK;gBAAQ,UAAE;YAAO;SAAK;IAAA;AAG3F;;;;;oDCjIa;A;AANb;AAMO,MAAM,iBAAyD,CAAC,EAAE,OAAO,EAAE;IAChF,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,eAAQ,AAAR,EAAS;IACvC,MAAM,iBAAiB,CAAA,GAAA,aAAM,AAAN,EAA0B;IAEjD,kEAAkE;IAClE,CAAA,GAAA,gBAAS,AAAT,EAAU;QACR,IAAI,WAAW,eAAe,OAAO,EACnC,eAAe,OAAO,CAAC,KAAK;QAG9B,gDAAgD;QAChD,MAAM,eAAe,CAAC;YACpB,IAAI,CAAC,WAAW,EAAE,GAAG,KAAK,OAAO;YAEjC,gDAAgD;YAChD,MAAM,QAAQ,SAAS,aAAa,CAAC;YACrC,IAAI,CAAC,OAAO;YAEZ,MAAM,oBAAoB,MAAM,gBAAgB,CAAC;YACjD,MAAM,eAAe,iBAAiB,CAAC,EAAiB;YACxD,MAAM,cAAc,iBAAiB,CAAC,kBAAkB,MAAM,GAAG,EAAiB;YAElF,IAAI,EAAE,QAAQ,EACZ,kDAAkD;YAClD;gBAAA,IAAI,SAAS,aAAa,KAAK,cAAc;oBAC3C,EAAE,cAAc;oBAChB,YAAY,KAAK;gBACnB;YAAA,OAEA,4CAA4C;YAC5C,IAAI,SAAS,aAAa,KAAK,aAAa;gBAC1C,EAAE,cAAc;gBAChB,aAAa,KAAK;YACpB;QAEJ;QAEA,uCAAuC;QACvC,MAAM,kBAAkB,CAAC;YACvB,IAAI,WAAW,EAAE,GAAG,KAAK,UACvB;QAEJ;QAEA,SAAS,gBAAgB,CAAC,WAAW;QACrC,SAAS,gBAAgB,CAAC,WAAW;QAErC,OAAO;YACL,SAAS,mBAAmB,CAAC,WAAW;YACxC,SAAS,mBAAmB,CAAC,WAAW;QAC1C;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,cAAc;QAClB,WAAW;QACX;IACF;IAEA,8BAA8B;IAC9B,IAAI,CAAC,SAAS,OAAO;IAErB,OACE,CAAA,GAAA,eAAA,AAAA,EAAA,OAAA;QACE,IAAG;QACH,WAAU;QACV,MAAK;QAAQ,cACF;QAAM,mBACD;QAChB,SAAS,CAAC;YACR,oEAAoE;YACpE,IAAK,EAAE,MAAsB,CAAC,EAAE,KAAK,mBACnC;QAEJ;QAAC,UAED,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;YACE,IAAG;YACH,WAAU;YACV,SAAS,CAAC,IAAM,EAAE,eAAe;YAAE,UAAA;gBAEnC,CAAA,GAAA,eAAA,AAAA,EAAA,MAAA;oBACE,IAAG;oBACH,WAAU;oBAA6E,UAAA;gBAAA;gBAKzF,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;oBAAK,WAAU;oBAAyD,UAAA;wBACtE,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;4BAAK,WAAU;4BAAM,UAAA;gCACnB,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;oCAAQ,WAAU;oCAAS,UAAA;gCAAA;gCAC3B,CAAA,GAAA,gBAAA,AAAA,EAAA,MAAA;oCAAI,WAAU;oCAA4B,UAAA;wCACxC,CAAA,GAAA,eAAA,AAAA,EAAA,MAAA;4CAAA,UAAA;wCAAA;wCACA,CAAA,GAAA,eAAA,AAAA,EAAA,MAAA;4CAAA,UAAA;wCAAA;wCACA,CAAA,GAAA,eAAA,AAAA,EAAA,MAAA;4CAAA,UAAA;wCAAA;qCAA8C;gCAAA;6BAC3C;wBAAA;wBAGP,CAAA,GAAA,gBAAA,AAAA,EAAA,OAAA;4BAAA,UAAA;gCACE,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;oCAAQ,WAAU;oCAAS,UAAA;gCAAA;gCAC3B,CAAA,GAAA,gBAAA,AAAA,EAAA,MAAA;oCAAI,WAAU;oCAAsD,UAAA;wCAClE,CAAA,GAAA,gBAAA,AAAA,EAAA,MAAA;4CAAI,WAAU;4CAAmB,UAAA;gDAC/B,CAAA,GAAA,eAAA,AAAA,EAAA,QAAA;oDAAM,WAAU;gDAA6B;gDAC7C,CAAA,GAAA,gBAAA,AAAA,EAAA,QAAA;oDAAA,UAAA;wDAAM,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;4DAAA,UAAA;wDAAA;wDAAuB;qDAAA;gDAAA;6CAAyB;wCAAA;wCAExD,CAAA,GAAA,gBAAA,AAAA,EAAA,MAAA;4CAAI,WAAU;4CAAmB,UAAA;gDAC/B,CAAA,GAAA,eAAA,AAAA,EAAA,QAAA;oDAAM,WAAU;gDAA6B;gDAC7C,CAAA,GAAA,gBAAA,AAAA,EAAA,QAAA;oDAAA,UAAA;wDAAM,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;4DAAA,UAAA;wDAAA;wDAAwB;qDAAA;gDAAA;6CAA0B;wCAAA;wCAE1D,CAAA,GAAA,gBAAA,AAAA,EAAA,MAAA;4CAAI,WAAU;4CAAmB,UAAA;gDAC/B,CAAA,GAAA,eAAA,AAAA,EAAA,QAAA;oDAAM,WAAU;gDAA6B;gDAC7C,CAAA,GAAA,gBAAA,AAAA,EAAA,QAAA;oDAAA,UAAA;wDAAM,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;4DAAA,UAAA;wDAAA;wDAAyB;qDAAA;gDAAA;6CAA6B;wCAAA;wCAE9D,CAAA,GAAA,gBAAA,AAAA,EAAA,MAAA;4CAAI,WAAU;4CAAmB,UAAA;gDAC/B,CAAA,GAAA,eAAA,AAAA,EAAA,QAAA;oDAAM,WAAU;gDAA6B;gDAC7C,CAAA,GAAA,gBAAA,AAAA,EAAA,QAAA;oDAAA,UAAA;wDAAM,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;4DAAA,UAAA;wDAAA;wDAAsB;qDAAA;gDAAA;6CAA0B;wCAAA;qCACnD;gCAAA;6BACF;wBAAA;qBACD;gBAAA;gBAGR,CAAA,GAAA,eAAA,AAAA,EAAA,OAAA;oBAAK,WAAU;oBAAa,UAC1B,CAAA,GAAA,eAAA,AAAA,EAAA,UAAA;wBACE,KAAK;wBACL,IAAG;wBACH,WAAU;wBAA+O,cAC9O;wBACX,SAAS,CAAC;4BACR,EAAE,cAAc;4BAChB;wBACF;wBACA,WAAW,CAAC;4BACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;gCACtC,EAAE,cAAc;gCAChB;4BACF;wBACF;wBAAC,UAAA;oBAAA;gBAGM;aACL;QAAA;IACF;AAGZ","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-9ef19b68c8a46cd8.js","src/app.tsx","node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","node_modules/preact/jsx-runtime/src/utils.js","node_modules/preact/src/constants.js","node_modules/preact/jsx-runtime/src/index.js","node_modules/preact/dist/preact.module.js","node_modules/preact/src/util.js","node_modules/preact/src/options.js","node_modules/preact/src/create-element.js","node_modules/preact/src/component.js","node_modules/preact/src/diff/props.js","node_modules/preact/src/create-context.js","node_modules/preact/src/diff/children.js","node_modules/preact/src/diff/index.js","node_modules/preact/src/render.js","node_modules/preact/src/clone-element.js","node_modules/preact/src/diff/catch-error.js","node_modules/preact/hooks/dist/hooks.module.js","node_modules/preact/hooks/src/index.js","src/components/settings/SettingsFooter.tsx","src/components/settings/QueryOptions.tsx","node_modules/@preact/signals/dist/signals.module.js","node_modules/@preact/signals/src/index.ts","node_modules/@preact/signals-core/dist/signals-core.module.js","node_modules/@preact/signals-core/src/index.ts","src/components/settings/ApiConfiguration.tsx","src/components/welcome/WelcomeOverlay.tsx"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SERVER_PORT = 1234;var HMR_SECURE = false;var HMR_ENV_HASH = \"439701173a9199ea\";var HMR_USE_SSE = false;module.bundle.HMR_BUNDLE_ID = \"5dc6182799b9cdd5\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_SERVER_PORT, HMR_ENV_HASH, HMR_SECURE, HMR_USE_SSE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_SERVER_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var HMR_USE_SSE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */,\n  disposedAssets /*: {|[string]: boolean|} */,\n  assetsToDispose /*: Array<[ParcelRequire, string]> */,\n  assetsToAccept /*: Array<[ParcelRequire, string]> */,\n  bundleNotFound = false;\nfunction getHostname() {\n  return HMR_HOST || (typeof location !== 'undefined' && location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || (typeof location !== 'undefined' ? location.port : HMR_SERVER_PORT);\n}\n\n// eslint-disable-next-line no-redeclare\nlet WebSocket = globalThis.WebSocket;\nif (!WebSocket && typeof module.bundle.root === 'function') {\n  try {\n    // eslint-disable-next-line no-global-assign\n    WebSocket = module.bundle.root('ws');\n  } catch {\n    // ignore.\n  }\n}\nvar hostname = getHostname();\nvar port = getPort();\nvar protocol = HMR_SECURE || typeof location !== 'undefined' && location.protocol === 'https:' && !['localhost', '127.0.0.1', '0.0.0.0'].includes(hostname) ? 'wss' : 'ws';\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif (!parent || !parent.isParcelRequire) {\n  // Web extension context\n  var extCtx = typeof browser === 'undefined' ? typeof chrome === 'undefined' ? null : chrome : browser;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n  var ws;\n  if (HMR_USE_SSE) {\n    ws = new EventSource('/__parcel_hmr');\n  } else {\n    try {\n      // If we're running in the dev server's node runner, listen for messages on the parent port.\n      let {\n        workerData,\n        parentPort\n      } = module.bundle.root('node:worker_threads') /*: any*/;\n      if (workerData !== null && workerData !== void 0 && workerData.__parcel) {\n        parentPort.on('message', async message => {\n          try {\n            await handleMessage(message);\n            parentPort.postMessage('updated');\n          } catch {\n            parentPort.postMessage('restart');\n          }\n        });\n\n        // After the bundle has finished running, notify the dev server that the HMR update is complete.\n        queueMicrotask(() => parentPort.postMessage('ready'));\n      }\n    } catch {\n      if (typeof WebSocket !== 'undefined') {\n        try {\n          ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n        } catch (err) {\n          // Ignore cloudflare workers error.\n          if (err.message && !err.message.includes('Disallowed operation called within global scope')) {\n            console.error(err.message);\n          }\n        }\n      }\n    }\n  }\n  if (ws) {\n    // $FlowFixMe\n    ws.onmessage = async function (event /*: {data: string, ...} */) {\n      var data /*: HMRMessage */ = JSON.parse(event.data);\n      await handleMessage(data);\n    };\n    if (ws instanceof WebSocket) {\n      ws.onerror = function (e) {\n        if (e.message) {\n          console.error(e.message);\n        }\n      };\n      ws.onclose = function () {\n        console.warn('[parcel]  Connection to the HMR server was lost');\n      };\n    }\n  }\n}\nasync function handleMessage(data /*: HMRMessage */) {\n  checkedAssets = {} /*: {|[string]: boolean|} */;\n  disposedAssets = {} /*: {|[string]: boolean|} */;\n  assetsToAccept = [];\n  assetsToDispose = [];\n  bundleNotFound = false;\n  if (data.type === 'reload') {\n    fullReload();\n  } else if (data.type === 'update') {\n    // Remove error overlay if there is one\n    if (typeof document !== 'undefined') {\n      removeErrorOverlay();\n    }\n    let assets = data.assets;\n\n    // Handle HMR Update\n    let handled = assets.every(asset => {\n      return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n    });\n\n    // Dispatch a custom event in case a bundle was not found. This might mean\n    // an asset on the server changed and we should reload the page. This event\n    // gives the client an opportunity to refresh without losing state\n    // (e.g. via React Server Components). If e.preventDefault() is not called,\n    // we will trigger a full page reload.\n    if (handled && bundleNotFound && assets.some(a => a.envHash !== HMR_ENV_HASH) && typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n      handled = !window.dispatchEvent(new CustomEvent('parcelhmrreload', {\n        cancelable: true\n      }));\n    }\n    if (handled) {\n      console.clear();\n\n      // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n      if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n        window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n      }\n      await hmrApplyUpdates(assets);\n      hmrDisposeQueue();\n\n      // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n      let processedAssets = {};\n      for (let i = 0; i < assetsToAccept.length; i++) {\n        let id = assetsToAccept[i][1];\n        if (!processedAssets[id]) {\n          hmrAccept(assetsToAccept[i][0], id);\n          processedAssets[id] = true;\n        }\n      }\n    } else fullReload();\n  }\n  if (data.type === 'error') {\n    // Log parcel errors to console\n    for (let ansiDiagnostic of data.diagnostics.ansi) {\n      let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n      console.error(' [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n    }\n    if (typeof document !== 'undefined') {\n      // Render the fancy html overlay\n      removeErrorOverlay();\n      var overlay = createErrorOverlay(data.diagnostics.html);\n      // $FlowFixMe\n      document.body.appendChild(overlay);\n    }\n  }\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel]  Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"${protocol === 'wss' ? 'https' : 'http'}://${hostname}:${port}/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n           ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div> ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div> <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if (typeof location !== 'undefined' && 'reload' in location) {\n    location.reload();\n  } else if (typeof extCtx !== 'undefined' && extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  } else {\n    try {\n      let {\n        workerData,\n        parentPort\n      } = module.bundle.root('node:worker_threads') /*: any*/;\n      if (workerData !== null && workerData !== void 0 && workerData.__parcel) {\n        parentPort.postMessage('restart');\n      }\n    } catch (err) {\n      console.error('[parcel]  An HMR update was not accepted. Please restart the process.');\n    }\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout || typeof document === 'undefined') {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 || _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension fix\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3 && typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n            extCtx.runtime.reload();\n            return;\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 || _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    }\n\n    // Always traverse to the parent bundle, even if we already replaced the asset in this bundle.\n    // This is required in case modules are duplicated. We need to ensure all instances have the updated code.\n    if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  checkedAssets = {};\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else if (a !== null) {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      bundleNotFound = true;\n      return true;\n    }\n    return hmrAcceptCheckOne(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return null;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  if (!cached) {\n    return true;\n  }\n  assetsToDispose.push([bundle, id]);\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n  return false;\n}\nfunction hmrDisposeQueue() {\n  // Dispose all old assets.\n  for (let i = 0; i < assetsToDispose.length; i++) {\n    let id = assetsToDispose[i][1];\n    if (!disposedAssets[id]) {\n      hmrDispose(assetsToDispose[i][0], id);\n      disposedAssets[id] = true;\n    }\n  }\n  assetsToDispose = [];\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    let assetsToAlsoAccept = [];\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      let additionalAssets = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (Array.isArray(additionalAssets) && additionalAssets.length) {\n        assetsToAlsoAccept.push(...additionalAssets);\n      }\n    });\n    if (assetsToAlsoAccept.length) {\n      let handled = assetsToAlsoAccept.every(function (a) {\n        return hmrAcceptCheck(a[0], a[1]);\n      });\n      if (!handled) {\n        return fullReload();\n      }\n      hmrDisposeQueue();\n    }\n  }\n}","import { h, render } from 'preact';\nimport { useEffect, useState } from 'preact/hooks';\nimport { SettingsFooter } from './components/settings/SettingsFooter';\nimport { WelcomeOverlay } from './components/welcome/WelcomeOverlay';\nimport { apiKeySignal } from './components/settings/ApiConfiguration';\nimport { categorySignal, authorSignal, centurySignal } from './components/settings/QueryOptions';\nimport { startRound } from './services/gameLogic';\n\nconsole.log(\"APP.TSX: Script loading\");\n\n// Determine if this is a remote interface (GitHub Pages)\nconst isRemoteInterface = window.location.hostname.includes('github.io');\n\n// Function to start the game round \nconst startGameRound = (forceNewPassage = true) => {\n  console.log(\"APP.TSX: startGameRound called\", { forceNewPassage });\n  \n  // Show loading state in the game area\n  const gameArea = document.getElementById('game-area');\n  if (gameArea) {\n    gameArea.innerHTML = `\n      <div class=\"flex flex-col items-center justify-center p-8 text-center\" aria-live=\"polite\">\n        <p class=\"text-lg typewriter-text mb-3\">Fetching new passage...</p>\n        <p class=\"text-sm opacity-70 mb-4\">*click* *clack* *ding*</p>\n        <div role=\"status\" aria-label=\"Loading passage\" class=\"relative h-2 w-48 bg-aged-paper-dark overflow-hidden rounded-full\">\n          <div class=\"absolute top-0 left-0 h-full bg-typewriter-ribbon animate-pulse rounded-full\" style=\"width: 30%\"></div>\n        </div>\n      </div>\n    `;\n  }\n  \n  // Call startRound from gameLogic.ts\n  try {\n    if (typeof window !== 'undefined' && typeof (window as any).startRound === 'function') {\n      (window as any).startRound(forceNewPassage);\n    } else {\n      startRound(forceNewPassage);\n    }\n    console.log(\"APP.TSX: startRound call completed successfully\");\n  } catch (error) {\n    console.error(\"APP.TSX: Error in startRound:\", error);\n    \n    // Show error state in the game area\n    if (gameArea) {\n      gameArea.innerHTML = `\n        <div class=\"text-center p-6\" aria-live=\"assertive\">\n          <p class=\"text-lg typewriter-text text-red-600 mb-2\">Oops! We couldn't fetch a passage.</p>\n          <p class=\"typewriter-text mb-4\">Please try again later or check your connection.</p>\n          <button \n            id=\"retry-btn\" \n            class=\"px-4 py-2 bg-typewriter-ink text-aged-paper rounded hover:bg-opacity-80 focus:ring-2 focus:ring-typewriter-ribbon focus:outline-none\"\n            onclick=\"window.startRound(true)\"\n          >\n            Try Again\n          </button>\n        </div>\n      `;\n    }\n  }\n};\n\n// Main application component\nconst App = () => {\n  // Start with welcome hidden in remote interface for better UX flow\n  const [showWelcome, setShowWelcome] = useState(!isRemoteInterface);\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\n\n  // Auto-start with fetching a passage in remote interfaces\n  useEffect(() => {\n    if (isRemoteInterface && isFirstLoad) {\n      setIsFirstLoad(false);\n      // Small delay to ensure DOM is ready\n      setTimeout(() => {\n        startGameRound(true);\n      }, 100);\n    }\n  }, [isRemoteInterface, isFirstLoad]);\n\n  // Listen to settings changes\n  useEffect(() => {\n    const handleSettingsChange = () => {\n      // Log settings changes\n      console.log(\"Settings changed:\", {\n        apiKey: apiKeySignal.value ? \"Key set\" : \"No key\",\n        category: categorySignal.value,\n        author: authorSignal.value,\n        century: centurySignal.value\n      });\n    };\n    \n    // Set up listeners for signals\n    const unsubscribeApiKey = apiKeySignal.subscribe(handleSettingsChange);\n    const unsubscribeCategory = categorySignal.subscribe(handleSettingsChange);\n    const unsubscribeAuthor = authorSignal.subscribe(handleSettingsChange);\n    const unsubscribeCentury = centurySignal.subscribe(handleSettingsChange);\n    \n    return () => {\n      unsubscribeApiKey();\n      unsubscribeCategory();\n      unsubscribeAuthor();\n      unsubscribeCentury();\n    };\n  }, []);\n  \n  const handleWelcomeStart = () => {\n    setShowWelcome(false);\n    startGameRound(true);\n  };\n\n  return (\n    <>\n      {showWelcome && <WelcomeOverlay onStart={handleWelcomeStart} />}\n    </>\n  );\n};\n\n// Render the App component\nrender(<App />, document.getElementById('app') || document.body);\n\n// Render the SettingsFooter component\nconst settingsFooterContainer = document.getElementById('settings-footer-container');\nif (settingsFooterContainer) {\n  render(<SettingsFooter isRemoteInterface={isRemoteInterface} />, settingsFooterContainer);\n} else {\n  console.error('Settings footer container not found!');\n}\n",null,"const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n","/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (typeof normalizedProps[i] === 'undefined') {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + str + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities(value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n",null,"import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] == UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor == UNDEFINED;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n","import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (\n\t\t\tname.toLowerCase() in dom ||\n\t\t\tname == 'onFocusOut' ||\n\t\t\tname == 'onFocusIn'\n\t\t)\n\t\t\tname = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n","import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tif (\n\t\t\tchildVNode._flags & INSERT_VNODE ||\n\t\t\toldVNode._children === childVNode._children\n\t\t) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor == UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = NULL;\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (oldDom && parentVNode.type && !parentDom.contains(oldDom)) {\n\t\t\toldDom = getDomSibling(parentVNode);\n\t\t}\n\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren >\n\t\t(oldVNode != NULL && (oldVNode._flags & MATCHED) == 0 ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && childVNode.key == null) ||\n\t\t(oldVNode &&\n\t\t\tkey == oldVNode.key &&\n\t\t\ttype == oldVNode.type &&\n\t\t\t(oldVNode._flags & MATCHED) == 0)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tif (x >= 0) {\n\t\t\t\toldVNode = oldChildren[x];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype == oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn x;\n\t\t\t\t}\n\t\t\t\tx--;\n\t\t\t}\n\n\t\t\tif (y < oldChildren.length) {\n\t\t\t\toldVNode = oldChildren[y];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype == oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn y;\n\t\t\t\t}\n\t\t\t\ty++;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n","import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor != UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original == oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n","import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] == UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n","import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n",null,"import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","import { h, FunctionComponent } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { QueryOptions } from './QueryOptions';\n\ninterface SettingsFooterProps {\n  isRemoteInterface?: boolean;\n}\n\nexport const SettingsFooter: FunctionComponent<SettingsFooterProps> = ({ \n  isRemoteInterface = window.location.hostname.includes('github.io') \n}) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isRendered, setIsRendered] = useState(false);\n\n  // Handle initial render to prevent content flash\n  useEffect(() => {\n    setIsRendered(true);\n  }, []);\n\n  const toggleExpanded = () => {\n    setIsExpanded(!isExpanded);\n  };\n\n  return (\n    <div className={`settings-footer ${isExpanded ? 'expanded' : ''}`} role=\"region\" aria-label=\"Game settings\">\n      <div \n        className=\"settings-header minimalist-header\" \n        onClick={toggleExpanded}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            toggleExpanded();\n          }\n        }}\n        tabIndex={0}\n        role=\"button\"\n        aria-expanded={isExpanded}\n        aria-controls=\"settings-content\"\n      >\n        <span className=\"settings-icon\">\n          {isExpanded ? '' : ''} \n          <span className=\"px-1\">Search & Settings</span>\n        </span>\n      </div>\n      \n      <div \n        id=\"settings-content\"\n        className=\"settings-content\"\n        style={{ \n          maxHeight: isExpanded ? '500px' : '0',\n          opacity: isExpanded ? '1' : '0',\n          visibility: isExpanded ? 'visible' : 'hidden' \n        }}\n      >\n        <div className=\"p-4 bg-aged-paper-light rounded shadow-sm\">\n          <QueryOptions isRemoteInterface={isRemoteInterface} />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { h, FunctionComponent } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { signal } from '@preact/signals';\n\n// Define signals for query options\nexport const categorySignal = signal(localStorage.getItem('game_category') || '');\nexport const authorSignal = signal(localStorage.getItem('game_author') || '');\nexport const centurySignal = signal(localStorage.getItem('game_century') || '');\n\ninterface QueryOptionsProps {\n  isRemoteInterface?: boolean;\n}\n\nexport const QueryOptions: FunctionComponent<QueryOptionsProps> = ({ isRemoteInterface = false }) => {\n  const [selectedCategory, setSelectedCategory] = useState(categorySignal.value);\n  const [author, setAuthor] = useState(authorSignal.value);\n  const [century, setCentury] = useState(centurySignal.value);\n\n  // Update state when signals change\n  useEffect(() => {\n    setSelectedCategory(categorySignal.value);\n  }, [categorySignal.value]);\n\n  useEffect(() => {\n    setAuthor(authorSignal.value);\n  }, [authorSignal.value]);\n\n  useEffect(() => {\n    setCentury(centurySignal.value);\n  }, [centurySignal.value]);\n\n  const handleCategoryChange = (e: Event) => {\n    const newCategory = (e.target as HTMLSelectElement).value;\n    setSelectedCategory(newCategory);\n    localStorage.setItem('game_category', newCategory);\n    categorySignal.value = newCategory;\n  };\n\n  const handleAuthorInput = (e: Event) => {\n    const newAuthor = (e.target as HTMLInputElement).value;\n    setAuthor(newAuthor);\n    localStorage.setItem('game_author', newAuthor);\n    authorSignal.value = newAuthor;\n  };\n\n  const handleCenturyChange = (e: Event) => {\n    const newCentury = (e.target as HTMLSelectElement).value;\n    setCentury(newCentury);\n    localStorage.setItem('game_century', newCentury);\n    centurySignal.value = newCentury;\n  };\n\n  // Category/Topic options\n  const categoryOptions = [\n    { value: \"\", text: \"Random Topic\" },\n    // User Specified Categories\n    { value: \"bookshelf/466\", text: \"Philosophy & Ethics\" },\n    { value: \"bookshelf/478\", text: \"Science (General)\" },\n    { value: \"bookshelf/468\", text: \"Politics\" },\n    { value: \"bookshelf/446\", text: \"History (General)\" },\n    { value: \"bookshelf/458\", text: \"Literature\" },\n    { value: \"bookshelf/460\", text: \"Music\" },\n    { value: \"bookshelf/484\", text: \"Teaching & Education\" },\n    { value: \"bookshelf/459\", text: \"Mathematics\" },\n    { value: \"bookshelf/427\", text: \"Biographies\" },\n    // Additional Prominent Categories\n    { value: \"bookshelf/486\", text: \"Fiction (General)\" },\n    { value: \"bookshelf/480\", text: \"Science-Fiction & Fantasy\" },\n    { value: \"bookshelf/433\", text: \"Crime/Mystery\" },\n    { value: \"bookshelf/453\", text: \"Humour\" },\n    { value: \"bookshelf/467\", text: \"Poetry\" },\n    { value: \"bookshelf/485\", text: \"Travel & Geography\" },\n  ];\n\n  // Century options\n  const centuryOptions = [\n    { value: \"\", text: \"Any Century\" },\n    { value: \"15\", text: \"16th Century (1500s)\" },\n    { value: \"16\", text: \"17th Century (1600s)\" },\n    { value: \"17\", text: \"18th Century (1700s)\" },\n    { value: \"18\", text: \"19th Century (1800s)\" },\n    { value: \"19\", text: \"20th Century (1900s)\" }\n  ];\n\n  // Standardized select component style classes\n  const selectClasses = \"w-full p-2 border border-typewriter-ink bg-aged-paper-light rounded focus:outline-none focus:ring-2 focus:ring-typewriter-ribbon focus:border-typewriter-ribbon appearance-none pr-8\";\n  \n  // Standardized input component style classes\n  const inputClasses = \"w-full p-2 border border-typewriter-ink bg-aged-paper-light rounded focus:outline-none focus:ring-2 focus:ring-typewriter-ribbon focus:border-typewriter-ribbon\";\n\n  return (\n    <div className=\"mb-4\">\n      <h3 className=\"text-lg font-semibold mb-2 text-typewriter-ink\">Search Options</h3>\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        {/* Topic/Category Selection */}\n        <div>\n          <label htmlFor=\"category-select\" className=\"block mb-2 text-typewriter-ink\">Category</label>\n          <div className=\"relative\">\n            <select\n              id=\"category-select\"\n              className={selectClasses}\n              value={selectedCategory}\n              onInput={handleCategoryChange}\n              aria-label=\"Select category\"\n            >\n              {categoryOptions.map(option => (\n                <option key={option.value} value={option.value}>{option.text}</option>\n              ))}\n            </select>\n            <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-typewriter-ink\">\n              <svg className=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n                <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n              </svg>\n            </div>\n          </div>\n        </div>\n\n        {/* Author Input */}\n        <div>\n          <label htmlFor=\"author-input\" className=\"block mb-2 text-typewriter-ink\">Author</label>\n          <input\n            id=\"author-input\"\n            type=\"text\"\n            className={inputClasses}\n            placeholder=\"Enter author name\"\n            value={author}\n            onInput={handleAuthorInput}\n            aria-label=\"Author name\"\n          />\n        </div>\n\n        {/* Century Selection */}\n        <div>\n          <label htmlFor=\"century-select\" className=\"block mb-2 text-typewriter-ink\">Century</label>\n          <div className=\"relative\">\n            <select\n              id=\"century-select\"\n              className={selectClasses}\n              value={century}\n              onInput={handleCenturyChange}\n              aria-label=\"Select century\"\n            >\n              {centuryOptions.map(option => (\n                <option key={option.value} value={option.value}>{option.text}</option>\n              ))}\n            </select>\n            <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-typewriter-ink\">\n              <svg className=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n                <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n              </svg>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n",null,"import { options, Component, isValidElement } from \"preact\";\nimport { useRef, useMemo, useEffect } from \"preact/hooks\";\nimport {\n\tsignal,\n\tcomputed,\n\tbatch,\n\teffect,\n\tSignal,\n\ttype ReadonlySignal,\n\tuntracked,\n} from \"@preact/signals-core\";\nimport {\n\tVNode,\n\tOptionsTypes,\n\tHookFn,\n\tEffect,\n\tPropertyUpdater,\n\tAugmentedComponent,\n\tAugmentedElement as Element,\n} from \"./internal\";\n\nexport {\n\tsignal,\n\tcomputed,\n\tbatch,\n\teffect,\n\tSignal,\n\ttype ReadonlySignal,\n\tuntracked,\n};\n\nconst HAS_PENDING_UPDATE = 1 << 0;\nconst HAS_HOOK_STATE = 1 << 1;\nconst HAS_COMPUTEDS = 1 << 2;\n\nlet oldNotify: (this: Effect) => void,\n\teffectsQueue: Array<Effect> = [],\n\tdomQueue: Array<Effect> = [];\n\n// Capture the original `Effect.prototype._notify` method so that we can install\n// custom `._notify`s for each different use-case but still call the original\n// implementation in the end. Dispose the temporary effect immediately afterwards.\neffect(function (this: Effect) {\n\toldNotify = this._notify;\n})();\n\n// Install a Preact options hook\nfunction hook<T extends OptionsTypes>(hookName: T, hookFn: HookFn<T>) {\n\t// @ts-ignore-next-line private options hooks usage\n\toptions[hookName] = hookFn.bind(null, options[hookName] || (() => {}));\n}\n\nlet currentComponent: AugmentedComponent | undefined;\nlet finishUpdate: (() => void) | undefined;\n\nfunction setCurrentUpdater(updater?: Effect) {\n\t// end tracking for the current update:\n\tif (finishUpdate) finishUpdate();\n\t// start tracking the new update:\n\tfinishUpdate = updater && updater._start();\n}\n\nfunction createUpdater(update: () => void) {\n\tlet updater!: Effect;\n\teffect(function (this: Effect) {\n\t\tupdater = this;\n\t});\n\tupdater._callback = update;\n\treturn updater;\n}\n\n/** @todo This may be needed for complex prop value detection. */\n// function isSignalValue(value: any): value is Signal {\n// \tif (typeof value !== \"object\" || value == null) return false;\n// \tif (value instanceof Signal) return true;\n// \t// @TODO: uncomment this when we land Reactive (ideally behind a brand check)\n// \t// for (let i in value) if (value[i] instanceof Signal) return true;\n// \treturn false;\n// }\n\n/**\n * A wrapper component that renders a Signal directly as a Text node.\n * @todo: in Preact 11, just decorate Signal with `type:null`\n */\nfunction SignalValue(this: AugmentedComponent, { data }: { data: Signal }) {\n\t// hasComputeds.add(this);\n\n\t// Store the props.data signal in another signal so that\n\t// passing a new signal reference re-runs the text computed:\n\tconst currentSignal = useSignal(data);\n\tcurrentSignal.value = data;\n\n\tconst [isText, s] = useMemo(() => {\n\t\tlet self = this;\n\t\t// mark the parent component as having computeds so it gets optimized\n\t\tlet v = this.__v;\n\t\twhile ((v = v.__!)) {\n\t\t\tif (v.__c) {\n\t\t\t\tv.__c._updateFlags |= HAS_COMPUTEDS;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst wrappedSignal = computed(() => {\n\t\t\tlet s = currentSignal.value.value;\n\t\t\treturn s === 0 ? 0 : s === true ? \"\" : s || \"\";\n\t\t});\n\n\t\tconst isText = computed(\n\t\t\t() =>\n\t\t\t\t!Array.isArray(wrappedSignal.value) &&\n\t\t\t\t!isValidElement(wrappedSignal.value)\n\t\t);\n\t\t// Update text nodes directly without rerendering when the new value\n\t\t// is also text.\n\t\tconst dispose = effect(function (this: Effect) {\n\t\t\tthis._notify = notifyDomUpdates;\n\n\t\t\t// Subscribe to wrappedSignal updates only when its values are text...\n\t\t\tif (isText.value) {\n\t\t\t\t// ...but regardless of `self.base`'s current value, as it can be\n\t\t\t\t// undefined before mounting or a non-text node. In both of those cases\n\t\t\t\t// the update gets handled by a full rerender.\n\t\t\t\tconst value = wrappedSignal.value;\n\t\t\t\tif (self.__v && self.__v.__e && self.__v.__e.nodeType === 3) {\n\t\t\t\t\t(self.__v.__e as Text).data = value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Piggyback this._updater's disposal to ensure that the text updater effect\n\t\t// above also gets disposed on unmount.\n\t\tconst oldDispose = this._updater!._dispose;\n\t\tthis._updater!._dispose = function () {\n\t\t\tdispose();\n\t\t\toldDispose.call(this);\n\t\t};\n\n\t\treturn [isText, wrappedSignal];\n\t}, []);\n\n\t// Rerender the component whenever `data.value` changes from a VNode\n\t// to another VNode, from text to a VNode, or from a VNode to text.\n\t// That is, everything else except text-to-text updates.\n\t//\n\t// This also ensures that the backing DOM node types gets updated to\n\t// text nodes and back when needed.\n\t//\n\t// For text-to-text updates, `.peek()` is used to skip full rerenders,\n\t// leaving them to the optimized path above.\n\treturn isText.value ? s.peek() : s.value;\n}\nSignalValue.displayName = \"_st\";\n\nObject.defineProperties(Signal.prototype, {\n\tconstructor: { configurable: true, value: undefined },\n\ttype: { configurable: true, value: SignalValue },\n\tprops: {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn { data: this };\n\t\t},\n\t},\n\t// Setting a VNode's _depth to 1 forces Preact to clone it before modifying:\n\t// https://github.com/preactjs/preact/blob/d7a433ee8463a7dc23a05111bb47de9ec729ad4d/src/diff/children.js#L77\n\t// @todo remove this for Preact 11\n\t__b: { configurable: true, value: 1 },\n});\n\n/** Inject low-level property/attribute bindings for Signals into Preact's diff */\nhook(OptionsTypes.DIFF, (old, vnode) => {\n\tif (typeof vnode.type === \"string\") {\n\t\tlet signalProps: Record<string, any> | undefined;\n\n\t\tlet props = vnode.props;\n\t\tfor (let i in props) {\n\t\t\tif (i === \"children\") continue;\n\n\t\t\tlet value = props[i];\n\t\t\tif (value instanceof Signal) {\n\t\t\t\tif (!signalProps) vnode.__np = signalProps = {};\n\t\t\t\tsignalProps[i] = value;\n\t\t\t\tprops[i] = value.peek();\n\t\t\t}\n\t\t}\n\t}\n\n\told(vnode);\n});\n\n/** Set up Updater before rendering a component */\nhook(OptionsTypes.RENDER, (old, vnode) => {\n\tsetCurrentUpdater();\n\n\tlet updater;\n\n\tlet component = vnode.__c;\n\tif (component) {\n\t\tcomponent._updateFlags &= ~HAS_PENDING_UPDATE;\n\n\t\tupdater = component._updater;\n\t\tif (updater === undefined) {\n\t\t\tcomponent._updater = updater = createUpdater(() => {\n\t\t\t\tcomponent._updateFlags |= HAS_PENDING_UPDATE;\n\t\t\t\tcomponent.setState({});\n\t\t\t});\n\t\t}\n\t}\n\n\tcurrentComponent = component;\n\tsetCurrentUpdater(updater);\n\told(vnode);\n});\n\n/** Finish current updater if a component errors */\nhook(OptionsTypes.CATCH_ERROR, (old, error, vnode, oldVNode) => {\n\tsetCurrentUpdater();\n\tcurrentComponent = undefined;\n\told(error, vnode, oldVNode);\n});\n\n/** Finish current updater after rendering any VNode */\nhook(OptionsTypes.DIFFED, (old, vnode) => {\n\tsetCurrentUpdater();\n\tcurrentComponent = undefined;\n\n\tlet dom: Element;\n\n\t// vnode._dom is undefined during string rendering,\n\t// so we use this to skip prop subscriptions during SSR.\n\tif (typeof vnode.type === \"string\" && (dom = vnode.__e as Element)) {\n\t\tlet props = vnode.__np;\n\t\tlet renderedProps = vnode.props;\n\t\tif (props) {\n\t\t\tlet updaters = dom._updaters;\n\t\t\tif (updaters) {\n\t\t\t\tfor (let prop in updaters) {\n\t\t\t\t\tlet updater = updaters[prop];\n\t\t\t\t\tif (updater !== undefined && !(prop in props)) {\n\t\t\t\t\t\tupdater._dispose();\n\t\t\t\t\t\t// @todo we could just always invoke _dispose() here\n\t\t\t\t\t\tupdaters[prop] = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tupdaters = {};\n\t\t\t\tdom._updaters = updaters;\n\t\t\t}\n\t\t\tfor (let prop in props) {\n\t\t\t\tlet updater = updaters[prop];\n\t\t\t\tlet signal = props[prop];\n\t\t\t\tif (updater === undefined) {\n\t\t\t\t\tupdater = createPropUpdater(dom, prop, signal, renderedProps);\n\t\t\t\t\tupdaters[prop] = updater;\n\t\t\t\t} else {\n\t\t\t\t\tupdater._update(signal, renderedProps);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\told(vnode);\n});\n\nfunction createPropUpdater(\n\tdom: Element,\n\tprop: string,\n\tpropSignal: Signal,\n\tprops: Record<string, any>\n): PropertyUpdater {\n\tconst setAsProperty =\n\t\tprop in dom &&\n\t\t// SVG elements need to go through `setAttribute` because they\n\t\t// expect things like SVGAnimatedTransformList instead of strings.\n\t\t// @ts-ignore\n\t\tdom.ownerSVGElement === undefined;\n\n\tconst changeSignal = signal(propSignal);\n\treturn {\n\t\t_update: (newSignal: Signal, newProps: typeof props) => {\n\t\t\tchangeSignal.value = newSignal;\n\t\t\tprops = newProps;\n\t\t},\n\t\t_dispose: effect(function (this: Effect) {\n\t\t\tthis._notify = notifyDomUpdates;\n\t\t\tconst value = changeSignal.value.value;\n\t\t\t// If Preact just rendered this value, don't render it again:\n\t\t\tif (props[prop] === value) return;\n\t\t\tprops[prop] = value;\n\t\t\tif (setAsProperty) {\n\t\t\t\t// @ts-ignore-next-line silly\n\t\t\t\tdom[prop] = value;\n\t\t\t} else if (value) {\n\t\t\t\tdom.setAttribute(prop, value);\n\t\t\t} else {\n\t\t\t\tdom.removeAttribute(prop);\n\t\t\t}\n\t\t}),\n\t};\n}\n\n/** Unsubscribe from Signals when unmounting components/vnodes */\nhook(OptionsTypes.UNMOUNT, (old, vnode: VNode) => {\n\tif (typeof vnode.type === \"string\") {\n\t\tlet dom = vnode.__e as Element | undefined;\n\t\t// vnode._dom is undefined during string rendering\n\t\tif (dom) {\n\t\t\tconst updaters = dom._updaters;\n\t\t\tif (updaters) {\n\t\t\t\tdom._updaters = undefined;\n\t\t\t\tfor (let prop in updaters) {\n\t\t\t\t\tlet updater = updaters[prop];\n\t\t\t\t\tif (updater) updater._dispose();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tlet component = vnode.__c;\n\t\tif (component) {\n\t\t\tconst updater = component._updater;\n\t\t\tif (updater) {\n\t\t\t\tcomponent._updater = undefined;\n\t\t\t\tupdater._dispose();\n\t\t\t}\n\t\t}\n\t}\n\told(vnode);\n});\n\n/** Mark components that use hook state so we can skip sCU optimization. */\nhook(OptionsTypes.HOOK, (old, component, index, type) => {\n\tif (type < 3 || type === 9)\n\t\t(component as AugmentedComponent)._updateFlags |= HAS_HOOK_STATE;\n\told(component, index, type);\n});\n\n/**\n * Auto-memoize components that use Signals/Computeds.\n * Note: Does _not_ optimize components that use hook/class state.\n */\nComponent.prototype.shouldComponentUpdate = function (\n\tthis: AugmentedComponent,\n\tprops,\n\tstate\n) {\n\t// @todo: Once preactjs/preact#3671 lands, this could just use `currentUpdater`:\n\tconst updater = this._updater;\n\tconst hasSignals = updater && updater._sources !== undefined;\n\n\t// If this is a component using state, rerender\n\t// @ts-ignore\n\tfor (let i in state) return true;\n\n\tif (this.__f || (typeof this.u == \"boolean\" && this.u === true)) {\n\t\tconst hasHooksState = this._updateFlags & HAS_HOOK_STATE;\n\t\t// if this component used no signals or computeds and no hooks state, update:\n\t\tif (!hasSignals && !hasHooksState && !(this._updateFlags & HAS_COMPUTEDS))\n\t\t\treturn true;\n\n\t\t// if there is a pending re-render triggered from Signals,\n\t\t// or if there is hooks state, update:\n\t\tif (this._updateFlags & HAS_PENDING_UPDATE) return true;\n\t} else {\n\t\t// if this component used no signals or computeds, update:\n\t\tif (!hasSignals && !(this._updateFlags & HAS_COMPUTEDS)) return true;\n\n\t\t// if there is a pending re-render triggered from Signals,\n\t\t// or if there is hooks state, update:\n\t\tif (this._updateFlags & (HAS_PENDING_UPDATE | HAS_HOOK_STATE)) return true;\n\t}\n\n\t// if any non-Signal props changed, update:\n\tfor (let i in props) {\n\t\tif (i !== \"__source\" && props[i] !== this.props[i]) return true;\n\t}\n\tfor (let i in this.props) if (!(i in props)) return true;\n\n\t// this is a purely Signal-driven component, don't update:\n\treturn false;\n};\n\nexport function useSignal<T>(value: T): Signal<T>;\nexport function useSignal<T = undefined>(): Signal<T | undefined>;\nexport function useSignal<T>(value?: T) {\n\treturn useMemo(() => signal<T | undefined>(value), []);\n}\n\nexport function useComputed<T>(compute: () => T) {\n\tconst $compute = useRef(compute);\n\t$compute.current = compute;\n\t(currentComponent as AugmentedComponent)._updateFlags |= HAS_COMPUTEDS;\n\treturn useMemo(() => computed<T>(() => $compute.current()), []);\n}\n\nfunction safeRaf(callback: () => void) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tcancelAnimationFrame(raf);\n\t\tcallback();\n\t};\n\n\tconst timeout = setTimeout(done, 100);\n\tconst raf = requestAnimationFrame(done);\n}\n\nconst deferEffects =\n\ttypeof requestAnimationFrame === \"undefined\" ? setTimeout : safeRaf;\n\nconst deferDomUpdates = (cb: any) => {\n\tqueueMicrotask(() => {\n\t\tqueueMicrotask(cb);\n\t});\n};\n\nfunction flushEffects() {\n\tbatch(() => {\n\t\tlet inst: Effect | undefined;\n\t\twhile ((inst = effectsQueue.shift())) {\n\t\t\toldNotify.call(inst);\n\t\t}\n\t});\n}\n\nfunction notifyEffects(this: Effect) {\n\tif (effectsQueue.push(this) === 1) {\n\t\t(options.requestAnimationFrame || deferEffects)(flushEffects);\n\t}\n}\n\nfunction flushDomUpdates() {\n\tbatch(() => {\n\t\tlet inst: Effect | undefined;\n\t\twhile ((inst = domQueue.shift())) {\n\t\t\toldNotify.call(inst);\n\t\t}\n\t});\n}\n\nfunction notifyDomUpdates(this: Effect) {\n\tif (domQueue.push(this) === 1) {\n\t\t(options.requestAnimationFrame || deferDomUpdates)(flushDomUpdates);\n\t}\n}\n\nexport function useSignalEffect(cb: () => void | (() => void)) {\n\tconst callback = useRef(cb);\n\tcallback.current = cb;\n\n\tuseEffect(() => {\n\t\treturn effect(function (this: Effect) {\n\t\t\tthis._notify = notifyEffects;\n\t\t\treturn callback.current();\n\t\t});\n\t}, []);\n}\n\n/**\n * @todo Determine which Reactive implementation we'll be using.\n * @internal\n */\n// export function useReactive<T extends object>(value: T): Reactive<T> {\n// \treturn useMemo(() => reactive<T>(value), []);\n// }\n\n/**\n * @internal\n * Update a Reactive's using the properties of an object or other Reactive.\n * Also works for Signals.\n * @example\n *   // Update a Reactive with Object.assign()-like syntax:\n *   const r = reactive({ name: \"Alice\" });\n *   update(r, { name: \"Bob\" });\n *   update(r, { age: 42 }); // property 'age' does not exist in type '{ name?: string }'\n *   update(r, 2); // '2' has no properties in common with '{ name?: string }'\n *   console.log(r.name.value); // \"Bob\"\n *\n * @example\n *   // Update a Reactive with the properties of another Reactive:\n *   const A = reactive({ name: \"Alice\" });\n *   const B = reactive({ name: \"Bob\", age: 42 });\n *   update(A, B);\n *   console.log(`${A.name} is ${A.age}`); // \"Bob is 42\"\n *\n * @example\n *   // Update a signal with assign()-like syntax:\n *   const s = signal(42);\n *   update(s, \"hi\"); // Argument type 'string' not assignable to type 'number'\n *   update(s, {}); // Argument type '{}' not assignable to type 'number'\n *   update(s, 43);\n *   console.log(s.value); // 43\n *\n * @param obj The Reactive or Signal to be updated\n * @param update The value, Signal, object or Reactive to update `obj` to match\n * @param overwrite If `true`, any properties `obj` missing from `update` are set to `undefined`\n */\n/*\nexport function update<T extends SignalOrReactive>(\n\tobj: T,\n\tupdate: Partial<Unwrap<T>>,\n\toverwrite = false\n) {\n\tif (obj instanceof Signal) {\n\t\tobj.value = peekValue(update);\n\t} else {\n\t\tfor (let i in update) {\n\t\t\tif (i in obj) {\n\t\t\t\tobj[i].value = peekValue(update[i]);\n\t\t\t} else {\n\t\t\t\tlet sig = signal(peekValue(update[i]));\n\t\t\t\tsig[KEY] = i;\n\t\t\t\tobj[i] = sig;\n\t\t\t}\n\t\t}\n\t\tif (overwrite) {\n\t\t\tfor (let i in obj) {\n\t\t\t\tif (!(i in update)) {\n\t\t\t\t\tobj[i].value = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n*/\n",null,"// An named symbol/brand for detecting Signal instances even when they weren't\n// created using the same signals library version.\nconst BRAND_SYMBOL = Symbol.for(\"preact-signals\");\n\n// Flags for Computed and Effect.\nconst RUNNING = 1 << 0;\nconst NOTIFIED = 1 << 1;\nconst OUTDATED = 1 << 2;\nconst DISPOSED = 1 << 3;\nconst HAS_ERROR = 1 << 4;\nconst TRACKING = 1 << 5;\n\n// A linked list node used to track dependencies (sources) and dependents (targets).\n// Also used to remember the source's last version number that the target saw.\ntype Node = {\n\t// A source whose value the target depends on.\n\t_source: Signal;\n\t_prevSource?: Node;\n\t_nextSource?: Node;\n\n\t// A target that depends on the source and should be notified when the source changes.\n\t_target: Computed | Effect;\n\t_prevTarget?: Node;\n\t_nextTarget?: Node;\n\n\t// The version number of the source that target has last seen. We use version numbers\n\t// instead of storing the source value, because source values can take arbitrary amount\n\t// of memory, and computeds could hang on to them forever because they're lazily evaluated.\n\t// Use the special value -1 to mark potentially unused but recyclable nodes.\n\t_version: number;\n\n\t// Used to remember & roll back the source's previous `._node` value when entering &\n\t// exiting a new evaluation context.\n\t_rollbackNode?: Node;\n};\n\nfunction startBatch() {\n\tbatchDepth++;\n}\n\nfunction endBatch() {\n\tif (batchDepth > 1) {\n\t\tbatchDepth--;\n\t\treturn;\n\t}\n\n\tlet error: unknown;\n\tlet hasError = false;\n\n\twhile (batchedEffect !== undefined) {\n\t\tlet effect: Effect | undefined = batchedEffect;\n\t\tbatchedEffect = undefined;\n\n\t\tbatchIteration++;\n\n\t\twhile (effect !== undefined) {\n\t\t\tconst next: Effect | undefined = effect._nextBatchedEffect;\n\t\t\teffect._nextBatchedEffect = undefined;\n\t\t\teffect._flags &= ~NOTIFIED;\n\n\t\t\tif (!(effect._flags & DISPOSED) && needsToRecompute(effect)) {\n\t\t\t\ttry {\n\t\t\t\t\teffect._callback();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tif (!hasError) {\n\t\t\t\t\t\terror = err;\n\t\t\t\t\t\thasError = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\teffect = next;\n\t\t}\n\t}\n\tbatchIteration = 0;\n\tbatchDepth--;\n\n\tif (hasError) {\n\t\tthrow error;\n\t}\n}\n\n/**\n * Combine multiple value updates into one \"commit\" at the end of the provided callback.\n *\n * Batches can be nested and changes are only flushed once the outermost batch callback\n * completes.\n *\n * Accessing a signal that has been modified within a batch will reflect its updated\n * value.\n *\n * @param fn The callback function.\n * @returns The value returned by the callback.\n */\nfunction batch<T>(fn: () => T): T {\n\tif (batchDepth > 0) {\n\t\treturn fn();\n\t}\n\t/*@__INLINE__**/ startBatch();\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tendBatch();\n\t}\n}\n\n// Currently evaluated computed or effect.\nlet evalContext: Computed | Effect | undefined = undefined;\n\n/**\n * Run a callback function that can access signal values without\n * subscribing to the signal updates.\n *\n * @param fn The callback function.\n * @returns The value returned by the callback.\n */\nfunction untracked<T>(fn: () => T): T {\n\tconst prevContext = evalContext;\n\tevalContext = undefined;\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tevalContext = prevContext;\n\t}\n}\n\n// Effects collected into a batch.\nlet batchedEffect: Effect | undefined = undefined;\nlet batchDepth = 0;\nlet batchIteration = 0;\n\n// A global version number for signals, used for fast-pathing repeated\n// computed.peek()/computed.value calls when nothing has changed globally.\nlet globalVersion = 0;\n\nfunction addDependency(signal: Signal): Node | undefined {\n\tif (evalContext === undefined) {\n\t\treturn undefined;\n\t}\n\n\tlet node = signal._node;\n\tif (node === undefined || node._target !== evalContext) {\n\t\t/**\n\t\t * `signal` is a new dependency. Create a new dependency node, and set it\n\t\t * as the tail of the current context's dependency list. e.g:\n\t\t *\n\t\t * { A <-> B       }\n\t\t *              \n\t\t *        tail  node (new)\n\t\t *               \n\t\t * { A <-> B <-> C }\n\t\t *               \n\t\t *              tail (evalContext._sources)\n\t\t */\n\t\tnode = {\n\t\t\t_version: 0,\n\t\t\t_source: signal,\n\t\t\t_prevSource: evalContext._sources,\n\t\t\t_nextSource: undefined,\n\t\t\t_target: evalContext,\n\t\t\t_prevTarget: undefined,\n\t\t\t_nextTarget: undefined,\n\t\t\t_rollbackNode: node,\n\t\t};\n\n\t\tif (evalContext._sources !== undefined) {\n\t\t\tevalContext._sources._nextSource = node;\n\t\t}\n\t\tevalContext._sources = node;\n\t\tsignal._node = node;\n\n\t\t// Subscribe to change notifications from this dependency if we're in an effect\n\t\t// OR evaluating a computed signal that in turn has subscribers.\n\t\tif (evalContext._flags & TRACKING) {\n\t\t\tsignal._subscribe(node);\n\t\t}\n\t\treturn node;\n\t} else if (node._version === -1) {\n\t\t// `signal` is an existing dependency from a previous evaluation. Reuse it.\n\t\tnode._version = 0;\n\n\t\t/**\n\t\t * If `node` is not already the current tail of the dependency list (i.e.\n\t\t * there is a next node in the list), then make the `node` the new tail. e.g:\n\t\t *\n\t\t * { A <-> B <-> C <-> D }\n\t\t *                    \n\t\t *        node    tail (evalContext._sources)\n\t\t *         \n\t\t *                    \n\t\t * { A <-> C <-> D <-> B }\n\t\t *                     \n\t\t *                    tail (evalContext._sources)\n\t\t */\n\t\tif (node._nextSource !== undefined) {\n\t\t\tnode._nextSource._prevSource = node._prevSource;\n\n\t\t\tif (node._prevSource !== undefined) {\n\t\t\t\tnode._prevSource._nextSource = node._nextSource;\n\t\t\t}\n\n\t\t\tnode._prevSource = evalContext._sources;\n\t\t\tnode._nextSource = undefined;\n\n\t\t\tevalContext._sources!._nextSource = node;\n\t\t\tevalContext._sources = node;\n\t\t}\n\n\t\t// We can assume that the currently evaluated effect / computed signal is already\n\t\t// subscribed to change notifications from `signal` if needed.\n\t\treturn node;\n\t}\n\treturn undefined;\n}\n\n/**\n * The base class for plain and computed signals.\n */\n// @ts-ignore: \"Cannot redeclare exported variable 'Signal'.\"\n//\n// A function with the same name is defined later, so we need to ignore TypeScript's\n// warning about a redeclared variable.\n//\n// The class is declared here, but later implemented with ES5-style prototypes.\n// This enables better control of the transpiled output size.\ndeclare class Signal<T = any> {\n\t/** @internal */\n\t_value: unknown;\n\n\t/**\n\t * @internal\n\t * Version numbers should always be >= 0, because the special value -1 is used\n\t * by Nodes to signify potentially unused but recyclable nodes.\n\t */\n\t_version: number;\n\n\t/** @internal */\n\t_node?: Node;\n\n\t/** @internal */\n\t_targets?: Node;\n\n\tconstructor(value?: T);\n\n\t/** @internal */\n\t_refresh(): boolean;\n\n\t/** @internal */\n\t_subscribe(node: Node): void;\n\n\t/** @internal */\n\t_unsubscribe(node: Node): void;\n\n\tsubscribe(fn: (value: T) => void): () => void;\n\n\tvalueOf(): T;\n\n\ttoString(): string;\n\n\ttoJSON(): T;\n\n\tpeek(): T;\n\n\tbrand: typeof BRAND_SYMBOL;\n\n\tget value(): T;\n\tset value(value: T);\n}\n\n/** @internal */\n// @ts-ignore: \"Cannot redeclare exported variable 'Signal'.\"\n//\n// A class with the same name has already been declared, so we need to ignore\n// TypeScript's warning about a redeclared variable.\n//\n// The previously declared class is implemented here with ES5-style prototypes.\n// This enables better control of the transpiled output size.\nfunction Signal(this: Signal, value?: unknown) {\n\tthis._value = value;\n\tthis._version = 0;\n\tthis._node = undefined;\n\tthis._targets = undefined;\n}\n\nSignal.prototype.brand = BRAND_SYMBOL;\n\nSignal.prototype._refresh = function () {\n\treturn true;\n};\n\nSignal.prototype._subscribe = function (node) {\n\tif (this._targets !== node && node._prevTarget === undefined) {\n\t\tnode._nextTarget = this._targets;\n\t\tif (this._targets !== undefined) {\n\t\t\tthis._targets._prevTarget = node;\n\t\t}\n\t\tthis._targets = node;\n\t}\n};\n\nSignal.prototype._unsubscribe = function (node) {\n\t// Only run the unsubscribe step if the signal has any subscribers to begin with.\n\tif (this._targets !== undefined) {\n\t\tconst prev = node._prevTarget;\n\t\tconst next = node._nextTarget;\n\t\tif (prev !== undefined) {\n\t\t\tprev._nextTarget = next;\n\t\t\tnode._prevTarget = undefined;\n\t\t}\n\t\tif (next !== undefined) {\n\t\t\tnext._prevTarget = prev;\n\t\t\tnode._nextTarget = undefined;\n\t\t}\n\t\tif (node === this._targets) {\n\t\t\tthis._targets = next;\n\t\t}\n\t}\n};\n\nSignal.prototype.subscribe = function (fn) {\n\treturn effect(() => {\n\t\tconst value = this.value;\n\n\t\tconst prevContext = evalContext;\n\t\tevalContext = undefined;\n\t\ttry {\n\t\t\tfn(value);\n\t\t} finally {\n\t\t\tevalContext = prevContext;\n\t\t}\n\t});\n};\n\nSignal.prototype.valueOf = function () {\n\treturn this.value;\n};\n\nSignal.prototype.toString = function () {\n\treturn this.value + \"\";\n};\n\nSignal.prototype.toJSON = function () {\n\treturn this.value;\n};\n\nSignal.prototype.peek = function () {\n\tconst prevContext = evalContext;\n\tevalContext = undefined;\n\ttry {\n\t\treturn this.value;\n\t} finally {\n\t\tevalContext = prevContext;\n\t}\n};\n\nObject.defineProperty(Signal.prototype, \"value\", {\n\tget(this: Signal) {\n\t\tconst node = addDependency(this);\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\treturn this._value;\n\t},\n\tset(this: Signal, value) {\n\t\tif (value !== this._value) {\n\t\t\tif (batchIteration > 100) {\n\t\t\t\tthrow new Error(\"Cycle detected\");\n\t\t\t}\n\n\t\t\tthis._value = value;\n\t\t\tthis._version++;\n\t\t\tglobalVersion++;\n\n\t\t\t/**@__INLINE__*/ startBatch();\n\t\t\ttry {\n\t\t\t\tfor (\n\t\t\t\t\tlet node = this._targets;\n\t\t\t\t\tnode !== undefined;\n\t\t\t\t\tnode = node._nextTarget\n\t\t\t\t) {\n\t\t\t\t\tnode._target._notify();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tendBatch();\n\t\t\t}\n\t\t}\n\t},\n});\n\n/**\n * Create a new plain signal.\n *\n * @param value The initial value for the signal.\n * @returns A new signal.\n */\nexport function signal<T>(value: T): Signal<T>;\nexport function signal<T = undefined>(): Signal<T | undefined>;\nexport function signal<T>(value?: T): Signal<T> {\n\treturn new Signal(value);\n}\n\nfunction needsToRecompute(target: Computed | Effect): boolean {\n\t// Check the dependencies for changed values. The dependency list is already\n\t// in order of use. Therefore if multiple dependencies have changed values, only\n\t// the first used dependency is re-evaluated at this point.\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\t// If there's a new version of the dependency before or after refreshing,\n\t\t// or the dependency has something blocking it from refreshing at all (e.g. a\n\t\t// dependency cycle), then we need to recompute.\n\t\tif (\n\t\t\tnode._source._version !== node._version ||\n\t\t\t!node._source._refresh() ||\n\t\t\tnode._source._version !== node._version\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\t// If none of the dependencies have changed values since last recompute then\n\t// there's no need to recompute.\n\treturn false;\n}\n\nfunction prepareSources(target: Computed | Effect) {\n\t/**\n\t * 1. Mark all current sources as re-usable nodes (version: -1)\n\t * 2. Set a rollback node if the current node is being used in a different context\n\t * 3. Point 'target._sources' to the tail of the doubly-linked list, e.g:\n\t *\n\t *    { undefined <- A <-> B <-> C -> undefined }\n\t *                              \n\t *                              \n\t * target._sources = A; (node is head)  \n\t *                                     \n\t * target._sources = C; (node is tail) \n\t */\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tconst rollbackNode = node._source._node;\n\t\tif (rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = rollbackNode;\n\t\t}\n\t\tnode._source._node = node;\n\t\tnode._version = -1;\n\n\t\tif (node._nextSource === undefined) {\n\t\t\ttarget._sources = node;\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction cleanupSources(target: Computed | Effect) {\n\tlet node = target._sources;\n\tlet head = undefined;\n\n\t/**\n\t * At this point 'target._sources' points to the tail of the doubly-linked list.\n\t * It contains all existing sources + new sources in order of use.\n\t * Iterate backwards until we find the head node while dropping old dependencies.\n\t */\n\twhile (node !== undefined) {\n\t\tconst prev = node._prevSource;\n\n\t\t/**\n\t\t * The node was not re-used, unsubscribe from its change notifications and remove itself\n\t\t * from the doubly-linked list. e.g:\n\t\t *\n\t\t * { A <-> B <-> C }\n\t\t *         \n\t\t *    { A <-> C }\n\t\t */\n\t\tif (node._version === -1) {\n\t\t\tnode._source._unsubscribe(node);\n\n\t\t\tif (prev !== undefined) {\n\t\t\t\tprev._nextSource = node._nextSource;\n\t\t\t}\n\t\t\tif (node._nextSource !== undefined) {\n\t\t\t\tnode._nextSource._prevSource = prev;\n\t\t\t}\n\t\t} else {\n\t\t\t/**\n\t\t\t * The new head is the last node seen which wasn't removed/unsubscribed\n\t\t\t * from the doubly-linked list. e.g:\n\t\t\t *\n\t\t\t * { A <-> B <-> C }\n\t\t\t *             \n\t\t\t *              head = node\n\t\t\t *         head = node\n\t\t\t *    head = node\n\t\t\t */\n\t\t\thead = node;\n\t\t}\n\n\t\tnode._source._node = node._rollbackNode;\n\t\tif (node._rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = undefined;\n\t\t}\n\n\t\tnode = prev;\n\t}\n\n\ttarget._sources = head;\n}\n\ndeclare class Computed<T = any> extends Signal<T> {\n\t_fn: () => T;\n\t_sources?: Node;\n\t_globalVersion: number;\n\t_flags: number;\n\n\tconstructor(fn: () => T);\n\n\t_notify(): void;\n\tget value(): T;\n}\n\nfunction Computed(this: Computed, fn: () => unknown) {\n\tSignal.call(this, undefined);\n\n\tthis._fn = fn;\n\tthis._sources = undefined;\n\tthis._globalVersion = globalVersion - 1;\n\tthis._flags = OUTDATED;\n}\n\nComputed.prototype = new Signal() as Computed;\n\nComputed.prototype._refresh = function () {\n\tthis._flags &= ~NOTIFIED;\n\n\tif (this._flags & RUNNING) {\n\t\treturn false;\n\t}\n\n\t// If this computed signal has subscribed to updates from its dependencies\n\t// (TRACKING flag set) and none of them have notified about changes (OUTDATED\n\t// flag not set), then the computed value can't have changed.\n\tif ((this._flags & (OUTDATED | TRACKING)) === TRACKING) {\n\t\treturn true;\n\t}\n\tthis._flags &= ~OUTDATED;\n\n\tif (this._globalVersion === globalVersion) {\n\t\treturn true;\n\t}\n\tthis._globalVersion = globalVersion;\n\n\t// Mark this computed signal running before checking the dependencies for value\n\t// changes, so that the RUNNING flag can be used to notice cyclical dependencies.\n\tthis._flags |= RUNNING;\n\tif (this._version > 0 && !needsToRecompute(this)) {\n\t\tthis._flags &= ~RUNNING;\n\t\treturn true;\n\t}\n\n\tconst prevContext = evalContext;\n\ttry {\n\t\tprepareSources(this);\n\t\tevalContext = this;\n\t\tconst value = this._fn();\n\t\tif (\n\t\t\tthis._flags & HAS_ERROR ||\n\t\t\tthis._value !== value ||\n\t\t\tthis._version === 0\n\t\t) {\n\t\t\tthis._value = value;\n\t\t\tthis._flags &= ~HAS_ERROR;\n\t\t\tthis._version++;\n\t\t}\n\t} catch (err) {\n\t\tthis._value = err;\n\t\tthis._flags |= HAS_ERROR;\n\t\tthis._version++;\n\t}\n\tevalContext = prevContext;\n\tcleanupSources(this);\n\tthis._flags &= ~RUNNING;\n\treturn true;\n};\n\nComputed.prototype._subscribe = function (node) {\n\tif (this._targets === undefined) {\n\t\tthis._flags |= OUTDATED | TRACKING;\n\n\t\t// A computed signal subscribes lazily to its dependencies when it\n\t\t// gets its first subscriber.\n\t\tfor (\n\t\t\tlet node = this._sources;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextSource\n\t\t) {\n\t\t\tnode._source._subscribe(node);\n\t\t}\n\t}\n\tSignal.prototype._subscribe.call(this, node);\n};\n\nComputed.prototype._unsubscribe = function (node) {\n\t// Only run the unsubscribe step if the computed signal has any subscribers.\n\tif (this._targets !== undefined) {\n\t\tSignal.prototype._unsubscribe.call(this, node);\n\n\t\t// Computed signal unsubscribes from its dependencies when it loses its last subscriber.\n\t\t// This makes it possible for unreferences subgraphs of computed signals to get garbage collected.\n\t\tif (this._targets === undefined) {\n\t\t\tthis._flags &= ~TRACKING;\n\n\t\t\tfor (\n\t\t\t\tlet node = this._sources;\n\t\t\t\tnode !== undefined;\n\t\t\t\tnode = node._nextSource\n\t\t\t) {\n\t\t\t\tnode._source._unsubscribe(node);\n\t\t\t}\n\t\t}\n\t}\n};\n\nComputed.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= OUTDATED | NOTIFIED;\n\n\t\tfor (\n\t\t\tlet node = this._targets;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextTarget\n\t\t) {\n\t\t\tnode._target._notify();\n\t\t}\n\t}\n};\n\nObject.defineProperty(Computed.prototype, \"value\", {\n\tget(this: Computed) {\n\t\tif (this._flags & RUNNING) {\n\t\t\tthrow new Error(\"Cycle detected\");\n\t\t}\n\t\tconst node = addDependency(this);\n\t\tthis._refresh();\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\tif (this._flags & HAS_ERROR) {\n\t\t\tthrow this._value;\n\t\t}\n\t\treturn this._value;\n\t},\n});\n\n/**\n * An interface for read-only signals.\n */\ninterface ReadonlySignal<T = any> {\n\treadonly value: T;\n\tpeek(): T;\n\n\tsubscribe(fn: (value: T) => void): () => void;\n\tvalueOf(): T;\n\ttoString(): string;\n\ttoJSON(): T;\n\tbrand: typeof BRAND_SYMBOL;\n}\n\n/**\n * Create a new signal that is computed based on the values of other signals.\n *\n * The returned computed signal is read-only, and its value is automatically\n * updated when any signals accessed from within the callback function change.\n *\n * @param fn The effect callback.\n * @returns A new read-only signal.\n */\nfunction computed<T>(fn: () => T): ReadonlySignal<T> {\n\treturn new Computed(fn);\n}\n\nfunction cleanupEffect(effect: Effect) {\n\tconst cleanup = effect._cleanup;\n\teffect._cleanup = undefined;\n\n\tif (typeof cleanup === \"function\") {\n\t\t/*@__INLINE__**/ startBatch();\n\n\t\t// Run cleanup functions always outside of any context.\n\t\tconst prevContext = evalContext;\n\t\tevalContext = undefined;\n\t\ttry {\n\t\t\tcleanup();\n\t\t} catch (err) {\n\t\t\teffect._flags &= ~RUNNING;\n\t\t\teffect._flags |= DISPOSED;\n\t\t\tdisposeEffect(effect);\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tevalContext = prevContext;\n\t\t\tendBatch();\n\t\t}\n\t}\n}\n\nfunction disposeEffect(effect: Effect) {\n\tfor (\n\t\tlet node = effect._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tnode._source._unsubscribe(node);\n\t}\n\teffect._fn = undefined;\n\teffect._sources = undefined;\n\n\tcleanupEffect(effect);\n}\n\nfunction endEffect(this: Effect, prevContext?: Computed | Effect) {\n\tif (evalContext !== this) {\n\t\tthrow new Error(\"Out-of-order effect\");\n\t}\n\tcleanupSources(this);\n\tevalContext = prevContext;\n\n\tthis._flags &= ~RUNNING;\n\tif (this._flags & DISPOSED) {\n\t\tdisposeEffect(this);\n\t}\n\tendBatch();\n}\n\ntype EffectFn = () => void | (() => void);\n\ndeclare class Effect {\n\t_fn?: EffectFn;\n\t_cleanup?: () => void;\n\t_sources?: Node;\n\t_nextBatchedEffect?: Effect;\n\t_flags: number;\n\n\tconstructor(fn: EffectFn);\n\n\t_callback(): void;\n\t_start(): () => void;\n\t_notify(): void;\n\t_dispose(): void;\n}\n\nfunction Effect(this: Effect, fn: EffectFn) {\n\tthis._fn = fn;\n\tthis._cleanup = undefined;\n\tthis._sources = undefined;\n\tthis._nextBatchedEffect = undefined;\n\tthis._flags = TRACKING;\n}\n\nEffect.prototype._callback = function () {\n\tconst finish = this._start();\n\ttry {\n\t\tif (this._flags & DISPOSED) return;\n\t\tif (this._fn === undefined) return;\n\n\t\tconst cleanup = this._fn();\n\t\tif (typeof cleanup === \"function\") {\n\t\t\tthis._cleanup = cleanup;\n\t\t}\n\t} finally {\n\t\tfinish();\n\t}\n};\n\nEffect.prototype._start = function () {\n\tif (this._flags & RUNNING) {\n\t\tthrow new Error(\"Cycle detected\");\n\t}\n\tthis._flags |= RUNNING;\n\tthis._flags &= ~DISPOSED;\n\tcleanupEffect(this);\n\tprepareSources(this);\n\n\t/*@__INLINE__**/ startBatch();\n\tconst prevContext = evalContext;\n\tevalContext = this;\n\treturn endEffect.bind(this, prevContext);\n};\n\nEffect.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= NOTIFIED;\n\t\tthis._nextBatchedEffect = batchedEffect;\n\t\tbatchedEffect = this;\n\t}\n};\n\nEffect.prototype._dispose = function () {\n\tthis._flags |= DISPOSED;\n\n\tif (!(this._flags & RUNNING)) {\n\t\tdisposeEffect(this);\n\t}\n};\n\n/**\n * Create an effect to run arbitrary code in response to signal changes.\n *\n * An effect tracks which signals are accessed within the given callback\n * function `fn`, and re-runs the callback when those signals change.\n *\n * The callback may return a cleanup function. The cleanup function gets\n * run once, either when the callback is next called or when the effect\n * gets disposed, whichever happens first.\n *\n * @param fn The effect callback.\n * @returns A function for disposing the effect.\n */\nfunction effect(fn: EffectFn): () => void {\n\tconst effect = new Effect(fn);\n\ttry {\n\t\teffect._callback();\n\t} catch (err) {\n\t\teffect._dispose();\n\t\tthrow err;\n\t}\n\t// Return a bound function instead of a wrapper like `() => effect._dispose()`,\n\t// because bound functions seem to be just as fast and take up a lot less memory.\n\treturn effect._dispose.bind(effect);\n}\n\nexport { computed, effect, batch, untracked, Signal, ReadonlySignal };\n","import { h, FunctionComponent } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { signal } from '@preact/signals';\nimport { setUserApiKey, isUsingUserProvidedApiKey, getEnvironmentConfig } from '@/utils/environmentConfig';\n\n/**\n * Signal for storing and accessing the OpenRouter API key globally.\n * Initializes from environment configuration\n */\nexport const apiKeySignal = signal(getEnvironmentConfig().OPENROUTER_API_KEY);\n\n/**\n * Helper function to check if the API key is valid.\n * @param key The API key string to validate.\n * @returns True if the key is valid, false otherwise.\n */\nfunction isValidApiKey(key: string): boolean {\n  return Boolean(key) && key.startsWith('sk-or-') && key.length > 20;\n}\n\n/**\n * Props for the ApiConfiguration component.\n */\ninterface ApiConfigurationProps {\n  isRemoteInterface?: boolean;\n}\n\n/**\n * ApiConfiguration component for managing the OpenRouter API key.\n * Allows users to input, save, and validate their API key.\n * In remote interfaces, it automatically uses the default key without showing the input.\n */\nexport const ApiConfiguration: FunctionComponent<ApiConfigurationProps> = ({ \n  isRemoteInterface = window.location.hostname.includes('github.io')\n}) => {\n  const [inputKey, setInputKey] = useState(apiKeySignal.value);\n  const [message, setMessage] = useState('');\n  const [messageType, setMessageType] = useState<'success' | 'error' | 'info' | ''>('');\n  const [apiStatus, setApiStatus] = useState<'ready' | 'checking' | 'error'>('ready');\n\n  // Effect to ensure the input field and signal reflect the latest from localStorage on mount\n  // and to update the input field if the signal changes externally.\n  useEffect(() => {\n    const currentStoredKey = getEnvironmentConfig().OPENROUTER_API_KEY;\n    setInputKey(currentStoredKey);\n    \n    // Ensure the signal is also in sync with the potentially updated localStorage value\n    if (apiKeySignal.value !== currentStoredKey) {\n      apiKeySignal.value = currentStoredKey;\n    }\n\n    // For remote interfaces, ensure we're using the default key\n    if (isRemoteInterface && isUsingUserProvidedApiKey()) {\n      console.log(\"Remote interface detected, using default API key\");\n      localStorage.removeItem('openrouter_api_key');\n      apiKeySignal.value = getEnvironmentConfig().OPENROUTER_API_KEY;\n    }\n  }, []); // Runs once on mount to initialize from localStorage\n\n  // This effect handles updates if apiKeySignal changes due to other interactions (e.g. after saving)\n  useEffect(() => {\n    setInputKey(apiKeySignal.value);\n  }, [apiKeySignal.value]);\n\n  /**\n   * Handles saving the input API key using the environment utility and updating the signal.\n   * Performs validation through the utility function.\n   */\n  const handleSave = () => {\n    const isValid = setUserApiKey(inputKey);\n    \n    if (isValid) {\n      // Update the signal with the new key from the environment\n      apiKeySignal.value = getEnvironmentConfig().OPENROUTER_API_KEY;\n      setMessageType('success');\n      setMessage('API key saved successfully!');\n    } else {\n      setMessageType('error');\n      setMessage('Please enter a valid OpenRouter API key (starts with sk-or-)');\n    }\n    \n    // Clear message after a few seconds\n    setTimeout(() => setMessage(''), 3000);\n  };\n\n  const messageClass = \n    messageType === 'success' ? 'text-green-600' : \n    messageType === 'error' ? 'text-red-600' : \n    messageType === 'info' ? 'text-blue-600' : '';\n\n  // When running in a remote interface, don't show the API key input UI\n  if (isRemoteInterface) {\n    return null;\n  }\n\n  return (\n    <div className=\"mb-4 mt-6 pt-4 border-t border-typewriter-ink border-opacity-20\">\n      <h3 className=\"text-lg font-semibold mb-2 text-typewriter-ink\">API Configuration</h3>\n      <label htmlFor=\"api-key-input\" className=\"block mb-2 text-typewriter-ink\">OpenRouter API Key</label>\n      <div className=\"flex flex-col sm:flex-row gap-2\">\n        <input\n          id=\"api-key-input\"\n          type=\"password\"\n          className=\"flex-grow p-2 border border-typewriter-ink bg-aged-paper-light rounded focus:outline-none focus:ring-2 focus:ring-typewriter-ribbon\"\n          placeholder=\"sk-or-...\"\n          value={inputKey}\n          onInput={(e) => setInputKey((e.target as HTMLInputElement).value)}\n          aria-label=\"OpenRouter API Key input\"\n        />\n        <button\n          onClick={handleSave}\n          className=\"px-4 py-2 bg-typewriter-ink text-aged-paper rounded hover:bg-opacity-80 focus:ring-2 focus:ring-typewriter-ribbon focus:outline-none typewriter-key min-w-[120px] min-h-[42px] flex items-center justify-center\"\n          aria-label=\"Save API key\"\n        >\n          Save API Key\n        </button>\n      </div>\n      <p className=\"text-sm mt-2 text-typewriter-ink opacity-80\">\n        {isUsingUserProvidedApiKey() \n          ? \"Custom API key is being used\" \n          : \"Using default API key. Get your own at \"}\n        {!isUsingUserProvidedApiKey() && \n          <a \n            href=\"https://openrouter.ai\" \n            target=\"_blank\" \n            rel=\"noopener noreferrer\"\n            className=\"underline hover:text-typewriter-ribbon focus:outline-none focus:ring-2 focus:ring-typewriter-ribbon rounded\"\n            aria-label=\"Visit OpenRouter website\"\n          >\n            openrouter.ai\n          </a>\n        }\n      </p>\n      {message && <p className={`mt-2 text-sm ${messageClass}`} role=\"status\">{message}</p>}\n    </div>\n  );\n};\n\n// Export isValidApiKey for use in other modules if needed\nexport { isValidApiKey };\n","import { h, FunctionComponent } from 'preact';\nimport { useState, useEffect, useRef } from 'preact/hooks';\n\ninterface WelcomeOverlayProps {\n  onStart: () => void;\n}\n\nexport const WelcomeOverlay: FunctionComponent<WelcomeOverlayProps> = ({ onStart }) => {\n  const [visible, setVisible] = useState(true);\n  const startButtonRef = useRef<HTMLButtonElement>(null);\n  \n  // When component mounts, focus the start button for accessibility\n  useEffect(() => {\n    if (visible && startButtonRef.current) {\n      startButtonRef.current.focus();\n    }\n    \n    // Trap focus within the modal when it's visible\n    const handleTabKey = (e: KeyboardEvent) => {\n      if (!visible || e.key !== 'Tab') return;\n      \n      // List of all focusable elements in the overlay\n      const modal = document.querySelector('#welcome-modal');\n      if (!modal) return;\n      \n      const focusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n      const firstElement = focusableElements[0] as HTMLElement;\n      const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\n      \n      if (e.shiftKey) {\n        // If shift+tab and on first element, wrap to last\n        if (document.activeElement === firstElement) {\n          e.preventDefault();\n          lastElement.focus();\n        }\n      } else {\n        // If tab and on last element, wrap to first\n        if (document.activeElement === lastElement) {\n          e.preventDefault();\n          firstElement.focus();\n        }\n      }\n    };\n    \n    // Handle escape key to close the modal\n    const handleEscapeKey = (e: KeyboardEvent) => {\n      if (visible && e.key === 'Escape') {\n        handleStart();\n      }\n    };\n    \n    document.addEventListener('keydown', handleTabKey);\n    document.addEventListener('keydown', handleEscapeKey);\n    \n    return () => {\n      document.removeEventListener('keydown', handleTabKey);\n      document.removeEventListener('keydown', handleEscapeKey);\n    };\n  }, [visible]);\n  \n  const handleStart = () => {\n    setVisible(false);\n    onStart();\n  };\n  \n  // Don't render if not visible\n  if (!visible) return null;\n  \n  return (\n    <div \n      id=\"welcome-overlay\" \n      className=\"fixed inset-0 flex items-center justify-center z-50 p-4 bg-black bg-opacity-60 backdrop-blur-sm\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"welcome-title\"\n      onClick={(e) => {\n        // Only close if the click was on the backdrop, not the modal itself\n        if ((e.target as HTMLElement).id === 'welcome-overlay') {\n          handleStart();\n        }\n      }}\n    >\n      <div \n        id=\"welcome-modal\"\n        className=\"bg-aged-paper p-6 md:p-8 rounded-lg shadow-lg max-w-2xl w-full\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <h1 \n          id=\"welcome-title\" \n          className=\"text-2xl md:text-3xl font-bold mb-4 md:mb-6 text-typewriter-ink text-center\"\n        >\n          Cloze Reader\n        </h1>\n        \n        <div className=\"prose prose-lg mb-6 typewriter-text text-typewriter-ink\">\n          <div className=\"mb-4\">\n            <strong className=\"text-lg\">How to Play</strong>\n            <ol className=\"list-inside space-y-1 mt-2\">\n              <li>Load book excerpts from the Gutenberg Project</li>\n              <li>Read context clues to infer missing words</li>\n              <li>Get at least half correct to level up</li>\n            </ol>\n          </div>\n\n          <div>\n            <strong className=\"text-lg\">Game Controls</strong>\n            <ul className=\"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-1 mt-2\">\n              <li className=\"flex items-center\">\n                <span className=\"text-typewriter-ribbon mr-2\"></span>\n                <span><strong>Topic:</strong> Choose a category</span>\n              </li>\n              <li className=\"flex items-center\">\n                <span className=\"text-typewriter-ribbon mr-2\"></span>\n                <span><strong>Author:</strong> Specify if desired</span>\n              </li>\n              <li className=\"flex items-center\">\n                <span className=\"text-typewriter-ribbon mr-2\"></span>\n                <span><strong>Century:</strong> Filter by time period</span>\n              </li>\n              <li className=\"flex items-center\">\n                <span className=\"text-typewriter-ribbon mr-2\"></span>\n                <span><strong>Hint:</strong> Get help (limited)</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n        \n        <div className=\"text-center\">\n          <button \n            ref={startButtonRef}\n            id=\"start-game-btn\" \n            className=\"px-6 py-3 bg-typewriter-ribbon text-aged-paper font-bold text-lg rounded shadow-lg hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-typewriter-ink focus:ring-offset-2 focus:ring-offset-aged-paper transition-all duration-200\"\n            aria-label=\"Start game\"\n            onClick={(e) => {\n              e.preventDefault();\n              handleStart();\n            }}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                handleStart();\n              }\n            }}\n          >\n             START READING \n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":["ENCODED_ENTITIES","encodeEntities","str","length","test","last","i","out","ch","charCodeAt","slice","IS_NON_DIMENSIONAL","vnodeId","isArray","Array","createVNode","type","props","key","isStaticChildren","__source","__self","ref","normalizedProps","vnode","__k","__","__b","__e","__c","constructor","undefined","__v","__i","__u","defaultProps","options","jsxTemplate","templates","Fragment","tpl","exprs","call","arguments","JS_TO_CSS","CSS_REGEX","jsxAttr","name","value","attr","result","prop","val","replace","toLowerCase","suffix","startsWith","jsxEscape","isValidElement","rerenderQueue","prevDebounce","defer","depthSort","CAPTURE_REGEX","eventClock","eventProxy","eventProxyCapture","EMPTY_OBJ","EMPTY_ARR","assign","obj","removeNode","node","parentNode","removeChild","createElement","children","original","createRef","current","BaseComponent","context","this","getDomSibling","childIndex","sibling","updateParentDomPointers","child","base","enqueueRender","c","__d","push","process","__r","debounceRendering","component","newVNode","oldVNode","oldDom","commitQueue","refQueue","l","sort","shift","__P","diff","__n","namespaceURI","commitRoot","diffChildren","parentDom","renderResult","newParentVNode","oldParentVNode","globalContext","namespace","excessDomChildren","isHydrating","childVNode","newDom","firstChildDom","oldChildren","newChildrenLength","constructNewChildrenArray","applyRef","insert","nextSibling","skewedIndex","matchingIndex","oldChildrenLength","remainingOldChildren","skew","String","findMatchingIndex","unmount","parentVNode","contains","insertBefore","nodeType","toChildArray","some","x","y","setStyle","style","setProperty","dom","oldValue","useCapture","o","cssText","_attached","addEventListener","removeEventListener","e","removeAttribute","setAttribute","createEventProxy","eventHandler","_dispatched","event","tmp","isNew","oldProps","oldState","snapshot","clearProcessingException","newProps","isClassComponent","provider","componentContext","renderHook","count","newType","outer","prototype","render","contextType","__E","doRender","sub","state","__h","_sb","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","cloneNode","then","MODE_HYDRATE","indexOf","diffElementNodes","diffed","root","cb","map","newHtml","oldHtml","newChildren","inputValue","checked","localName","document","createTextNode","createElementNS","is","__m","data","childNodes","attributes","__html","innerHTML","content","hasRefUnmount","skipRemove","r","componentWillUnmount","replaceNode","documentElement","firstChild","hydrate","cloneElement","createContext","defaultValue","Context","subs","ctx","Set","_props","forEach","add","old","delete","Provider","__l","Consumer","contextValue","error","errorInfo","ctor","handled","getDerivedStateFromError","setState","componentDidCatch","update","callback","s","forceUpdate","Promise","bind","resolve","setTimeout","a","b","currentIndex","currentComponent","previousComponent","prevRaf","currentHook","afterPaintEffects","_options","oldBeforeDiff","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","oldRoot","getHookState","index","hooks","__H","useState","initialState","useReducer","invokeOrReturn","reducer","init","hookState","_reducer","action","currentValue","__N","nextValue","__f","updateHookState","p","stateHooks","filter","every","prevScu","shouldUpdate","hookItem","prevCWU","useEffect","args","argsChanged","_pendingArgs","useLayoutEffect","useRef","initialValue","useMemo","useImperativeHandle","createHandle","concat","factory","useCallback","useContext","useDebugValue","formatter","useErrorBoundary","errState","err","useId","mask","flushAfterPaintEffects","invokeCleanup","invokeEffect","requestAnimationFrame","afterNextFrame","hasErrored","HAS_RAF","raf","done","clearTimeout","timeout","cancelAnimationFrame","hook","comp","cleanup","oldArgs","newArgs","arg","f","oldNotify","finishUpdate","effectsQueue","domQueue","effect","_notify","hookName","hookFn","setCurrentUpdater","updater","_start","SignalValue","_ref","_this","currentSignal","useSignal","_useMemo","self","v","_updateFlags","wrappedSignal","computed","isText","dispose","notifyDomUpdates","oldDispose","_updater","_dispose","peek","displayName","Object","defineProperties","Signal","configurable","get","signalProps","__np","_callback","createUpdater","renderedProps","updaters","_updaters","signal","createPropUpdater","_update","propSignal","setAsProperty","ownerSVGElement","changeSignal","newSignal","Component","hasSignals","_sources","u","hasHooksState","HAS_PENDING_UPDATE","useComputed","compute","$compute","deferEffects","deferDomUpdates","queueMicrotask","flushEffects","batch","inst","notifyEffects","flushDomUpdates","useSignalEffect","BRAND_SYMBOL","Symbol","endBatch","batchDepth","hasError","batchedEffect","batchIteration","next","_nextBatchedEffect","_flags","needsToRecompute","fn","evalContext","untracked","prevContext","globalVersion","addDependency","_node","_target","_version","_source","_prevSource","_nextSource","_prevTarget","_nextTarget","_rollbackNode","_subscribe","_value","_targets","brand","_refresh","_unsubscribe","prev","subscribe","valueOf","toString","toJSON","defineProperty","set","Error","target","prepareSources","rollbackNode","cleanupSources","head","Computed","_fn","_globalVersion","OUTDATED","cleanupEffect","_cleanup","disposeEffect","endEffect","Effect","finish"],"version":3,"file":"cloze-reader.99b9cdd5.js.map","sourceRoot":"/__parcel_source_root/"}